<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mastering LLMs Part 1: AI & Machine Learning Foundations</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #4a5a23 0%, #6b7d3a 100%); color: white; min-height: 100vh; }
        .slide { min-height: 100vh; padding: 60px; display: flex; flex-direction: column; justify-content: center; border-bottom: 3px solid rgba(255,255,255,0.2); }
        .slide-number { position: absolute; top: 20px; right: 30px; font-size: 0.9em; opacity: 0.7; }
        h1 { font-size: 3em; margin-bottom: 20px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        h2 { font-size: 2.2em; margin-bottom: 30px; color: #c5d45a; }
        h3 { font-size: 1.6em; margin: 20px 0; color: #b8c76f; }
        p { font-size: 1.3em; margin-bottom: 20px; line-height: 1.6; }
        ul { font-size: 1.2em; margin-left: 40px; line-height: 1.8; }
        li { margin-bottom: 10px; }
        .subtitle { font-size: 1.5em; opacity: 0.9; margin-bottom: 30px; }
        .highlight { background: rgba(197, 212, 90, 0.3); padding: 20px; border-radius: 10px; margin: 20px 0; }
        .code-table { background: #1a1a2e; border-radius: 8px; margin: 20px 0; overflow: hidden; }
        .code-table-header { background: #2d2d44; padding: 10px 15px; color: #c5d45a; font-size: 0.9em; }
        .code-table-content { padding: 20px; }
        .code-table code { font-family: 'Courier New', monospace; color: #c5d45a; white-space: pre; line-height: 1.5; font-size: 0.95em; }
        .two-column { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
        .three-column { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 30px; }
        .card { background: rgba(255,255,255,0.1); padding: 25px; border-radius: 10px; }
        .card h4 { color: #c5d45a; margin-bottom: 15px; font-size: 1.3em; }
        .day-header { background: rgba(0,0,0,0.2); padding: 15px 25px; border-radius: 8px; display: inline-block; margin-bottom: 20px; }
        .series-badge { background: #c5d45a; color: #3a4a1a; padding: 8px 20px; border-radius: 20px; font-weight: bold; display: inline-block; margin-bottom: 20px; }
        .nav-buttons { position: fixed; bottom: 20px; right: 20px; display: flex; gap: 10px; z-index: 1000; }
        .nav-btn { background: rgba(255,255,255,0.2); color: white; border: 2px solid white; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 1em; }
        .nav-btn:hover { background: white; color: #4a5a23; }
        .diagram { background: rgba(255,255,255,0.1); padding: 30px; border-radius: 10px; text-align: center; margin: 20px 0; }
        .formula { background: rgba(0,0,0,0.3); padding: 20px; border-radius: 8px; text-align: center; font-size: 1.4em; margin: 20px 0; }
        .MathJax { font-size: 1.1em !important; }
    </style>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" async></script>
</head>
<body>

<!-- Slide 1: Title -->
<div class="slide" id="slide1">
    <span class="slide-number">1</span>
    <div class="series-badge">PART 1 OF 3</div>
    <h1>Mastering LLMs</h1>
    <p class="subtitle">Part 1: AI & Machine Learning Foundations</p>
    <p style="font-size: 1.1em; opacity: 0.8; margin-top: 40px;">A 3-Day Intensive Course</p>
    <div style="margin-top: 40px;">
        <p><strong>Day 1:</strong> Python for Data Science & ML Fundamentals</p>
        <p><strong>Day 2:</strong> Neural Networks & Deep Learning</p>
        <p><strong>Day 3:</strong> From Deep Learning to LLMs</p>
    </div>
</div>

<!-- Slide 2: Course Series Overview -->
<div class="slide" id="slide2">
    <span class="slide-number">2</span>
    <h2>The Complete Learning Path</h2>
    <div class="three-column" style="margin-top: 30px;">
        <div class="card" style="border: 3px solid #c5d45a;">
            <h4>Part 1: Foundations</h4>
            <p style="font-size: 0.9em;">(This Course)</p>
            <ul style="font-size: 0.9em; margin-left: 20px;">
                <li>Python for ML</li>
                <li>ML Fundamentals</li>
                <li>Neural Networks</li>
                <li>Intro to LLMs</li>
            </ul>
        </div>
        <div class="card" style="opacity: 0.7;">
            <h4>Part 2: LLM Development</h4>
            <p style="font-size: 0.9em;">(Coming Next)</p>
            <ul style="font-size: 0.9em; margin-left: 20px;">
                <li>Transformers Deep Dive</li>
                <li>RAG Pipelines</li>
                <li>AI Agents</li>
                <li>Fine-tuning</li>
            </ul>
        </div>
        <div class="card" style="opacity: 0.5;">
            <h4>Part 3: Production</h4>
            <p style="font-size: 0.9em;">(Advanced)</p>
            <ul style="font-size: 0.9em; margin-left: 20px;">
                <li>Optimization</li>
                <li>Deployment</li>
                <li>Ethics & Safety</li>
                <li>Enterprise Scale</li>
            </ul>
        </div>
    </div>
</div>

<!-- Slide 3: Prerequisites -->
<div class="slide" id="slide3">
    <span class="slide-number">3</span>
    <h2>What You Already Know</h2>
    <div class="two-column">
        <div class="card">
            <h4>Your Background</h4>
            <ul>
                <li>Basic Python programming</li>
                <li>Angular / .NET development</li>
                <li>General programming concepts</li>
                <li>Working with APIs</li>
            </ul>
        </div>
        <div class="card">
            <h4>What You'll Learn</h4>
            <ul>
                <li>Data science libraries</li>
                <li>Machine learning concepts</li>
                <li>Neural network fundamentals</li>
                <li>How LLMs actually work</li>
            </ul>
        </div>
    </div>
    <div class="highlight" style="margin-top: 30px;">
        <p><strong>No prior ML/AI experience required!</strong> We start from the fundamentals and build up.</p>
    </div>
</div>

<!-- DAY 1 HEADER -->
<div class="slide" id="slide4">
    <span class="slide-number">4</span>
    <div class="day-header">DAY 1</div>
    <h1>Python for Data Science & ML Fundamentals</h1>
    <div style="margin-top: 40px;">
        <p><strong>Module 0:</strong> Python Refresher</p>
        <p><strong>Module 1:</strong> Python Data Science Stack</p>
        <p><strong>Module 2:</strong> Introduction to Machine Learning</p>
        <p><strong>Module 3:</strong> Supervised Learning Basics</p>
    </div>
</div>

<!-- Slide 4: Python Refresher - Core Concepts -->
<div class="slide" id="slide5">
    <span class="slide-number">5</span>
    <h2>Module 0: Python Refresher</h2>
    <p>Quick review of Python fundamentals for ML</p>
    <div class="two-column">
        <div class="card">
            <h4>Data Types</h4>
            <div class="code-table" style="margin-top: 10px;">
                <div class="code-table-content">
                    <code># Numbers
x = 42          # int
y = 3.14        # float

# Strings
name = "AI"
msg = f"Hello {name}"

# Boolean
is_ready = True

# None (null equivalent)
result = None</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>Collections</h4>
            <div class="code-table" style="margin-top: 10px;">
                <div class="code-table-content">
                    <code># List (mutable, ordered)
nums = [1, 2, 3, 4, 5]
nums.append(6)

# Dictionary (key-value)
person = {"name": "Alice", "age": 30}

# Tuple (immutable)
point = (10, 20)

# Set (unique values)
unique = {1, 2, 3}</code>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Slide 5: Python Refresher - Control Flow -->
<div class="slide" id="slide6">
    <span class="slide-number">6</span>
    <h2>Control Flow & Functions</h2>
    <div class="two-column">
        <div class="card">
            <h4>Conditionals & Loops</h4>
            <div class="code-table" style="margin-top: 10px;">
                <div class="code-table-content">
                    <code># If-else
if score > 90:
    grade = "A"
elif score > 80:
    grade = "B"
else:
    grade = "C"

# For loop
for i in range(5):
    print(i)

# While loop
while count < 10:
    count += 1

# List comprehension
squares = [x**2 for x in range(10)]</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>Functions</h4>
            <div class="code-table" style="margin-top: 10px;">
                <div class="code-table-content">
                    <code># Basic function
def greet(name):
    return f"Hello, {name}!"

# Default arguments
def power(x, n=2):
    return x ** n

# Lambda (anonymous function)
double = lambda x: x * 2

# Multiple return values
def stats(nums):
    return min(nums), max(nums)

low, high = stats([1, 5, 3])</code>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Slide 6: Python Refresher - Classes & OOP -->
<div class="slide" id="slide7">
    <span class="slide-number">7</span>
    <h2>Classes & Object-Oriented Python</h2>
    <p>Essential for understanding PyTorch models</p>
    <div class="code-table">
        <div class="code-table-header">Python: Classes</div>
        <div class="code-table-content">
            <code>class Model:
    def __init__(self, name, learning_rate=0.01):
        self.name = name              # Instance attribute
        self.lr = learning_rate
        self.weights = []

    def train(self, data):
        """Train the model on data."""
        print(f"Training {self.name}...")
        # Training logic here

    def predict(self, x):
        return x * 2  # Simplified prediction

# Create instance
my_model = Model("LinearRegression", learning_rate=0.001)
my_model.train(data)
result = my_model.predict(5)  # Returns 10</code>
        </div>
    </div>
    <div class="highlight" style="margin-top: 20px;">
        <p><strong>Why OOP matters:</strong> PyTorch neural networks inherit from <code>nn.Module</code> - understanding classes is key!</p>
    </div>
</div>

<!-- Slide 7: Python Refresher - Useful Patterns -->
<div class="slide" id="slide8">
    <span class="slide-number">8</span>
    <h2>Useful Python Patterns for ML</h2>
    <div class="three-column">
        <div class="card">
            <h4>Unpacking</h4>
            <div class="code-table" style="margin-top: 10px;">
                <div class="code-table-content">
                    <code># Tuple unpacking
x, y = (10, 20)

# Extended unpacking
first, *rest = [1,2,3,4]
# first=1, rest=[2,3,4]

# Dict unpacking
config = {"lr": 0.01}
train(**config)</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>Iteration</h4>
            <div class="code-table" style="margin-top: 10px;">
                <div class="code-table-content">
                    <code># enumerate
for i, val in enumerate(lst):
    print(f"{i}: {val}")

# zip
for a, b in zip(X, y):
    print(a, b)

# dict iteration
for k, v in d.items():
    print(k, v)</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>Common Ops</h4>
            <div class="code-table" style="margin-top: 10px;">
                <div class="code-table-content">
                    <code># Type conversion
int("42")    # 42
float("3.14") # 3.14
str(100)     # "100"

# Slicing
lst[1:4]   # items 1-3
lst[::2]   # every 2nd
lst[::-1]  # reverse</code>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Slide 8: NumPy Introduction -->
<div class="slide" id="slide9">
    <span class="slide-number">9</span>
    <h2>Module 1: NumPy - The Foundation</h2>
    <p>NumPy (Numerical Python) is the fundamental package for scientific computing</p>
    <div class="two-column">
        <div class="card">
            <h4>What is NumPy?</h4>
            <ul>
                <li><strong>N-dimensional arrays:</strong> Efficient multi-dimensional containers</li>
                <li><strong>Vectorized operations:</strong> Apply operations to entire arrays at once</li>
                <li><strong>C-based implementation:</strong> 10-100x faster than Python lists</li>
                <li><strong>Foundation for ML:</strong> PyTorch, TensorFlow, scikit-learn all build on NumPy</li>
            </ul>
        </div>
        <div class="card" style="text-align: center;">
            <h4>NumPy Array Structure</h4>
            <svg viewBox="0 0 320 180" style="width: 100%; max-width: 500px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- 2D Array visualization -->
                <text x="160" y="20" fill="#c5d45a" font-size="12" text-anchor="middle" font-weight="bold">shape = (3, 4)</text>

                <!-- Axis labels -->
                <text x="30" y="100" fill="#ff6b6b" font-size="11" text-anchor="middle">axis=0</text>
                <text x="30" y="115" fill="#ff6b6b" font-size="10" text-anchor="middle">(rows)</text>
                <line x1="40" y1="50" x2="40" y2="145" stroke="#ff6b6b" stroke-width="2" marker-end="url(#arrowRed)"/>

                <text x="175" y="165" fill="#4a90d9" font-size="11" text-anchor="middle">axis=1 (columns)</text>
                <line x1="60" y1="155" x2="290" y2="155" stroke="#4a90d9" stroke-width="2" marker-end="url(#arrowBlue)"/>

                <defs>
                    <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#ff6b6b"/>
                    </marker>
                    <marker id="arrowBlue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#4a90d9"/>
                    </marker>
                </defs>

                <!-- Array cells - Row 0 -->
                <rect x="60" y="35" width="55" height="30" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="2">
                    <animate attributeName="fill" values="rgba(81,207,102,0.3);rgba(81,207,102,0.6);rgba(81,207,102,0.3)" dur="3s" begin="0s" repeatCount="indefinite"/>
                </rect>
                <text x="87" y="55" fill="white" font-size="14" text-anchor="middle">1</text>
                <rect x="120" y="35" width="55" height="30" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="2">
                    <animate attributeName="fill" values="rgba(81,207,102,0.3);rgba(81,207,102,0.6);rgba(81,207,102,0.3)" dur="3s" begin="0.1s" repeatCount="indefinite"/>
                </rect>
                <text x="147" y="55" fill="white" font-size="14" text-anchor="middle">2</text>
                <rect x="180" y="35" width="55" height="30" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="2">
                    <animate attributeName="fill" values="rgba(81,207,102,0.3);rgba(81,207,102,0.6);rgba(81,207,102,0.3)" dur="3s" begin="0.2s" repeatCount="indefinite"/>
                </rect>
                <text x="207" y="55" fill="white" font-size="14" text-anchor="middle">3</text>
                <rect x="240" y="35" width="55" height="30" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="2">
                    <animate attributeName="fill" values="rgba(81,207,102,0.3);rgba(81,207,102,0.6);rgba(81,207,102,0.3)" dur="3s" begin="0.3s" repeatCount="indefinite"/>
                </rect>
                <text x="267" y="55" fill="white" font-size="14" text-anchor="middle">4</text>

                <!-- Array cells - Row 1 -->
                <rect x="60" y="70" width="55" height="30" fill="rgba(74,144,217,0.3)" stroke="#4a90d9" stroke-width="2">
                    <animate attributeName="fill" values="rgba(74,144,217,0.3);rgba(74,144,217,0.6);rgba(74,144,217,0.3)" dur="3s" begin="0.4s" repeatCount="indefinite"/>
                </rect>
                <text x="87" y="90" fill="white" font-size="14" text-anchor="middle">5</text>
                <rect x="120" y="70" width="55" height="30" fill="rgba(74,144,217,0.3)" stroke="#4a90d9" stroke-width="2">
                    <animate attributeName="fill" values="rgba(74,144,217,0.3);rgba(74,144,217,0.6);rgba(74,144,217,0.3)" dur="3s" begin="0.5s" repeatCount="indefinite"/>
                </rect>
                <text x="147" y="90" fill="white" font-size="14" text-anchor="middle">6</text>
                <rect x="180" y="70" width="55" height="30" fill="rgba(74,144,217,0.3)" stroke="#4a90d9" stroke-width="2">
                    <animate attributeName="fill" values="rgba(74,144,217,0.3);rgba(74,144,217,0.6);rgba(74,144,217,0.3)" dur="3s" begin="0.6s" repeatCount="indefinite"/>
                </rect>
                <text x="207" y="90" fill="white" font-size="14" text-anchor="middle">7</text>
                <rect x="240" y="70" width="55" height="30" fill="rgba(74,144,217,0.3)" stroke="#4a90d9" stroke-width="2">
                    <animate attributeName="fill" values="rgba(74,144,217,0.3);rgba(74,144,217,0.6);rgba(74,144,217,0.3)" dur="3s" begin="0.7s" repeatCount="indefinite"/>
                </rect>
                <text x="267" y="90" fill="white" font-size="14" text-anchor="middle">8</text>

                <!-- Array cells - Row 2 -->
                <rect x="60" y="105" width="55" height="30" fill="rgba(255,107,107,0.3)" stroke="#ff6b6b" stroke-width="2">
                    <animate attributeName="fill" values="rgba(255,107,107,0.3);rgba(255,107,107,0.6);rgba(255,107,107,0.3)" dur="3s" begin="0.8s" repeatCount="indefinite"/>
                </rect>
                <text x="87" y="125" fill="white" font-size="14" text-anchor="middle">9</text>
                <rect x="120" y="105" width="55" height="30" fill="rgba(255,107,107,0.3)" stroke="#ff6b6b" stroke-width="2">
                    <animate attributeName="fill" values="rgba(255,107,107,0.3);rgba(255,107,107,0.6);rgba(255,107,107,0.3)" dur="3s" begin="0.9s" repeatCount="indefinite"/>
                </rect>
                <text x="147" y="125" fill="white" font-size="14" text-anchor="middle">10</text>
                <rect x="180" y="105" width="55" height="30" fill="rgba(255,107,107,0.3)" stroke="#ff6b6b" stroke-width="2">
                    <animate attributeName="fill" values="rgba(255,107,107,0.3);rgba(255,107,107,0.6);rgba(255,107,107,0.3)" dur="3s" begin="1.0s" repeatCount="indefinite"/>
                </rect>
                <text x="207" y="125" fill="white" font-size="14" text-anchor="middle">11</text>
                <rect x="240" y="105" width="55" height="30" fill="rgba(255,107,107,0.3)" stroke="#ff6b6b" stroke-width="2">
                    <animate attributeName="fill" values="rgba(255,107,107,0.3);rgba(255,107,107,0.6);rgba(255,107,107,0.3)" dur="3s" begin="1.1s" repeatCount="indefinite"/>
                </rect>
                <text x="267" y="125" fill="white" font-size="14" text-anchor="middle">12</text>
            </svg>
            <p style="font-size: 0.8em; margin-top: 8px; color: rgba(255,255,255,0.7);">dtype: int64 | Contiguous memory</p>
        </div>
    </div>
</div>

<!-- Slide 9: NumPy Basics -->
<div class="slide" id="slide10">
    <span class="slide-number">10</span>
    <h2>NumPy - Creating Arrays</h2>
    <p>Multiple ways to create arrays for different use cases</p>
    <div class="code-table">
        <div class="code-table-header">Python: NumPy Basics</div>
        <div class="code-table-content">
            <code>import numpy as np

# Create arrays
arr = np.array([1, 2, 3, 4, 5])
matrix = np.array([[1, 2, 3], [4, 5, 6]])

# Array operations (vectorized - very fast!)
doubled = arr * 2           # [2, 4, 6, 8, 10]
squared = arr ** 2          # [1, 4, 9, 16, 25]

# Statistical operations
mean = np.mean(arr)         # 3.0
std = np.std(arr)           # 1.414...

# Matrix multiplication (crucial for ML!)
result = np.dot(matrix, arr[:3])  # [14, 32]</code>
        </div>
    </div>
</div>

<!-- Slide 9: NumPy for ML -->
<div class="slide" id="slide11">
    <span class="slide-number">11</span>
    <h2>Why NumPy Matters for ML</h2>
    <div class="two-column">
        <div class="card">
            <h4>Speed</h4>
            <p>NumPy operations are 10-100x faster than Python loops because they're implemented in C.</p>
            <div class="code-table" style="margin-top: 15px;">
                <div class="code-table-content">
                    <code># Slow Python loop
result = []
for x in data:
    result.append(x * 2)

# Fast NumPy
result = data * 2</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>ML Operations</h4>
            <ul>
                <li>Matrix multiplication</li>
                <li>Broadcasting</li>
                <li>Random number generation</li>
                <li>Linear algebra</li>
            </ul>
            <p style="margin-top: 15px;">All neural networks are fundamentally matrix operations!</p>
        </div>
    </div>
</div>

<!-- Slide 11: NumPy Reshaping -->
<div class="slide" id="slide12">
    <span class="slide-number">12</span>
    <h2>NumPy Reshaping & Slicing</h2>
    <p>Manipulating array shapes is fundamental for ML data preparation</p>
    <div class="two-column">
        <div class="code-table">
            <div class="code-table-header">Common Shape Operations</div>
            <div class="code-table-content">
                <code>import numpy as np

# Reshape array
arr = np.arange(12)  # [0, 1, 2, ..., 11]
matrix = arr.reshape(3, 4)  # 3 rows, 4 columns
matrix = arr.reshape(4, -1) # 4 rows, auto columns

# Flatten back to 1D
flat = matrix.flatten()

# Slicing (same as Python lists, but multi-dimensional)
matrix[0, :]     # First row
matrix[:, 0]     # First column
matrix[1:3, 2:]  # Subset: rows 1-2, columns 2+</code>
            </div>
        </div>
        <div class="card" style="text-align: center;">
            <h4>Reshape Animation: (12,) → (3, 4)</h4>
            <svg viewBox="0 0 350 220" style="width: 100%; max-width: 600px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- 1D Array - Starting position -->
                <text x="175" y="20" fill="#c5d45a" font-size="11" text-anchor="middle">arr = np.arange(12)</text>

                <!-- 1D cells that animate to 2D positions -->
                <!-- Row 0 -->
                <rect x="20" y="35" width="25" height="22" fill="rgba(81,207,102,0.4)" stroke="#51cf66" stroke-width="1.5">
                    <animate attributeName="x" values="20;45;45" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="35;95;95" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                </rect>
                <text font-size="11" fill="white" text-anchor="middle">
                    <animate attributeName="x" values="32;57;57" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="50;110;110" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    0
                </text>

                <rect x="47" y="35" width="25" height="22" fill="rgba(81,207,102,0.4)" stroke="#51cf66" stroke-width="1.5">
                    <animate attributeName="x" values="47;72;72" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="35;95;95" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                </rect>
                <text font-size="11" fill="white" text-anchor="middle">
                    <animate attributeName="x" values="59;84;84" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="50;110;110" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    1
                </text>

                <rect x="74" y="35" width="25" height="22" fill="rgba(81,207,102,0.4)" stroke="#51cf66" stroke-width="1.5">
                    <animate attributeName="x" values="74;99;99" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="35;95;95" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                </rect>
                <text font-size="11" fill="white" text-anchor="middle">
                    <animate attributeName="x" values="86;111;111" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="50;110;110" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    2
                </text>

                <rect x="101" y="35" width="25" height="22" fill="rgba(81,207,102,0.4)" stroke="#51cf66" stroke-width="1.5">
                    <animate attributeName="x" values="101;126;126" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="35;95;95" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                </rect>
                <text font-size="11" fill="white" text-anchor="middle">
                    <animate attributeName="x" values="113;138;138" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="50;110;110" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    3
                </text>

                <!-- Row 1 -->
                <rect x="128" y="35" width="25" height="22" fill="rgba(74,144,217,0.4)" stroke="#4a90d9" stroke-width="1.5">
                    <animate attributeName="x" values="128;45;45" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="35;125;125" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                </rect>
                <text font-size="11" fill="white" text-anchor="middle">
                    <animate attributeName="x" values="140;57;57" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="50;140;140" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    4
                </text>

                <rect x="155" y="35" width="25" height="22" fill="rgba(74,144,217,0.4)" stroke="#4a90d9" stroke-width="1.5">
                    <animate attributeName="x" values="155;72;72" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="35;125;125" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                </rect>
                <text font-size="11" fill="white" text-anchor="middle">
                    <animate attributeName="x" values="167;84;84" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="50;140;140" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    5
                </text>

                <rect x="182" y="35" width="25" height="22" fill="rgba(74,144,217,0.4)" stroke="#4a90d9" stroke-width="1.5">
                    <animate attributeName="x" values="182;99;99" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="35;125;125" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                </rect>
                <text font-size="11" fill="white" text-anchor="middle">
                    <animate attributeName="x" values="194;111;111" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="50;140;140" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    6
                </text>

                <rect x="209" y="35" width="25" height="22" fill="rgba(74,144,217,0.4)" stroke="#4a90d9" stroke-width="1.5">
                    <animate attributeName="x" values="209;126;126" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="35;125;125" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                </rect>
                <text font-size="11" fill="white" text-anchor="middle">
                    <animate attributeName="x" values="221;138;138" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="50;140;140" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    7
                </text>

                <!-- Row 2 -->
                <rect x="236" y="35" width="25" height="22" fill="rgba(255,107,107,0.4)" stroke="#ff6b6b" stroke-width="1.5">
                    <animate attributeName="x" values="236;45;45" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="35;155;155" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                </rect>
                <text font-size="11" fill="white" text-anchor="middle">
                    <animate attributeName="x" values="248;57;57" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="50;170;170" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    8
                </text>

                <rect x="263" y="35" width="25" height="22" fill="rgba(255,107,107,0.4)" stroke="#ff6b6b" stroke-width="1.5">
                    <animate attributeName="x" values="263;72;72" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="35;155;155" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                </rect>
                <text font-size="11" fill="white" text-anchor="middle">
                    <animate attributeName="x" values="275;84;84" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="50;170;170" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    9
                </text>

                <rect x="290" y="35" width="25" height="22" fill="rgba(255,107,107,0.4)" stroke="#ff6b6b" stroke-width="1.5">
                    <animate attributeName="x" values="290;99;99" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="35;155;155" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                </rect>
                <text font-size="11" fill="white" text-anchor="middle">
                    <animate attributeName="x" values="302;111;111" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="50;170;170" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    10
                </text>

                <rect x="317" y="35" width="25" height="22" fill="rgba(255,107,107,0.4)" stroke="#ff6b6b" stroke-width="1.5">
                    <animate attributeName="x" values="317;126;126" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="35;155;155" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                </rect>
                <text font-size="11" fill="white" text-anchor="middle">
                    <animate attributeName="x" values="329;138;138" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    <animate attributeName="y" values="50;170;170" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;1"/>
                    11
                </text>

                <!-- Shape labels -->
                <text x="175" y="75" fill="white" font-size="10" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="1;0;0" dur="4s" repeatCount="indefinite" keyTimes="0;0.25;1"/>
                    shape: (12,)
                </text>
                <text x="100" y="200" fill="#c5d45a" font-size="11" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;0;1;1" dur="4s" repeatCount="indefinite" keyTimes="0;0.25;0.35;1"/>
                    .reshape(3, 4)
                </text>
                <text x="100" y="215" fill="white" font-size="10" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;0;1;1" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;0.4;1"/>
                    shape: (3, 4)
                </text>

                <!-- Slicing demo on right side -->
                <text x="255" y="95" fill="#ffd700" font-size="10" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="4s" repeatCount="indefinite" keyTimes="0;0.4;0.5;0.6;1"/>
                    Slicing:
                </text>
                <text x="255" y="115" fill="white" font-size="9" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="4s" repeatCount="indefinite" keyTimes="0;0.4;0.5;0.6;1"/>
                    matrix[0, :] → row 0
                </text>
                <text x="255" y="135" fill="white" font-size="9" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="4s" repeatCount="indefinite" keyTimes="0;0.4;0.55;0.65;1"/>
                    matrix[:, 0] → col 0
                </text>
                <text x="255" y="155" fill="white" font-size="9" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="4s" repeatCount="indefinite" keyTimes="0;0.4;0.6;0.7;1"/>
                    matrix[1:3, 2:]
                </text>
            </svg>
        </div>
    </div>
</div>

<!-- Slide 13: NumPy Common Methods -->
<div class="slide" id="slide13">
    <span class="slide-number">13</span>
    <h2>NumPy Essential Methods</h2>
    <p>Master these methods - they're used constantly in ML pipelines</p>
    <div class="two-column">
        <div class="code-table">
            <div class="code-table-header">Aggregation & Search</div>
            <div class="code-table-content">
                <code>import numpy as np

arr = np.array([[1, 5, 2], [8, 3, 9]])

# Aggregations with axis
arr.sum()          # 28 (all elements)
arr.sum(axis=0)    # [9, 8, 11] (per column)
arr.sum(axis=1)    # [8, 20] (per row)

# Same for: mean, std, min, max, prod
arr.mean(axis=1)   # [2.67, 6.67]

# Find indices of min/max
np.argmax(arr)     # 5 (flat index of 9)
np.argmax(arr, axis=1)  # [1, 2]

# Conditional selection
np.where(arr > 4)  # Indices where True
np.where(arr > 4, arr, 0)  # Replace ≤4 with 0</code>
            </div>
        </div>
        <div class="code-table">
            <div class="code-table-header">Creating & Combining</div>
            <div class="code-table-content">
                <code># Creating arrays
np.zeros((3, 4))      # All zeros
np.ones((2, 3))       # All ones
np.eye(3)             # Identity matrix
np.linspace(0, 1, 5)  # [0, .25, .5, .75, 1]
np.arange(0, 10, 2)   # [0, 2, 4, 6, 8]

# Combining arrays
np.concatenate([a, b], axis=0)  # Stack rows
np.vstack([a, b])     # Same as axis=0
np.hstack([a, b])     # Stack columns

# Sorting & unique
np.sort(arr)          # Sort each row
np.sort(arr, axis=0)  # Sort each column
np.unique(arr)        # Unique values
np.argsort(arr)       # Indices that would sort</code>
            </div>
        </div>
    </div>
</div>

<!-- Slide 14: NumPy Boolean Indexing -->
<div class="slide" id="slide14">
    <span class="slide-number">14</span>
    <h2>NumPy Boolean Indexing</h2>
    <p>Filter arrays using conditions - incredibly powerful for data processing</p>
    <div class="two-column">
        <div class="code-table">
            <div class="code-table-header">Boolean Masks</div>
            <div class="code-table-content">
                <code>import numpy as np

data = np.array([1, 5, 2, 8, 3, 9, 4])

# Create boolean mask
mask = data > 4
# [False, True, False, True, False, True, False]

# Apply mask to filter
filtered = data[mask]  # [5, 8, 9]

# Combine conditions
mask = (data > 2) & (data < 8)  # AND
mask = (data < 3) | (data > 7)  # OR
mask = ~(data > 5)              # NOT

# Direct filtering (shorthand)
data[data > 4]         # [5, 8, 9]
data[(data > 2) & (data < 8)]  # [5, 3, 4]</code>
            </div>
        </div>
        <div class="code-table">
            <div class="code-table-header">2D Boolean Operations</div>
            <div class="code-table-content">
                <code>matrix = np.array([[1, 2, 3],
                    [4, 5, 6],
                    [7, 8, 9]])

# Filter 2D array
matrix[matrix > 5]     # [6, 7, 8, 9] (flat)

# Filter specific columns
col_mask = np.array([True, False, True])
matrix[:, col_mask]    # Columns 0 and 2

# Count elements matching condition
np.sum(matrix > 5)     # 4

# Check if any/all match
np.any(matrix > 8)     # True
np.all(matrix > 0)     # True

# Replace based on condition
matrix[matrix > 5] = 0 # In-place modification</code>
            </div>
        </div>
    </div>
    <div class="highlight" style="margin-top: 15px;">
        <p><strong>ML Use Case:</strong> Boolean indexing is used for filtering datasets, selecting features, masking invalid values, and preprocessing data.</p>
    </div>
</div>

<!-- Slide 14: NumPy Broadcasting -->
<div class="slide" id="slide15">
    <span class="slide-number">15</span>
    <h2>NumPy Broadcasting</h2>
    <p>Broadcasting allows operations between arrays of different shapes - a powerful feature!</p>
    <div class="two-column">
        <div class="code-table">
            <div class="code-table-header">Broadcasting in Action</div>
            <div class="code-table-content">
                <code>import numpy as np

# Scalar broadcast to array
arr = np.array([1, 2, 3, 4])
result = arr + 10  # [11, 12, 13, 14]

# Row broadcast to matrix
matrix = np.array([[1, 2, 3],
                   [4, 5, 6]])
row = np.array([10, 20, 30])
result = matrix + row
# [[11, 22, 33],
#  [14, 25, 36]]

# Column broadcast (need reshape)
col = np.array([[100], [200]])
result = matrix + col
# [[101, 102, 103],
#  [204, 205, 206]]</code>
            </div>
        </div>
        <div class="card" style="text-align: center;">
            <h4>Broadcasting Visualization</h4>
            <svg viewBox="0 0 340 230" style="width: 100%; max-width: 580px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Matrix (2x3) -->
                <text x="60" y="20" fill="#c5d45a" font-size="10" text-anchor="middle">matrix (2,3)</text>
                <rect x="20" y="28" width="28" height="24" fill="rgba(74,144,217,0.4)" stroke="#4a90d9" stroke-width="1.5"/>
                <text x="34" y="44" fill="white" font-size="11" text-anchor="middle">1</text>
                <rect x="52" y="28" width="28" height="24" fill="rgba(74,144,217,0.4)" stroke="#4a90d9" stroke-width="1.5"/>
                <text x="66" y="44" fill="white" font-size="11" text-anchor="middle">2</text>
                <rect x="84" y="28" width="28" height="24" fill="rgba(74,144,217,0.4)" stroke="#4a90d9" stroke-width="1.5"/>
                <text x="98" y="44" fill="white" font-size="11" text-anchor="middle">3</text>

                <rect x="20" y="56" width="28" height="24" fill="rgba(74,144,217,0.4)" stroke="#4a90d9" stroke-width="1.5"/>
                <text x="34" y="72" fill="white" font-size="11" text-anchor="middle">4</text>
                <rect x="52" y="56" width="28" height="24" fill="rgba(74,144,217,0.4)" stroke="#4a90d9" stroke-width="1.5"/>
                <text x="66" y="72" fill="white" font-size="11" text-anchor="middle">5</text>
                <rect x="84" y="56" width="28" height="24" fill="rgba(74,144,217,0.4)" stroke="#4a90d9" stroke-width="1.5"/>
                <text x="98" y="72" fill="white" font-size="11" text-anchor="middle">6</text>

                <!-- Plus sign -->
                <text x="130" y="55" fill="#ffd700" font-size="20" text-anchor="middle">+</text>

                <!-- Row vector (1x3) that broadcasts -->
                <text x="200" y="20" fill="#c5d45a" font-size="10" text-anchor="middle">row (3,)</text>
                <rect x="152" y="35" width="28" height="24" fill="rgba(81,207,102,0.4)" stroke="#51cf66" stroke-width="1.5">
                    <animate attributeName="y" values="35;35;28;28" dur="4s" repeatCount="indefinite" keyTimes="0;0.2;0.4;1"/>
                </rect>
                <text font-size="11" fill="white" text-anchor="middle">
                    <animate attributeName="x" values="166;166;166;166" dur="4s" repeatCount="indefinite"/>
                    <animate attributeName="y" values="51;51;44;44" dur="4s" repeatCount="indefinite" keyTimes="0;0.2;0.4;1"/>
                    10
                </text>
                <rect x="184" y="35" width="28" height="24" fill="rgba(81,207,102,0.4)" stroke="#51cf66" stroke-width="1.5">
                    <animate attributeName="y" values="35;35;28;28" dur="4s" repeatCount="indefinite" keyTimes="0;0.2;0.4;1"/>
                </rect>
                <text font-size="11" fill="white" text-anchor="middle">
                    <animate attributeName="x" values="198;198;198;198" dur="4s" repeatCount="indefinite"/>
                    <animate attributeName="y" values="51;51;44;44" dur="4s" repeatCount="indefinite" keyTimes="0;0.2;0.4;1"/>
                    20
                </text>
                <rect x="216" y="35" width="28" height="24" fill="rgba(81,207,102,0.4)" stroke="#51cf66" stroke-width="1.5">
                    <animate attributeName="y" values="35;35;28;28" dur="4s" repeatCount="indefinite" keyTimes="0;0.2;0.4;1"/>
                </rect>
                <text font-size="11" fill="white" text-anchor="middle">
                    <animate attributeName="x" values="230;230;230;230" dur="4s" repeatCount="indefinite"/>
                    <animate attributeName="y" values="51;51;44;44" dur="4s" repeatCount="indefinite" keyTimes="0;0.2;0.4;1"/>
                    30
                </text>

                <!-- Broadcasted row (appears below) -->
                <rect x="152" y="56" width="28" height="24" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="1" stroke-dasharray="3,2" opacity="0">
                    <animate attributeName="opacity" values="0;0;0.8;0.8" dur="4s" repeatCount="indefinite" keyTimes="0;0.2;0.4;1"/>
                </rect>
                <text font-size="11" fill="rgba(255,255,255,0.7)" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;0;0.8;0.8" dur="4s" repeatCount="indefinite" keyTimes="0;0.2;0.4;1"/>
                    <animate attributeName="x" values="166;166;166;166" dur="4s" repeatCount="indefinite"/>
                    <animate attributeName="y" values="72;72;72;72" dur="4s" repeatCount="indefinite"/>
                    10
                </text>
                <rect x="184" y="56" width="28" height="24" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="1" stroke-dasharray="3,2" opacity="0">
                    <animate attributeName="opacity" values="0;0;0.8;0.8" dur="4s" repeatCount="indefinite" keyTimes="0;0.2;0.4;1"/>
                </rect>
                <text font-size="11" fill="rgba(255,255,255,0.7)" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;0;0.8;0.8" dur="4s" repeatCount="indefinite" keyTimes="0;0.2;0.4;1"/>
                    <animate attributeName="x" values="198;198;198;198" dur="4s" repeatCount="indefinite"/>
                    <animate attributeName="y" values="72;72;72;72" dur="4s" repeatCount="indefinite"/>
                    20
                </text>
                <rect x="216" y="56" width="28" height="24" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="1" stroke-dasharray="3,2" opacity="0">
                    <animate attributeName="opacity" values="0;0;0.8;0.8" dur="4s" repeatCount="indefinite" keyTimes="0;0.2;0.4;1"/>
                </rect>
                <text font-size="11" fill="rgba(255,255,255,0.7)" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;0;0.8;0.8" dur="4s" repeatCount="indefinite" keyTimes="0;0.2;0.4;1"/>
                    <animate attributeName="x" values="230;230;230;230" dur="4s" repeatCount="indefinite"/>
                    <animate attributeName="y" values="72;72;72;72" dur="4s" repeatCount="indefinite"/>
                    30
                </text>

                <!-- Broadcast label -->
                <text x="200" y="95" fill="#51cf66" font-size="9" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;0;1;1" dur="4s" repeatCount="indefinite" keyTimes="0;0.3;0.45;1"/>
                    ↑ Row broadcasts to match matrix
                </text>

                <!-- Arrow -->
                <text x="170" y="130" fill="#ffd700" font-size="16" text-anchor="middle">=</text>

                <!-- Result matrix -->
                <text x="170" y="150" fill="#c5d45a" font-size="10" text-anchor="middle">result (2,3)</text>
                <rect x="105" y="158" width="32" height="26" fill="rgba(255,215,0,0.3)" stroke="#ffd700" stroke-width="1.5" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="4s" repeatCount="indefinite" keyTimes="0;0.4;0.5;0.6;1"/>
                </rect>
                <text x="121" y="176" fill="white" font-size="12" text-anchor="middle" font-weight="bold" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="4s" repeatCount="indefinite" keyTimes="0;0.4;0.5;0.6;1"/>
                    11
                </text>
                <rect x="141" y="158" width="32" height="26" fill="rgba(255,215,0,0.3)" stroke="#ffd700" stroke-width="1.5" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="4s" repeatCount="indefinite" keyTimes="0;0.4;0.55;0.65;1"/>
                </rect>
                <text x="157" y="176" fill="white" font-size="12" text-anchor="middle" font-weight="bold" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="4s" repeatCount="indefinite" keyTimes="0;0.4;0.55;0.65;1"/>
                    22
                </text>
                <rect x="177" y="158" width="32" height="26" fill="rgba(255,215,0,0.3)" stroke="#ffd700" stroke-width="1.5" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="4s" repeatCount="indefinite" keyTimes="0;0.4;0.6;0.7;1"/>
                </rect>
                <text x="193" y="176" fill="white" font-size="12" text-anchor="middle" font-weight="bold" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="4s" repeatCount="indefinite" keyTimes="0;0.4;0.6;0.7;1"/>
                    33
                </text>

                <rect x="105" y="188" width="32" height="26" fill="rgba(255,215,0,0.3)" stroke="#ffd700" stroke-width="1.5" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="4s" repeatCount="indefinite" keyTimes="0;0.5;0.6;0.7;1"/>
                </rect>
                <text x="121" y="206" fill="white" font-size="12" text-anchor="middle" font-weight="bold" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="4s" repeatCount="indefinite" keyTimes="0;0.5;0.6;0.7;1"/>
                    14
                </text>
                <rect x="141" y="188" width="32" height="26" fill="rgba(255,215,0,0.3)" stroke="#ffd700" stroke-width="1.5" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="4s" repeatCount="indefinite" keyTimes="0;0.5;0.65;0.75;1"/>
                </rect>
                <text x="157" y="206" fill="white" font-size="12" text-anchor="middle" font-weight="bold" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="4s" repeatCount="indefinite" keyTimes="0;0.5;0.65;0.75;1"/>
                    25
                </text>
                <rect x="177" y="188" width="32" height="26" fill="rgba(255,215,0,0.3)" stroke="#ffd700" stroke-width="1.5" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="4s" repeatCount="indefinite" keyTimes="0;0.5;0.7;0.8;1"/>
                </rect>
                <text x="193" y="206" fill="white" font-size="12" text-anchor="middle" font-weight="bold" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="4s" repeatCount="indefinite" keyTimes="0;0.5;0.7;0.8;1"/>
                    36
                </text>

                <!-- Rule text -->
                <text x="290" y="50" fill="white" font-size="8" text-anchor="middle">Rule:</text>
                <text x="290" y="65" fill="rgba(255,255,255,0.8)" font-size="7" text-anchor="middle">Dimensions</text>
                <text x="290" y="78" fill="rgba(255,255,255,0.8)" font-size="7" text-anchor="middle">compatible if</text>
                <text x="290" y="91" fill="rgba(255,255,255,0.8)" font-size="7" text-anchor="middle">equal or 1</text>
            </svg>
        </div>
    </div>
</div>

<!-- Slide 15: Pandas Introduction -->
<div class="slide" id="slide16">
    <span class="slide-number">16</span>
    <h2>Pandas - The Data Analysis Powerhouse</h2>
    <p>Pandas is Python's premier library for data manipulation and analysis</p>
    <div class="two-column">
        <div class="card">
            <h4>What is Pandas?</h4>
            <ul>
                <li><strong>DataFrame:</strong> 2D labeled data structure (like a spreadsheet)</li>
                <li><strong>Series:</strong> 1D labeled array (like a column)</li>
                <li>Built on top of NumPy for performance</li>
                <li>Handles heterogeneous data types</li>
            </ul>
            <p style="margin-top: 15px;"><strong>Named after:</strong> Panel Data (econometrics term)</p>
        </div>
        <div class="card" style="text-align: center;">
            <h4>DataFrame Structure</h4>
            <svg viewBox="0 0 320 200" style="width: 100%; max-width: 520px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Column headers -->
                <text x="50" y="25" fill="#c5d45a" font-size="10" text-anchor="middle">Index</text>
                <rect x="80" y="12" width="70" height="22" fill="rgba(197,212,90,0.3)" stroke="#c5d45a" stroke-width="2"/>
                <text x="115" y="27" fill="#c5d45a" font-size="11" text-anchor="middle" font-weight="bold">name</text>
                <rect x="155" y="12" width="50" height="22" fill="rgba(197,212,90,0.3)" stroke="#c5d45a" stroke-width="2"/>
                <text x="180" y="27" fill="#c5d45a" font-size="11" text-anchor="middle" font-weight="bold">age</text>
                <rect x="210" y="12" width="65" height="22" fill="rgba(197,212,90,0.3)" stroke="#c5d45a" stroke-width="2"/>
                <text x="242" y="27" fill="#c5d45a" font-size="11" text-anchor="middle" font-weight="bold">salary</text>

                <!-- Row 0 -->
                <rect x="25" y="40" width="50" height="26" fill="rgba(74,144,217,0.3)" stroke="#4a90d9" stroke-width="1.5">
                    <animate attributeName="fill" values="rgba(74,144,217,0.3);rgba(74,144,217,0.5);rgba(74,144,217,0.3)" dur="3s" begin="0s" repeatCount="indefinite"/>
                </rect>
                <text x="50" y="58" fill="#4a90d9" font-size="11" text-anchor="middle" font-weight="bold">0</text>
                <rect x="80" y="40" width="70" height="26" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1">
                    <animate attributeName="fill" values="rgba(255,255,255,0.1);rgba(255,255,255,0.2);rgba(255,255,255,0.1)" dur="3s" begin="0s" repeatCount="indefinite"/>
                </rect>
                <text x="115" y="58" fill="white" font-size="11" text-anchor="middle">Alice</text>
                <rect x="155" y="40" width="50" height="26" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1">
                    <animate attributeName="fill" values="rgba(255,255,255,0.1);rgba(255,255,255,0.2);rgba(255,255,255,0.1)" dur="3s" begin="0s" repeatCount="indefinite"/>
                </rect>
                <text x="180" y="58" fill="white" font-size="11" text-anchor="middle">25</text>
                <rect x="210" y="40" width="65" height="26" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1">
                    <animate attributeName="fill" values="rgba(255,255,255,0.1);rgba(255,255,255,0.2);rgba(255,255,255,0.1)" dur="3s" begin="0s" repeatCount="indefinite"/>
                </rect>
                <text x="242" y="58" fill="white" font-size="11" text-anchor="middle">50000</text>

                <!-- Row 1 -->
                <rect x="25" y="70" width="50" height="26" fill="rgba(74,144,217,0.3)" stroke="#4a90d9" stroke-width="1.5">
                    <animate attributeName="fill" values="rgba(74,144,217,0.3);rgba(74,144,217,0.5);rgba(74,144,217,0.3)" dur="3s" begin="0.3s" repeatCount="indefinite"/>
                </rect>
                <text x="50" y="88" fill="#4a90d9" font-size="11" text-anchor="middle" font-weight="bold">1</text>
                <rect x="80" y="70" width="70" height="26" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1">
                    <animate attributeName="fill" values="rgba(255,255,255,0.1);rgba(255,255,255,0.2);rgba(255,255,255,0.1)" dur="3s" begin="0.3s" repeatCount="indefinite"/>
                </rect>
                <text x="115" y="88" fill="white" font-size="11" text-anchor="middle">Bob</text>
                <rect x="155" y="70" width="50" height="26" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1">
                    <animate attributeName="fill" values="rgba(255,255,255,0.1);rgba(255,255,255,0.2);rgba(255,255,255,0.1)" dur="3s" begin="0.3s" repeatCount="indefinite"/>
                </rect>
                <text x="180" y="88" fill="white" font-size="11" text-anchor="middle">30</text>
                <rect x="210" y="70" width="65" height="26" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1">
                    <animate attributeName="fill" values="rgba(255,255,255,0.1);rgba(255,255,255,0.2);rgba(255,255,255,0.1)" dur="3s" begin="0.3s" repeatCount="indefinite"/>
                </rect>
                <text x="242" y="88" fill="white" font-size="11" text-anchor="middle">60000</text>

                <!-- Row 2 -->
                <rect x="25" y="100" width="50" height="26" fill="rgba(74,144,217,0.3)" stroke="#4a90d9" stroke-width="1.5">
                    <animate attributeName="fill" values="rgba(74,144,217,0.3);rgba(74,144,217,0.5);rgba(74,144,217,0.3)" dur="3s" begin="0.6s" repeatCount="indefinite"/>
                </rect>
                <text x="50" y="118" fill="#4a90d9" font-size="11" text-anchor="middle" font-weight="bold">2</text>
                <rect x="80" y="100" width="70" height="26" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1">
                    <animate attributeName="fill" values="rgba(255,255,255,0.1);rgba(255,255,255,0.2);rgba(255,255,255,0.1)" dur="3s" begin="0.6s" repeatCount="indefinite"/>
                </rect>
                <text x="115" y="118" fill="white" font-size="11" text-anchor="middle">Charlie</text>
                <rect x="155" y="100" width="50" height="26" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1">
                    <animate attributeName="fill" values="rgba(255,255,255,0.1);rgba(255,255,255,0.2);rgba(255,255,255,0.1)" dur="3s" begin="0.6s" repeatCount="indefinite"/>
                </rect>
                <text x="180" y="118" fill="white" font-size="11" text-anchor="middle">35</text>
                <rect x="210" y="100" width="65" height="26" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1">
                    <animate attributeName="fill" values="rgba(255,255,255,0.1);rgba(255,255,255,0.2);rgba(255,255,255,0.1)" dur="3s" begin="0.6s" repeatCount="indefinite"/>
                </rect>
                <text x="242" y="118" fill="white" font-size="11" text-anchor="middle">70000</text>

                <!-- Labels -->
                <text x="50" y="145" fill="#4a90d9" font-size="9" text-anchor="middle">Index</text>
                <text x="50" y="158" fill="rgba(255,255,255,0.7)" font-size="8" text-anchor="middle">(row labels)</text>

                <text x="180" y="145" fill="#c5d45a" font-size="9" text-anchor="middle">Columns</text>
                <text x="180" y="158" fill="rgba(255,255,255,0.7)" font-size="8" text-anchor="middle">(column labels)</text>

                <!-- Series highlight -->
                <rect x="155" y="40" width="50" height="86" fill="none" stroke="#ff6b6b" stroke-width="2" stroke-dasharray="4,2" opacity="0">
                    <animate attributeName="opacity" values="0;0;0.8;0.8;0" dur="5s" repeatCount="indefinite" keyTimes="0;0.5;0.6;0.85;1"/>
                </rect>
                <text x="180" y="175" fill="#ff6b6b" font-size="9" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;0;1;1;0" dur="5s" repeatCount="indefinite" keyTimes="0;0.5;0.6;0.85;1"/>
                    Series: df['age']
                </text>
                <text x="180" y="188" fill="rgba(255,255,255,0.7)" font-size="8" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;0;1;1;0" dur="5s" repeatCount="indefinite" keyTimes="0;0.5;0.6;0.85;1"/>
                    (single column)
                </text>
            </svg>
        </div>
    </div>
    <div class="highlight" style="margin-top: 20px;">
        <p><strong>80% of a data scientist's time</strong> is spent preparing data. Pandas makes this manageable!</p>
    </div>
</div>

<!-- Slide 15: Pandas - Data Manipulation -->
<div class="slide" id="slide17">
    <span class="slide-number">17</span>
    <h2>Pandas - Data Manipulation</h2>
    <p>Pandas makes working with structured data intuitive</p>
    <div class="code-table">
        <div class="code-table-header">Python: Pandas DataFrames</div>
        <div class="code-table-content">
            <code>import pandas as pd

# Create a DataFrame
df = pd.DataFrame({
    'name': ['Alice', 'Bob', 'Charlie'],
    'age': [25, 30, 35],
    'salary': [50000, 60000, 70000]
})

# Common operations
df['age'].mean()              # Average age: 30
df[df['salary'] > 55000]      # Filter rows
df.groupby('age').mean()      # Group and aggregate

# Load data from files
df = pd.read_csv('data.csv')
df = pd.read_json('data.json')</code>
        </div>
    </div>
</div>

<!-- Slide 15: Pandas Data Cleaning -->
<div class="slide" id="slide18">
    <span class="slide-number">18</span>
    <h2>Pandas - Data Cleaning</h2>
    <p>Real-world data is messy. Pandas makes cleaning it manageable.</p>
    <div class="code-table">
        <div class="code-table-header">Handling Missing Data & Duplicates</div>
        <div class="code-table-content">
            <code>import pandas as pd

# Check for missing values
df.isnull().sum()           # Count nulls per column
df.info()                   # Overview of data types & nulls

# Handle missing values
df.dropna()                 # Remove rows with any null
df.dropna(subset=['age'])   # Remove rows where 'age' is null
df.fillna(0)                # Replace nulls with 0
df['age'].fillna(df['age'].mean())  # Fill with mean

# Handle duplicates
df.duplicated().sum()       # Count duplicates
df.drop_duplicates()        # Remove duplicate rows

# Data type conversion
df['age'] = df['age'].astype(int)
df['date'] = pd.to_datetime(df['date'])</code>
        </div>
    </div>
</div>

<!-- Slide 14: Pandas Merging -->
<div class="slide" id="slide19">
    <span class="slide-number">19</span>
    <h2>Pandas - Merging & Joining</h2>
    <p>Combine data from multiple sources - essential for real ML projects</p>
    <div class="two-column">
        <div class="code-table">
            <div class="code-table-header">Combining DataFrames</div>
            <div class="code-table-content">
                <code>import pandas as pd

# Merge on a key (like SQL JOIN)
users = pd.DataFrame({
    'user_id': [1, 2, 3],
    'name': ['Alice', 'Bob', 'Charlie']
})
orders = pd.DataFrame({
    'user_id': [1, 1, 2],
    'product': ['A', 'B', 'C']
})

merged = pd.merge(users, orders,
                  on='user_id')
# Inner join by default

merged = pd.merge(users, orders,
                  on='user_id', how='left')
# Left join: keep all users</code>
            </div>
        </div>
        <div class="card" style="text-align: center;">
            <h4>Merge Animation (Inner Join)</h4>
            <svg viewBox="0 0 360 240" style="width: 100%; max-width: 600px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Users table -->
                <text x="70" y="18" fill="#4a90d9" font-size="10" text-anchor="middle" font-weight="bold">users</text>
                <rect x="20" y="25" width="45" height="18" fill="rgba(197,212,90,0.3)" stroke="#c5d45a" stroke-width="1.5"/>
                <text x="42" y="37" fill="#c5d45a" font-size="9" text-anchor="middle">user_id</text>
                <rect x="70" y="25" width="45" height="18" fill="rgba(197,212,90,0.3)" stroke="#c5d45a" stroke-width="1.5"/>
                <text x="92" y="37" fill="#c5d45a" font-size="9" text-anchor="middle">name</text>

                <!-- Users data -->
                <rect x="20" y="47" width="45" height="18" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="1">
                    <animate attributeName="fill" values="rgba(81,207,102,0.3);rgba(81,207,102,0.6);rgba(81,207,102,0.3)" dur="6s" begin="0.5s" repeatCount="indefinite" keyTimes="0;0.1;0.2"/>
                </rect>
                <text x="42" y="59" fill="white" font-size="9" text-anchor="middle">1</text>
                <rect x="70" y="47" width="45" height="18" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <text x="92" y="59" fill="white" font-size="9" text-anchor="middle">Alice</text>

                <rect x="20" y="68" width="45" height="18" fill="rgba(74,144,217,0.3)" stroke="#4a90d9" stroke-width="1">
                    <animate attributeName="fill" values="rgba(74,144,217,0.3);rgba(74,144,217,0.6);rgba(74,144,217,0.3)" dur="6s" begin="1.5s" repeatCount="indefinite" keyTimes="0;0.1;0.2"/>
                </rect>
                <text x="42" y="80" fill="white" font-size="9" text-anchor="middle">2</text>
                <rect x="70" y="68" width="45" height="18" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <text x="92" y="80" fill="white" font-size="9" text-anchor="middle">Bob</text>

                <rect x="20" y="89" width="45" height="18" fill="rgba(255,107,107,0.3)" stroke="#ff6b6b" stroke-width="1"/>
                <text x="42" y="101" fill="white" font-size="9" text-anchor="middle">3</text>
                <rect x="70" y="89" width="45" height="18" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <text x="92" y="101" fill="white" font-size="9" text-anchor="middle">Charlie</text>

                <!-- Orders table -->
                <text x="200" y="18" fill="#ff6b6b" font-size="10" text-anchor="middle" font-weight="bold">orders</text>
                <rect x="150" y="25" width="45" height="18" fill="rgba(197,212,90,0.3)" stroke="#c5d45a" stroke-width="1.5"/>
                <text x="172" y="37" fill="#c5d45a" font-size="9" text-anchor="middle">user_id</text>
                <rect x="200" y="25" width="50" height="18" fill="rgba(197,212,90,0.3)" stroke="#c5d45a" stroke-width="1.5"/>
                <text x="225" y="37" fill="#c5d45a" font-size="9" text-anchor="middle">product</text>

                <!-- Orders data -->
                <rect x="150" y="47" width="45" height="18" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="1">
                    <animate attributeName="fill" values="rgba(81,207,102,0.3);rgba(81,207,102,0.6);rgba(81,207,102,0.3)" dur="6s" begin="0.5s" repeatCount="indefinite" keyTimes="0;0.1;0.2"/>
                </rect>
                <text x="172" y="59" fill="white" font-size="9" text-anchor="middle">1</text>
                <rect x="200" y="47" width="50" height="18" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <text x="225" y="59" fill="white" font-size="9" text-anchor="middle">A</text>

                <rect x="150" y="68" width="45" height="18" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="1">
                    <animate attributeName="fill" values="rgba(81,207,102,0.3);rgba(81,207,102,0.6);rgba(81,207,102,0.3)" dur="6s" begin="0.8s" repeatCount="indefinite" keyTimes="0;0.1;0.2"/>
                </rect>
                <text x="172" y="80" fill="white" font-size="9" text-anchor="middle">1</text>
                <rect x="200" y="68" width="50" height="18" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <text x="225" y="80" fill="white" font-size="9" text-anchor="middle">B</text>

                <rect x="150" y="89" width="45" height="18" fill="rgba(74,144,217,0.3)" stroke="#4a90d9" stroke-width="1">
                    <animate attributeName="fill" values="rgba(74,144,217,0.3);rgba(74,144,217,0.6);rgba(74,144,217,0.3)" dur="6s" begin="1.5s" repeatCount="indefinite" keyTimes="0;0.1;0.2"/>
                </rect>
                <text x="172" y="101" fill="white" font-size="9" text-anchor="middle">2</text>
                <rect x="200" y="89" width="50" height="18" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <text x="225" y="101" fill="white" font-size="9" text-anchor="middle">C</text>

                <!-- Merge arrow -->
                <path d="M 130 70 Q 140 130 180 130" fill="none" stroke="#ffd700" stroke-width="2" stroke-dasharray="100" stroke-dashoffset="100">
                    <animate attributeName="stroke-dashoffset" values="100;0;0" dur="6s" repeatCount="indefinite" keyTimes="0;0.25;1"/>
                </path>
                <text x="155" y="125" fill="#ffd700" font-size="10" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.2;0.3;1"/>
                    merge
                </text>

                <!-- Result table -->
                <text x="180" y="155" fill="#ffd700" font-size="10" text-anchor="middle" font-weight="bold" opacity="0">
                    <animate attributeName="opacity" values="0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.3;0.4;1"/>
                    merged (inner join)
                </text>
                <!-- Headers -->
                <rect x="60" y="162" width="40" height="16" fill="rgba(197,212,90,0.3)" stroke="#c5d45a" stroke-width="1.5" opacity="0">
                    <animate attributeName="opacity" values="0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.3;0.4;1"/>
                </rect>
                <text x="80" y="173" fill="#c5d45a" font-size="8" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.3;0.4;1"/>
                    user_id
                </text>
                <rect x="105" y="162" width="50" height="16" fill="rgba(197,212,90,0.3)" stroke="#c5d45a" stroke-width="1.5" opacity="0">
                    <animate attributeName="opacity" values="0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.3;0.4;1"/>
                </rect>
                <text x="130" y="173" fill="#c5d45a" font-size="8" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.3;0.4;1"/>
                    name
                </text>
                <rect x="160" y="162" width="50" height="16" fill="rgba(197,212,90,0.3)" stroke="#c5d45a" stroke-width="1.5" opacity="0">
                    <animate attributeName="opacity" values="0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.3;0.4;1"/>
                </rect>
                <text x="185" y="173" fill="#c5d45a" font-size="8" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.3;0.4;1"/>
                    product
                </text>

                <!-- Result rows -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.35;0.45;0.55;1"/>
                    <rect x="60" y="181" width="40" height="16" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="1"/>
                    <text x="80" y="192" fill="white" font-size="8" text-anchor="middle">1</text>
                    <rect x="105" y="181" width="50" height="16" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                    <text x="130" y="192" fill="white" font-size="8" text-anchor="middle">Alice</text>
                    <rect x="160" y="181" width="50" height="16" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                    <text x="185" y="192" fill="white" font-size="8" text-anchor="middle">A</text>
                </g>

                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.45;0.5;0.55;0.65;1"/>
                    <rect x="60" y="200" width="40" height="16" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="1"/>
                    <text x="80" y="211" fill="white" font-size="8" text-anchor="middle">1</text>
                    <rect x="105" y="200" width="50" height="16" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                    <text x="130" y="211" fill="white" font-size="8" text-anchor="middle">Alice</text>
                    <rect x="160" y="200" width="50" height="16" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                    <text x="185" y="211" fill="white" font-size="8" text-anchor="middle">B</text>
                </g>

                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.55;0.6;0.65;0.7;0.75;1"/>
                    <rect x="60" y="219" width="40" height="16" fill="rgba(74,144,217,0.3)" stroke="#4a90d9" stroke-width="1"/>
                    <text x="80" y="230" fill="white" font-size="8" text-anchor="middle">2</text>
                    <rect x="105" y="219" width="50" height="16" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                    <text x="130" y="230" fill="white" font-size="8" text-anchor="middle">Bob</text>
                    <rect x="160" y="219" width="50" height="16" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                    <text x="185" y="230" fill="white" font-size="8" text-anchor="middle">C</text>
                </g>

                <!-- Note about Charlie -->
                <text x="290" y="100" fill="#ff6b6b" font-size="8" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.6;0.65;0.7;0.75;0.8;0.85;1"/>
                    Charlie (id=3)
                </text>
                <text x="290" y="112" fill="#ff6b6b" font-size="8" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.6;0.65;0.7;0.75;0.8;0.85;1"/>
                    not in result
                </text>
                <text x="290" y="124" fill="rgba(255,255,255,0.6)" font-size="7" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.6;0.65;0.7;0.75;0.8;0.85;1"/>
                    (no matching order)
                </text>
            </svg>
        </div>
    </div>
</div>

<!-- Slide 15: Matplotlib -->
<div class="slide" id="slide20">
    <span class="slide-number">20</span>
    <h2>Matplotlib - Visualization</h2>
    <p>Visualizing data is crucial for understanding and debugging ML models</p>
    <div class="two-column">
        <div class="code-table" style="margin: 0;">
            <div class="code-table-header">Python: Training Loss Plot</div>
            <div class="code-table-content">
                <code>import matplotlib.pyplot as plt

epochs = range(1, 11)
loss = [0.9, 0.65, 0.45, 0.32,
        0.24, 0.18, 0.14, 0.11,
        0.09, 0.08]

plt.figure(figsize=(8, 5))
plt.plot(epochs, loss, 'b-o',
         linewidth=2, label='Training Loss')
plt.xlabel('Epoch')
plt.ylabel('Loss')
plt.title('Model Training Progress')
plt.legend()
plt.grid(True, alpha=0.3)
plt.show()</code>
            </div>
        </div>
        <div class="card" style="padding: 15px; background: #1a1a2e;">
            <h4 style="text-align: center; margin-bottom: 10px;">Output:</h4>
            <svg viewBox="0 0 320 200" style="width: 100%; background: #252540; border-radius: 8px;">
                <!-- Grid lines -->
                <g stroke="#444" stroke-width="0.5">
                    <line x1="50" y1="30" x2="50" y2="170"/>
                    <line x1="50" y1="170" x2="300" y2="170"/>
                    <line x1="50" y1="58" x2="300" y2="58" stroke-dasharray="3,3" opacity="0.3"/>
                    <line x1="50" y1="86" x2="300" y2="86" stroke-dasharray="3,3" opacity="0.3"/>
                    <line x1="50" y1="114" x2="300" y2="114" stroke-dasharray="3,3" opacity="0.3"/>
                    <line x1="50" y1="142" x2="300" y2="142" stroke-dasharray="3,3" opacity="0.3"/>
                </g>
                <!-- Axis labels -->
                <text x="175" y="195" fill="#aaa" font-size="12" text-anchor="middle">Epoch</text>
                <text x="15" y="100" fill="#aaa" font-size="12" text-anchor="middle" transform="rotate(-90, 15, 100)">Loss</text>
                <!-- Title -->
                <text x="175" y="20" fill="#fff" font-size="14" text-anchor="middle" font-weight="bold">Model Training Progress</text>
                <!-- Y-axis tick labels -->
                <text x="45" y="34" fill="#aaa" font-size="12" text-anchor="end">1.0</text>
                <text x="45" y="62" fill="#aaa" font-size="12" text-anchor="end">0.8</text>
                <text x="45" y="90" fill="#aaa" font-size="12" text-anchor="end">0.6</text>
                <text x="45" y="118" fill="#aaa" font-size="12" text-anchor="end">0.4</text>
                <text x="45" y="146" fill="#aaa" font-size="12" text-anchor="end">0.2</text>
                <text x="45" y="174" fill="#aaa" font-size="12" text-anchor="end">0.0</text>
                <!-- X-axis tick labels -->
                <text x="77" y="183" fill="#aaa" font-size="12" text-anchor="middle">2</text>
                <text x="127" y="183" fill="#aaa" font-size="12" text-anchor="middle">4</text>
                <text x="177" y="183" fill="#aaa" font-size="12" text-anchor="middle">6</text>
                <text x="227" y="183" fill="#aaa" font-size="12" text-anchor="middle">8</text>
                <text x="277" y="183" fill="#aaa" font-size="12" text-anchor="middle">10</text>
                <!-- Line plot: loss = [0.9, 0.65, 0.45, 0.32, 0.24, 0.18, 0.14, 0.11, 0.09, 0.08] -->
                <!-- Y scale: 0->170, 1.0->30, so y = 170 - (value * 140) -->
                <polyline fill="none" stroke="#4a9eff" stroke-width="2.5"
                    points="52,44 77,79 102,107 127,125 152,136 177,145 202,150 227,155 252,157 277,159"/>
                <!-- Data points -->
                <g fill="#4a9eff">
                    <circle cx="52" cy="44" r="4"/>
                    <circle cx="77" cy="79" r="4"/>
                    <circle cx="102" cy="107" r="4"/>
                    <circle cx="127" cy="125" r="4"/>
                    <circle cx="152" cy="136" r="4"/>
                    <circle cx="177" cy="145" r="4"/>
                    <circle cx="202" cy="150" r="4"/>
                    <circle cx="227" cy="155" r="4"/>
                    <circle cx="252" cy="157" r="4"/>
                    <circle cx="277" cy="159" r="4"/>
                </g>
                <!-- Legend -->
                <rect x="200" y="35" width="90" height="20" fill="#252540" stroke="#555" rx="3"/>
                <line x1="205" y1="45" x2="225" y2="45" stroke="#4a9eff" stroke-width="2"/>
                <circle cx="215" cy="45" r="3" fill="#4a9eff"/>
                <text x="230" y="49" fill="#ccc" font-size="12">Training Loss</text>
            </svg>
        </div>
    </div>
</div>

<!-- Slide 16: What is Machine Learning? -->
<div class="slide" id="slide21">
    <span class="slide-number">21</span>
    <h2>Module 2: What is Machine Learning?</h2>
    <div class="highlight">
        <p style="font-size: 1.4em;"><strong>Machine Learning:</strong> Teaching computers to learn patterns from data, rather than explicitly programming rules.</p>
    </div>
    <div class="two-column" style="margin-top: 30px;">
        <div class="card">
            <h4>Traditional Programming</h4>
            <div class="diagram">
                <p>Rules + Data → Program → Output</p>
            </div>
            <p>You write the rules explicitly</p>
        </div>
        <div class="card">
            <h4>Machine Learning</h4>
            <div class="diagram">
                <p>Data + Output → ML → Rules</p>
            </div>
            <p>The algorithm discovers the rules</p>
        </div>
    </div>
</div>

<!-- Slide 17: Types of Machine Learning -->
<div class="slide" id="slide22">
    <span class="slide-number">22</span>
    <h2>Types of Machine Learning</h2>
    <div class="three-column">
        <div class="card">
            <h4>Supervised Learning</h4>
            <p>Learn from labeled examples</p>
            <ul style="font-size: 0.9em; margin-left: 15px;">
                <li>Classification (spam/not spam)</li>
                <li>Regression (price prediction)</li>
            </ul>
            <p style="margin-top: 10px; font-size: 0.9em;"><em>You provide: inputs + correct answers</em></p>
        </div>
        <div class="card">
            <h4>Unsupervised Learning</h4>
            <p>Find patterns in unlabeled data</p>
            <ul style="font-size: 0.9em; margin-left: 15px;">
                <li>Clustering (customer segments)</li>
                <li>Dimensionality reduction</li>
            </ul>
            <p style="margin-top: 10px; font-size: 0.9em;"><em>You provide: inputs only</em></p>
        </div>
        <div class="card">
            <h4>Reinforcement Learning</h4>
            <p>Learn through trial and error</p>
            <ul style="font-size: 0.9em; margin-left: 15px;">
                <li>Game playing</li>
                <li>Robotics</li>
            </ul>
            <p style="margin-top: 10px; font-size: 0.9em;"><em>Agent learns from rewards</em></p>
        </div>
    </div>
</div>

<!-- Slide 18: ML Workflow -->
<div class="slide" id="slide23">
    <span class="slide-number">23</span>
    <h2>The ML Workflow</h2>
    <div class="diagram" style="font-size: 1.2em;">
        <p>1. Collect Data → 2. Prepare Data → 3. Choose Model → 4. Train → 5. Evaluate → 6. Deploy</p>
    </div>
    <div class="two-column" style="margin-top: 30px;">
        <div>
            <h3>Data Preparation (80% of work!)</h3>
            <ul>
                <li>Clean missing values</li>
                <li>Handle outliers</li>
                <li>Normalize/scale features</li>
                <li>Split into train/test sets</li>
            </ul>
        </div>
        <div>
            <h3>Model Training</h3>
            <ul>
                <li>Feed training data to model</li>
                <li>Model learns patterns</li>
                <li>Adjust parameters to minimize error</li>
                <li>Validate on held-out data</li>
            </ul>
        </div>
    </div>
</div>

<!-- Slide 19: Linear Regression -->
<div class="slide" id="slide24">
    <span class="slide-number">24</span>
    <h2>Module 3: Linear Regression</h2>
    <p>The simplest ML algorithm - find the best-fit line through data</p>
    <div class="formula">
        $$y = mx + b \quad \text{or} \quad y = w_1x_1 + w_2x_2 + \cdots + b$$
    </div>
    <div class="code-table">
        <div class="code-table-header">Python: Linear Regression with scikit-learn</div>
        <div class="code-table-content">
            <code>from sklearn.linear_model import LinearRegression
from sklearn.model_selection import train_test_split

# Split data
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2)

# Create and train model
model = LinearRegression()
model.fit(X_train, y_train)

# Make predictions
predictions = model.predict(X_test)

# Check performance
from sklearn.metrics import mean_squared_error
mse = mean_squared_error(y_test, predictions)</code>
        </div>
    </div>
</div>

<!-- Slide: Regularization Introduction -->
<div class="slide" id="slide24a">
    <span class="slide-number">24a</span>
    <h2>Regularization: Preventing Overfitting</h2>
    <p>Add a penalty term to prevent the model from fitting noise in the training data</p>
    <div class="two-column">
        <div class="card">
            <h4>The Problem: Overfitting</h4>
            <p>When a model learns the training data <em>too well</em>, it captures noise instead of the underlying pattern.</p>
            <ul style="font-size: 0.9em;">
                <li>High training accuracy, low test accuracy</li>
                <li>Model is too complex for the data</li>
                <li>Weights become very large</li>
            </ul>
            <h4 style="margin-top: 15px;">The Solution: Regularization</h4>
            <p style="font-size: 0.9em;">Penalize large weights to keep the model simple:</p>
            <div class="formula" style="font-size: 0.95em;">
                $\text{Loss} = \text{MSE} + \alpha \times \text{Penalty}$
            </div>
        </div>
        <div class="card">
            <h4>Visual: Overfitting vs Regularization</h4>
            <svg viewBox="0 0 320 220" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Underfitting -->
                <g transform="translate(20, 20)">
                    <rect x="0" y="0" width="85" height="85" rx="5" fill="rgba(255,107,107,0.2)" stroke="#ff6b6b"/>
                    <text x="42" y="15" fill="#ff6b6b" font-size="12" text-anchor="middle" font-weight="bold">Underfitting</text>
                    <!-- Simple line that doesn't fit -->
                    <circle cx="20" cy="65" r="4" fill="#4a90d9"/>
                    <circle cx="35" cy="45" r="4" fill="#4a90d9"/>
                    <circle cx="50" cy="55" r="4" fill="#4a90d9"/>
                    <circle cx="65" cy="35" r="4" fill="#4a90d9"/>
                    <line x1="15" y1="60" x2="70" y2="40" stroke="#ff6b6b" stroke-width="2"/>
                </g>

                <!-- Good fit -->
                <g transform="translate(117, 20)">
                    <rect x="0" y="0" width="85" height="85" rx="5" fill="rgba(81,207,102,0.2)" stroke="#51cf66"/>
                    <text x="42" y="15" fill="#51cf66" font-size="12" text-anchor="middle" font-weight="bold">Good Fit</text>
                    <circle cx="20" cy="65" r="4" fill="#4a90d9"/>
                    <circle cx="35" cy="45" r="4" fill="#4a90d9"/>
                    <circle cx="50" cy="55" r="4" fill="#4a90d9"/>
                    <circle cx="65" cy="35" r="4" fill="#4a90d9"/>
                    <path d="M 15 68 Q 35 40 50 52 Q 65 30 75 35" stroke="#51cf66" stroke-width="2" fill="none"/>
                </g>

                <!-- Overfitting -->
                <g transform="translate(214, 20)">
                    <rect x="0" y="0" width="85" height="85" rx="5" fill="rgba(255,215,0,0.2)" stroke="#ffd700"/>
                    <text x="42" y="15" fill="#ffd700" font-size="12" text-anchor="middle" font-weight="bold">Overfitting</text>
                    <circle cx="20" cy="65" r="4" fill="#4a90d9"/>
                    <circle cx="35" cy="45" r="4" fill="#4a90d9"/>
                    <circle cx="50" cy="55" r="4" fill="#4a90d9"/>
                    <circle cx="65" cy="35" r="4" fill="#4a90d9"/>
                    <path d="M 15 70 Q 20 65 20 65 Q 25 30 35 45 Q 40 60 50 55 Q 55 20 65 35 Q 70 45 75 30" stroke="#ffd700" stroke-width="2" fill="none"/>
                </g>

                <!-- Alpha scale -->
                <text x="160" y="125" fill="white" font-size="14" text-anchor="middle" font-weight="bold">The Alpha (α) Hyperparameter</text>

                <rect x="40" y="140" width="240" height="20" rx="4" fill="rgba(255,255,255,0.1)"/>
                <defs>
                    <linearGradient id="alphaGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#ff6b6b"/>
                        <stop offset="50%" style="stop-color:#51cf66"/>
                        <stop offset="100%" style="stop-color:#ffd700"/>
                    </linearGradient>
                </defs>
                <rect x="40" y="140" width="240" height="20" rx="4" fill="url(#alphaGrad)" opacity="0.7"/>

                <text x="40" y="175" fill="#ff6b6b" font-size="12">α = 0</text>
                <text x="130" y="175" fill="#51cf66" font-size="12">α optimal</text>
                <text x="245" y="175" fill="#ffd700" font-size="12">α large</text>

                <text x="40" y="190" fill="white" font-size="12">No penalty</text>
                <text x="120" y="190" fill="white" font-size="12">Balanced</text>
                <text x="225" y="190" fill="white" font-size="12">Heavy penalty</text>

                <text x="40" y="210" fill="rgba(255,255,255,0.7)" font-size="12">(overfit)</text>
                <text x="225" y="210" fill="rgba(255,255,255,0.7)" font-size="12">(underfit)</text>
            </svg>
        </div>
    </div>
</div>

<!-- Slide: Ridge Regression (L2) -->
<div class="slide" id="slide24b">
    <span class="slide-number">24b</span>
    <h2>Ridge Regression (L2 Regularization)</h2>
    <p>Penalizes the <strong>square</strong> of the weights - shrinks coefficients but never to zero</p>
    <div class="two-column">
        <div class="card">
            <h4>The Ridge Loss Function</h4>
            <div class="formula" style="font-size: 0.95em;">
                $\text{Loss} = \sum(y - \hat{y})^2 + \alpha \sum w_i^2$
            </div>
            <p style="font-size: 0.9em; margin-top: 15px;"><strong>L2 Penalty:</strong> Sum of squared weights</p>
            <ul style="font-size: 0.85em;">
                <li>Large weights are penalized heavily (squared!)</li>
                <li>Weights shrink towards zero but never reach it</li>
                <li>All features remain in the model</li>
                <li>Good when all features are relevant</li>
            </ul>

            <div class="code-table" style="margin-top: 15px;">
                <div class="code-table-header">Python: Ridge Regression</div>
                <div class="code-table-content">
                    <code>from sklearn.linear_model import Ridge

# alpha controls regularization strength
model = Ridge(alpha=1.0)
model.fit(X_train, y_train)
predictions = model.predict(X_test)</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>Visual: How L2 Shrinks Weights</h4>
            <svg viewBox="0 0 320 240" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Title -->
                <text x="160" y="20" fill="#c5d45a" font-size="14" text-anchor="middle" font-weight="bold">Ridge: Weights Shrink Proportionally</text>

                <!-- Original weights bar chart -->
                <text x="80" y="45" fill="white" font-size="12" text-anchor="middle">Original Weights</text>
                <rect x="30" y="55" width="20" height="60" fill="#4a90d9"/>
                <rect x="55" y="75" width="20" height="40" fill="#4a90d9"/>
                <rect x="80" y="50" width="20" height="65" fill="#4a90d9"/>
                <rect x="105" y="90" width="20" height="25" fill="#4a90d9"/>
                <text x="40" y="125" fill="white" font-size="12" text-anchor="middle">w₁</text>
                <text x="65" y="125" fill="white" font-size="12" text-anchor="middle">w₂</text>
                <text x="90" y="125" fill="white" font-size="12" text-anchor="middle">w₃</text>
                <text x="115" y="125" fill="white" font-size="12" text-anchor="middle">w₄</text>

                <!-- Arrow -->
                <path d="M 145 85 L 175 85" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>
                <text x="160" y="75" fill="#ffd700" font-size="12" text-anchor="middle">L2</text>

                <!-- Ridge weights bar chart -->
                <text x="240" y="45" fill="#51cf66" font-size="12" text-anchor="middle">After Ridge</text>
                <rect x="190" y="75" width="20" height="40" fill="#51cf66"/>
                <rect x="215" y="85" width="20" height="30" fill="#51cf66"/>
                <rect x="240" y="72" width="20" height="43" fill="#51cf66"/>
                <rect x="265" y="95" width="20" height="20" fill="#51cf66"/>
                <text x="200" y="125" fill="white" font-size="12" text-anchor="middle">w₁</text>
                <text x="225" y="125" fill="white" font-size="12" text-anchor="middle">w₂</text>
                <text x="250" y="125" fill="white" font-size="12" text-anchor="middle">w₃</text>
                <text x="275" y="125" fill="white" font-size="12" text-anchor="middle">w₄</text>

                <!-- L2 constraint circle visualization -->
                <text x="160" y="150" fill="white" font-size="12" text-anchor="middle" font-weight="bold">L2 Constraint Region</text>

                <g transform="translate(100, 160)">
                    <!-- Axes -->
                    <line x1="60" y1="0" x2="60" y2="70" stroke="rgba(255,255,255,0.5)"/>
                    <line x1="0" y1="35" x2="120" y2="35" stroke="rgba(255,255,255,0.5)"/>
                    <text x="60" y="-5" fill="white" font-size="12" text-anchor="middle">w₂</text>
                    <text x="125" y="38" fill="white" font-size="12">w₁</text>

                    <!-- L2 circle constraint -->
                    <circle cx="60" cy="35" r="30" fill="rgba(81,207,102,0.2)" stroke="#51cf66" stroke-width="2"/>

                    <!-- Optimal point on circle -->
                    <circle cx="80" cy="20" r="5" fill="#ffd700"/>
                    <text x="90" y="15" fill="#ffd700" font-size="12">optimal</text>

                    <!-- Note -->
                    <text x="60" y="80" fill="rgba(255,255,255,0.8)" font-size="12" text-anchor="middle">Circle = all weights shrink</text>
                </g>
            </svg>
        </div>
    </div>
</div>

<!-- Slide: Lasso Regression (L1) -->
<div class="slide" id="slide24c">
    <span class="slide-number">24c</span>
    <h2>Lasso Regression (L1 Regularization)</h2>
    <p>Penalizes the <strong>absolute value</strong> of weights - can shrink coefficients to exactly zero</p>
    <div class="two-column">
        <div class="card">
            <h4>The Lasso Loss Function</h4>
            <div class="formula" style="font-size: 0.95em;">
                $\text{Loss} = \sum(y - \hat{y})^2 + \alpha \sum |w_i|$
            </div>
            <p style="font-size: 0.9em; margin-top: 15px;"><strong>L1 Penalty:</strong> Sum of absolute weights</p>
            <ul style="font-size: 0.85em;">
                <li>Can shrink weights exactly to zero</li>
                <li>Performs <strong>feature selection</strong> automatically</li>
                <li>Produces sparse models (fewer features)</li>
                <li>Good when many features are irrelevant</li>
            </ul>

            <div class="code-table" style="margin-top: 15px;">
                <div class="code-table-header">Python: Lasso Regression</div>
                <div class="code-table-content">
                    <code>from sklearn.linear_model import Lasso

# alpha controls regularization strength
model = Lasso(alpha=0.1)
model.fit(X_train, y_train)

# Check which features were selected
print(model.coef_)  # Some will be 0!</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>Visual: How L1 Eliminates Features</h4>
            <svg viewBox="0 0 320 240" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Title -->
                <text x="160" y="20" fill="#c5d45a" font-size="14" text-anchor="middle" font-weight="bold">Lasso: Some Weights Become Zero</text>

                <!-- Original weights bar chart -->
                <text x="80" y="45" fill="white" font-size="12" text-anchor="middle">Original Weights</text>
                <rect x="30" y="55" width="20" height="60" fill="#4a90d9"/>
                <rect x="55" y="75" width="20" height="40" fill="#4a90d9"/>
                <rect x="80" y="50" width="20" height="65" fill="#4a90d9"/>
                <rect x="105" y="90" width="20" height="25" fill="#4a90d9"/>
                <text x="40" y="125" fill="white" font-size="12" text-anchor="middle">w₁</text>
                <text x="65" y="125" fill="white" font-size="12" text-anchor="middle">w₂</text>
                <text x="90" y="125" fill="white" font-size="12" text-anchor="middle">w₃</text>
                <text x="115" y="125" fill="white" font-size="12" text-anchor="middle">w₄</text>

                <!-- Arrow -->
                <path d="M 145 85 L 175 85" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>
                <text x="160" y="75" fill="#ffd700" font-size="12" text-anchor="middle">L1</text>

                <!-- Lasso weights bar chart -->
                <text x="240" y="45" fill="#ff6b6b" font-size="12" text-anchor="middle">After Lasso</text>
                <rect x="190" y="70" width="20" height="45" fill="#ff6b6b"/>
                <rect x="215" y="115" width="20" height="0" fill="#666" stroke="#ff6b6b" stroke-dasharray="2"/>
                <text x="225" y="110" fill="#ff6b6b" font-size="12" text-anchor="middle">0</text>
                <rect x="240" y="65" width="20" height="50" fill="#ff6b6b"/>
                <rect x="265" y="115" width="20" height="0" fill="#666" stroke="#ff6b6b" stroke-dasharray="2"/>
                <text x="275" y="110" fill="#ff6b6b" font-size="12" text-anchor="middle">0</text>
                <text x="200" y="125" fill="white" font-size="12" text-anchor="middle">w₁</text>
                <text x="225" y="125" fill="white" font-size="12" text-anchor="middle">w₂</text>
                <text x="250" y="125" fill="white" font-size="12" text-anchor="middle">w₃</text>
                <text x="275" y="125" fill="white" font-size="12" text-anchor="middle">w₄</text>

                <!-- L1 constraint diamond visualization -->
                <text x="160" y="150" fill="white" font-size="12" text-anchor="middle" font-weight="bold">L1 Constraint Region</text>

                <g transform="translate(100, 160)">
                    <!-- Axes -->
                    <line x1="60" y1="0" x2="60" y2="70" stroke="rgba(255,255,255,0.5)"/>
                    <line x1="0" y1="35" x2="120" y2="35" stroke="rgba(255,255,255,0.5)"/>
                    <text x="60" y="-5" fill="white" font-size="12" text-anchor="middle">w₂</text>
                    <text x="125" y="38" fill="white" font-size="12">w₁</text>

                    <!-- L1 diamond constraint -->
                    <polygon points="60,5 90,35 60,65 30,35" fill="rgba(255,107,107,0.2)" stroke="#ff6b6b" stroke-width="2"/>

                    <!-- Optimal point on corner (sparse!) -->
                    <circle cx="90" cy="35" r="5" fill="#ffd700"/>
                    <text x="100" y="32" fill="#ffd700" font-size="12">optimal</text>
                    <text x="100" y="44" fill="#ffd700" font-size="12">(w₂=0)</text>

                    <!-- Note -->
                    <text x="60" y="80" fill="rgba(255,255,255,0.8)" font-size="12" text-anchor="middle">Diamond corners = sparse!</text>
                </g>
            </svg>
        </div>
    </div>
</div>

<!-- Slide: Ridge vs Lasso Comparison -->
<div class="slide" id="slide24d">
    <span class="slide-number">24d</span>
    <h2>Ridge vs Lasso: When to Use Which?</h2>
    <p>Choosing the right regularization for your problem</p>
    <div style="display: flex; justify-content: center; margin: 15px 0;">
        <svg viewBox="0 0 750 280" style="width: 95%; max-width: 950px;">
            <!-- Ridge Section -->
            <rect x="30" y="20" width="330" height="240" rx="10" fill="rgba(81,207,102,0.1)" stroke="#51cf66" stroke-width="2"/>
            <text x="195" y="50" fill="#51cf66" font-size="14" text-anchor="middle" font-weight="bold">Ridge (L2)</text>

            <text x="50" y="80" fill="white" font-size="14">Penalty: α × Σw²</text>
            <text x="50" y="105" fill="white" font-size="14">Effect: Shrinks all weights</text>
            <text x="50" y="130" fill="white" font-size="14">Sparsity: No (keeps all features)</text>

            <text x="50" y="165" fill="#51cf66" font-size="14" font-weight="bold">Best when:</text>
            <text x="50" y="185" fill="white" font-size="12">• Many features, all somewhat relevant</text>
            <text x="50" y="202" fill="white" font-size="12">• Multicollinearity (correlated features)</text>
            <text x="50" y="219" fill="white" font-size="12">• Don't need feature selection</text>
            <text x="50" y="236" fill="white" font-size="12">• Want stable predictions</text>

            <!-- Circle icon -->
            <circle cx="300" cy="180" r="40" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="3"/>
            <text x="300" y="185" fill="#51cf66" font-size="14" text-anchor="middle">L2</text>

            <!-- VS -->
            <text x="375" y="145" fill="#ffd700" font-size="20" text-anchor="middle" font-weight="bold">VS</text>

            <!-- Lasso Section -->
            <rect x="390" y="20" width="330" height="240" rx="10" fill="rgba(255,107,107,0.1)" stroke="#ff6b6b" stroke-width="2"/>
            <text x="555" y="50" fill="#ff6b6b" font-size="14" text-anchor="middle" font-weight="bold">Lasso (L1)</text>

            <text x="410" y="80" fill="white" font-size="14">Penalty: α × Σ|w|</text>
            <text x="410" y="105" fill="white" font-size="14">Effect: Shrinks some to zero</text>
            <text x="410" y="130" fill="white" font-size="14">Sparsity: Yes (removes features)</text>

            <text x="410" y="165" fill="#ff6b6b" font-size="14" font-weight="bold">Best when:</text>
            <text x="410" y="185" fill="white" font-size="12">• Many features, few are relevant</text>
            <text x="410" y="202" fill="white" font-size="12">• Need automatic feature selection</text>
            <text x="410" y="219" fill="white" font-size="12">• Want interpretable sparse model</text>
            <text x="410" y="236" fill="white" font-size="12">• Have high-dimensional data</text>

            <!-- Diamond icon -->
            <polygon points="660,140 700,180 660,220 620,180" fill="rgba(255,107,107,0.3)" stroke="#ff6b6b" stroke-width="3"/>
            <text x="660" y="185" fill="#ff6b6b" font-size="14" text-anchor="middle">L1</text>
        </svg>
    </div>
    <div class="highlight" style="margin-top: 10px;">
        <p><strong>Elastic Net:</strong> Combines both L1 and L2 penalties! Use when you want the best of both worlds: <code>ElasticNet(alpha=1.0, l1_ratio=0.5)</code></p>
    </div>
</div>

<!-- Slide: Regularization Effect Visualization -->
<div class="slide" id="slide24e">
    <span class="slide-number">24e</span>
    <h2>Regularization in Action: Coefficient Paths</h2>
    <p>How weights change as regularization strength (α) increases</p>
    <div class="two-column">
        <div class="card">
            <h4>Ridge Coefficient Path</h4>
            <svg viewBox="0 0 300 200" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Axes -->
                <line x1="40" y1="170" x2="280" y2="170" stroke="white" stroke-width="2"/>
                <line x1="40" y1="170" x2="40" y2="20" stroke="white" stroke-width="2"/>
                <text x="160" y="195" fill="white" font-size="12" text-anchor="middle">α (regularization strength) →</text>
                <text x="25" y="95" fill="white" font-size="12" text-anchor="middle" transform="rotate(-90, 25, 95)">Coefficient value</text>

                <!-- Zero line -->
                <line x1="40" y1="100" x2="280" y2="100" stroke="rgba(255,255,255,0.3)" stroke-dasharray="4"/>
                <text x="35" y="103" fill="white" font-size="12" text-anchor="end">0</text>

                <!-- Ridge paths - all converge to but never reach 0 -->
                <path d="M 50 40 Q 100 50 150 70 Q 200 85 270 95" stroke="#51cf66" stroke-width="2" fill="none"/>
                <path d="M 50 60 Q 100 70 150 80 Q 200 88 270 97" stroke="#4a90d9" stroke-width="2" fill="none"/>
                <path d="M 50 140 Q 100 135 150 120 Q 200 110 270 103" stroke="#ff6b6b" stroke-width="2" fill="none"/>
                <path d="M 50 160 Q 100 150 150 130 Q 200 115 270 105" stroke="#ffd700" stroke-width="2" fill="none"/>

                <!-- Labels -->
                <text x="55" y="35" fill="#51cf66" font-size="12">w₁</text>
                <text x="55" y="55" fill="#4a90d9" font-size="12">w₂</text>
                <text x="55" y="145" fill="#ff6b6b" font-size="12">w₃</text>
                <text x="55" y="165" fill="#ffd700" font-size="12">w₄</text>

                <!-- Note -->
                <rect x="150" y="25" width="130" height="35" rx="4" fill="rgba(81,207,102,0.2)"/>
                <text x="215" y="42" fill="#51cf66" font-size="12" text-anchor="middle">All approach 0</text>
                <text x="215" y="55" fill="#51cf66" font-size="12" text-anchor="middle">but never reach it</text>
            </svg>
        </div>
        <div class="card">
            <h4>Lasso Coefficient Path</h4>
            <svg viewBox="0 0 300 200" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Axes -->
                <line x1="40" y1="170" x2="280" y2="170" stroke="white" stroke-width="2"/>
                <line x1="40" y1="170" x2="40" y2="20" stroke="white" stroke-width="2"/>
                <text x="160" y="195" fill="white" font-size="12" text-anchor="middle">α (regularization strength) →</text>
                <text x="25" y="95" fill="white" font-size="12" text-anchor="middle" transform="rotate(-90, 25, 95)">Coefficient value</text>

                <!-- Zero line -->
                <line x1="40" y1="100" x2="280" y2="100" stroke="rgba(255,255,255,0.3)" stroke-dasharray="4"/>
                <text x="35" y="103" fill="white" font-size="12" text-anchor="end">0</text>

                <!-- Lasso paths - hit 0 at different alpha values -->
                <path d="M 50 40 Q 80 50 120 70 Q 160 90 180 100 L 280 100" stroke="#51cf66" stroke-width="2" fill="none"/>
                <path d="M 50 60 Q 80 70 100 85 Q 120 95 130 100 L 280 100" stroke="#4a90d9" stroke-width="2" fill="none"/>
                <path d="M 50 140 Q 100 130 150 115 Q 200 105 270 100" stroke="#ff6b6b" stroke-width="2" fill="none"/>
                <path d="M 50 160 Q 70 150 90 130 Q 110 105 120 100 L 280 100" stroke="#ffd700" stroke-width="2" fill="none"/>

                <!-- Hit zero markers -->
                <circle cx="180" cy="100" r="4" fill="#51cf66"/>
                <circle cx="130" cy="100" r="4" fill="#4a90d9"/>
                <circle cx="120" cy="100" r="4" fill="#ffd700"/>

                <!-- Labels -->
                <text x="55" y="35" fill="#51cf66" font-size="12">w₁</text>
                <text x="55" y="55" fill="#4a90d9" font-size="12">w₂</text>
                <text x="55" y="145" fill="#ff6b6b" font-size="12">w₃</text>
                <text x="55" y="165" fill="#ffd700" font-size="12">w₄</text>

                <!-- Note -->
                <rect x="150" y="25" width="130" height="35" rx="4" fill="rgba(255,107,107,0.2)"/>
                <text x="215" y="42" fill="#ff6b6b" font-size="12" text-anchor="middle">Coefficients hit 0</text>
                <text x="215" y="55" fill="#ff6b6b" font-size="12" text-anchor="middle">at different α values</text>
            </svg>
        </div>
    </div>
    <div class="code-table" style="margin-top: 15px;">
        <div class="code-table-header">Python: Choosing Alpha with Cross-Validation</div>
        <div class="code-table-content">
            <code>from sklearn.linear_model import RidgeCV, LassoCV

# RidgeCV automatically finds best alpha
ridge = RidgeCV(alphas=[0.1, 1.0, 10.0, 100.0])
ridge.fit(X_train, y_train)
print(f"Best alpha: {ridge.alpha_}")

# LassoCV does the same for Lasso
lasso = LassoCV(alphas=[0.001, 0.01, 0.1, 1.0])
lasso.fit(X_train, y_train)
print(f"Best alpha: {lasso.alpha_}")</code>
        </div>
    </div>
</div>

<!-- Slide 20: Classification -->
<div class="slide" id="slide25">
    <span class="slide-number">25</span>
    <h2>Classification</h2>
    <p>Predict discrete categories instead of continuous values</p>
    <div class="two-column">
        <div class="card">
            <h4>Binary Classification</h4>
            <ul>
                <li>Spam / Not Spam</li>
                <li>Fraud / Legitimate</li>
                <li>Cat / Dog</li>
            </ul>
        </div>
        <div class="card">
            <h4>Multi-class Classification</h4>
            <ul>
                <li>Digit recognition (0-9)</li>
                <li>Sentiment (pos/neg/neutral)</li>
                <li>Image categories</li>
            </ul>
        </div>
    </div>
    <div class="code-table" style="margin-top: 20px;">
        <div class="code-table-header">Python: Logistic Regression</div>
        <div class="code-table-content">
            <code>from sklearn.linear_model import LogisticRegression

model = LogisticRegression()
model.fit(X_train, y_train)
predictions = model.predict(X_test)
probabilities = model.predict_proba(X_test)  # Confidence scores</code>
        </div>
    </div>
</div>

<!-- Slide: Logistic Regression Deep Dive -->
<div class="slide" id="slide26">
    <span class="slide-number">26</span>
    <h2>Logistic Regression Deep Dive</h2>
    <p>Despite the name, it's a classification algorithm!</p>
    <div class="two-column">
        <div class="card">
            <h4>How It Works</h4>
            <p>Uses the sigmoid function to convert linear output to probability:</p>
            <div class="formula" style="font-size: 1em; margin: 15px 0;">$$P(y=1) = \frac{1}{1 + e^{-(wx + b)}}$$</div>
            <ul>
                <li>Output between 0 and 1</li>
                <li>Threshold (usually 0.5) determines class</li>
                <li>Can output confidence scores</li>
            </ul>
        </div>
        <div class="card">
            <h4>When to Use</h4>
            <ul>
                <li>Binary classification problems</li>
                <li>Need probability estimates</li>
                <li>Linearly separable data</li>
                <li>Interpretable results needed</li>
            </ul>
            <p style="margin-top: 15px;"><strong>Pros:</strong> Fast, interpretable, good baseline</p>
            <p><strong>Cons:</strong> Can't capture non-linear patterns</p>
        </div>
    </div>
</div>

<!-- Slide: Sigmoid Function Visualization -->
<div class="slide" id="slide26a">
    <span class="slide-number">26a</span>
    <h2>The Sigmoid Function</h2>
    <p>Transforms any real number into a probability between 0 and 1</p>
    <div class="two-column">
        <div class="card" style="display: flex; flex-direction: column; align-items: center;">
            <svg viewBox="0 0 400 280" style="width: 100%; max-width: 800px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Grid lines -->
                <defs>
                    <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
                        <path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
                    </pattern>
                </defs>
                <rect width="400" height="280" fill="url(#grid)"/>

                <!-- Axes -->
                <line x1="50" y1="240" x2="380" y2="240" stroke="white" stroke-width="2"/>
                <line x1="200" y1="20" x2="200" y2="260" stroke="white" stroke-width="2"/>

                <!-- Axis labels -->
                <text x="385" y="245" fill="white" font-size="12">z</text>
                <text x="205" y="18" fill="white" font-size="12">P</text>

                <!-- Y-axis labels -->
                <text x="35" y="45" fill="white" font-size="14">1.0</text>
                <text x="35" y="145" fill="white" font-size="14">0.5</text>
                <text x="35" y="245" fill="white" font-size="14">0.0</text>

                <!-- X-axis labels -->
                <text x="80" y="258" fill="white" font-size="14">-4</text>
                <text x="140" y="258" fill="white" font-size="14">-2</text>
                <text x="200" y="258" fill="white" font-size="14">0</text>
                <text x="255" y="258" fill="white" font-size="14">2</text>
                <text x="315" y="258" fill="white" font-size="14">4</text>

                <!-- Threshold line at 0.5 -->
                <line x1="50" y1="140" x2="380" y2="140" stroke="#ffd700" stroke-width="2" stroke-dasharray="8,4"/>
                <text x="300" y="130" fill="#ffd700" font-size="14" font-weight="bold">Threshold = 0.5</text>

                <!-- Sigmoid curve -->
                <path d="M 60 235
                         Q 80 235 100 233
                         Q 120 230 140 220
                         Q 160 200 180 170
                         Q 200 140 220 110
                         Q 240 80 260 60
                         Q 280 50 300 47
                         Q 320 45 360 43"
                      fill="none" stroke="#00d4ff" stroke-width="3"/>

                <!-- Region labels -->
                <rect x="60" y="150" width="80" height="25" fill="rgba(255,100,100,0.3)" rx="4"/>
                <text x="75" y="167" fill="#ff6b6b" font-size="12" font-weight="bold">Class 0</text>

                <rect x="280" y="60" width="80" height="25" fill="rgba(100,255,100,0.3)" rx="4"/>
                <text x="295" y="77" fill="#51cf66" font-size="12" font-weight="bold">Class 1</text>
            </svg>
            <div class="formula" style="margin-top: 15px; font-size: 0.9em;">$$\sigma(z) = \frac{1}{1 + e^{-z}}$$</div>
        </div>
        <div class="card">
            <h4>Key Properties</h4>
            <ul>
                <li><strong>Range:</strong> Always outputs (0, 1)</li>
                <li><strong>Symmetry:</strong> Centered at z=0 where output = 0.5</li>
                <li><strong>Smooth:</strong> Differentiable everywhere</li>
                <li><strong>Saturation:</strong> Approaches 0 or 1 at extremes</li>
            </ul>
            <h4 style="margin-top: 20px;">Decision Rule</h4>
            <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; margin-top: 10px;">
                <p style="margin: 0;"><strong>If P(y=1) &ge; 0.5:</strong> Predict Class 1</p>
                <p style="margin: 10px 0 0 0;"><strong>If P(y=1) &lt; 0.5:</strong> Predict Class 0</p>
            </div>
        </div>
    </div>
</div>

<!-- Slide: Data Separation Visualization -->
<div class="slide" id="slide26b">
    <span class="slide-number">26b</span>
    <h2>Logistic Regression: Separating Data</h2>
    <p>Finding the decision boundary that best separates two classes</p>
    <div class="two-column">
        <div class="card" style="display: flex; flex-direction: column; align-items: center;">
            <svg viewBox="0 0 400 300" style="width: 100%; max-width: 800px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Grid -->
                <defs>
                    <pattern id="grid2" width="40" height="40" patternUnits="userSpaceOnUse">
                        <path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
                    </pattern>
                </defs>
                <rect width="400" height="300" fill="url(#grid2)"/>

                <!-- Axes -->
                <line x1="40" y1="260" x2="380" y2="260" stroke="white" stroke-width="2"/>
                <line x1="40" y1="20" x2="40" y2="260" stroke="white" stroke-width="2"/>
                <text x="200" y="290" fill="white" font-size="12">Feature 1</text>
                <text x="10" y="140" fill="white" font-size="12" transform="rotate(-90, 10, 140)">Feature 2</text>

                <!-- Decision boundary (diagonal line) -->
                <line x1="60" y1="240" x2="360" y2="40" stroke="#ffd700" stroke-width="3"/>

                <!-- Shaded regions -->
                <polygon points="60,240 360,40 360,260 60,260" fill="rgba(255,100,100,0.15)"/>
                <polygon points="60,240 360,40 360,20 40,20 40,240" fill="rgba(100,255,100,0.15)"/>

                <!-- Class 0 points (red circles) - below the line -->
                <circle cx="100" cy="220" r="8" fill="#ff6b6b" stroke="white" stroke-width="2"/>
                <circle cx="150" cy="200" r="8" fill="#ff6b6b" stroke="white" stroke-width="2"/>
                <circle cx="120" cy="240" r="8" fill="#ff6b6b" stroke="white" stroke-width="2"/>
                <circle cx="180" cy="210" r="8" fill="#ff6b6b" stroke="white" stroke-width="2"/>
                <circle cx="200" cy="230" r="8" fill="#ff6b6b" stroke="white" stroke-width="2"/>
                <circle cx="230" cy="200" r="8" fill="#ff6b6b" stroke="white" stroke-width="2"/>
                <circle cx="250" cy="220" r="8" fill="#ff6b6b" stroke="white" stroke-width="2"/>
                <circle cx="280" cy="180" r="8" fill="#ff6b6b" stroke="white" stroke-width="2"/>
                <circle cx="300" cy="160" r="8" fill="#ff6b6b" stroke="white" stroke-width="2"/>
                <circle cx="320" cy="140" r="8" fill="#ff6b6b" stroke="white" stroke-width="2"/>

                <!-- Class 1 points (green circles) - above the line -->
                <circle cx="80" cy="180" r="8" fill="#51cf66" stroke="white" stroke-width="2"/>
                <circle cx="100" cy="150" r="8" fill="#51cf66" stroke="white" stroke-width="2"/>
                <circle cx="130" cy="130" r="8" fill="#51cf66" stroke="white" stroke-width="2"/>
                <circle cx="160" cy="110" r="8" fill="#51cf66" stroke="white" stroke-width="2"/>
                <circle cx="180" cy="90" r="8" fill="#51cf66" stroke="white" stroke-width="2"/>
                <circle cx="210" cy="80" r="8" fill="#51cf66" stroke="white" stroke-width="2"/>
                <circle cx="240" cy="60" r="8" fill="#51cf66" stroke="white" stroke-width="2"/>
                <circle cx="270" cy="50" r="8" fill="#51cf66" stroke="white" stroke-width="2"/>
                <circle cx="300" cy="70" r="8" fill="#51cf66" stroke="white" stroke-width="2"/>
                <circle cx="140" cy="160" r="8" fill="#51cf66" stroke="white" stroke-width="2"/>

                <!-- Legend -->
                <rect x="280" y="230" width="110" height="55" fill="rgba(0,0,0,0.5)" rx="5"/>
                <circle cx="295" cy="248" r="6" fill="#51cf66"/>
                <text x="308" y="252" fill="white" font-size="12">Class 1 (Positive)</text>
                <circle cx="295" cy="270" r="6" fill="#ff6b6b"/>
                <text x="308" y="274" fill="white" font-size="12">Class 0 (Negative)</text>
            </svg>
        </div>
        <div class="card">
            <h4>Decision Boundary</h4>
            <p>The yellow line represents where P(y=1) = 0.5</p>
            <ul>
                <li><strong>Above line:</strong> P(y=1) > 0.5 &rarr; Predict 1</li>
                <li><strong>Below line:</strong> P(y=1) < 0.5 &rarr; Predict 0</li>
            </ul>
            <h4 style="margin-top: 15px;">Linear Equation</h4>
            <div class="formula" style="font-size: 0.9em;">$$w_1 x_1 + w_2 x_2 + b = 0$$</div>
            <p style="margin-top: 10px;">The model learns weights (w) and bias (b) to position this boundary optimally.</p>
            <div class="highlight" style="margin-top: 15px;">
                <p><strong>Key Insight:</strong> Logistic regression finds a <em>linear</em> boundary. For non-linear patterns, use SVM with kernels or neural networks.</p>
            </div>
        </div>
    </div>
</div>

<!-- Slide: Loss Function and Logits -->
<div class="slide" id="slide26c">
    <span class="slide-number">26c</span>
    <h2>Logits and the Loss Function</h2>
    <p>Understanding how logistic regression learns from data</p>
    <div class="two-column">
        <div class="card">
            <h4>What are Logits?</h4>
            <p>The raw output <em>before</em> applying sigmoid:</p>
            <div class="formula" style="font-size: 0.95em; margin: 15px 0;">$$z = wx + b \quad \text{(logit)}$$</div>
            <div class="formula" style="font-size: 0.95em;">$$P = \sigma(z) \quad \text{(probability)}$$</div>
            <div style="background: rgba(0,0,0,0.3); padding: 12px; border-radius: 8px; margin-top: 15px;">
                <table style="width: 100%; font-size: 0.85em;">
                    <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                        <th style="text-align: left; padding: 5px;">Logit (z)</th>
                        <th style="text-align: left; padding: 5px;">Probability</th>
                        <th style="text-align: left; padding: 5px;">Prediction</th>
                    </tr>
                    <tr>
                        <td style="padding: 5px;">-3.0</td>
                        <td style="padding: 5px; color: #ff6b6b;">0.05</td>
                        <td style="padding: 5px;">Class 0</td>
                    </tr>
                    <tr>
                        <td style="padding: 5px;">0.0</td>
                        <td style="padding: 5px; color: #ffd700;">0.50</td>
                        <td style="padding: 5px;">Uncertain</td>
                    </tr>
                    <tr>
                        <td style="padding: 5px;">+3.0</td>
                        <td style="padding: 5px; color: #51cf66;">0.95</td>
                        <td style="padding: 5px;">Class 1</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="card">
            <h4>Binary Cross-Entropy Loss</h4>
            <p>Measures how wrong our predictions are:</p>
            <div class="formula" style="font-size: 0.85em; margin: 15px 0;">$$L = -\frac{1}{N}\sum_{i=1}^{N} [y_i \log(p_i) + (1-y_i)\log(1-p_i)]$$</div>
            <svg viewBox="0 0 300 120" style="width: 100%; max-width: 700px; margin: 10px auto; display: block;">
                <!-- Loss curve for y=1 -->
                <text x="10" y="15" fill="white" font-size="12">Loss when y=1:</text>
                <path d="M 30 100 Q 80 95 120 70 Q 160 40 200 20 Q 240 10 280 8" fill="none" stroke="#51cf66" stroke-width="2"/>
                <text x="285" y="12" fill="#51cf66" font-size="12">-log(p)</text>

                <!-- Loss curve for y=0 -->
                <text x="10" y="75" fill="white" font-size="12">Loss when y=0:</text>
                <path d="M 30 8 Q 80 15 120 35 Q 160 60 200 85 Q 240 98 280 100" fill="none" stroke="#ff6b6b" stroke-width="2"/>
                <text x="285" y="104" fill="#ff6b6b" font-size="12">-log(1-p)</text>

                <!-- X-axis labels -->
                <text x="30" y="115" fill="white" font-size="12">p=0</text>
                <text x="150" y="115" fill="white" font-size="12">p=0.5</text>
                <text x="265" y="115" fill="white" font-size="12">p=1</text>
            </svg>
            <p style="font-size: 0.9em; margin-top: 10px;"><strong>Intuition:</strong> High loss when prediction is confident but wrong!</p>
        </div>
    </div>
</div>

<!-- Slide: Logits in PyTorch -->
<div class="slide" id="slide26d">
    <span class="slide-number">26d</span>
    <h2>Implementing Logistic Regression</h2>
    <p>Working with logits in PyTorch for numerical stability</p>
    <div class="two-column">
        <div class="card">
            <h4>The Naive Approach</h4>
            <div class="code-table">
                <div class="code-table-content">
                    <code><span style="color: #888;"># DON'T DO THIS (numerical instability)</span>
probabilities = torch.sigmoid(logits)
loss = -torch.mean(
    y * torch.log(probabilities) +
    (1-y) * torch.log(1-probabilities)
)</code>
                </div>
            </div>
            <p style="margin-top: 15px; color: #ff6b6b;"><strong>Problem:</strong> log(0) = -infinity when sigmoid saturates!</p>
        </div>
        <div class="card">
            <h4>The Right Way: BCEWithLogitsLoss</h4>
            <div class="code-table">
                <div class="code-table-content">
                    <code><span style="color: #888;"># DO THIS (stable)</span>
import torch.nn as nn

<span style="color: #888;"># Model outputs raw logits (no sigmoid)</span>
logits = model(X)  <span style="color: #888;"># shape: (N, 1)</span>

<span style="color: #888;"># Loss function handles sigmoid internally</span>
criterion = nn.BCEWithLogitsLoss()
loss = criterion(logits, y)

<span style="color: #888;"># For predictions, apply sigmoid</span>
probs = torch.sigmoid(logits)
preds = (probs > 0.5).float()</code>
                </div>
            </div>
        </div>
    </div>
    <div class="highlight" style="margin-top: 20px;">
        <p><strong>Why BCEWithLogitsLoss?</strong> It combines sigmoid + BCE loss using the log-sum-exp trick, avoiding numerical overflow/underflow that occurs when probabilities are very close to 0 or 1.</p>
    </div>
</div>

<!-- Slide: Support Vector Machines -->
<div class="slide" id="slide27">
    <span class="slide-number">27</span>
    <h2>Support Vector Machines (SVM)</h2>
    <p>Find the optimal hyperplane that separates classes with maximum margin</p>
    <div class="two-column">
        <div class="card">
            <h4>Key Concepts</h4>
            <ul>
                <li><strong>Hyperplane:</strong> Decision boundary</li>
                <li><strong>Margin:</strong> Distance to nearest points</li>
                <li><strong>Support Vectors:</strong> Points on the margin</li>
                <li><strong>Kernel Trick:</strong> Handle non-linear data</li>
            </ul>
            <div class="code-table" style="margin-top: 15px;">
                <div class="code-table-content">
                    <code>from sklearn.svm import SVC

# Linear SVM
model = SVC(kernel='linear')

# Non-linear (RBF kernel)
model = SVC(kernel='rbf', C=1.0)
model.fit(X_train, y_train)</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>Kernel Functions</h4>
            <ul>
                <li><strong>Linear:</strong> Simple line/plane</li>
                <li><strong>RBF:</strong> Curved boundaries</li>
                <li><strong>Polynomial:</strong> Polynomial curves</li>
            </ul>
            <p style="margin-top: 15px;"><strong>When to Use:</strong></p>
            <ul>
                <li>High-dimensional data</li>
                <li>Clear margin of separation</li>
                <li>Medium-sized datasets</li>
            </ul>
            <p style="margin-top: 10px;"><strong>Cons:</strong> Slow on large datasets, sensitive to scaling</p>
        </div>
    </div>
</div>

<!-- Slide: SVM - Maximum Margin Visualization -->
<div class="slide" id="slide27a">
    <span class="slide-number">27a</span>
    <h2>SVM: Maximum Margin Classifier</h2>
    <p>The goal is to find the widest "street" between classes</p>
    <div class="two-column">
        <div class="card" style="text-align: center;">
            <svg viewBox="0 0 350 300" style="width: 100%; max-width: 750px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Grid -->
                <defs>
                    <pattern id="svmgrid" width="35" height="35" patternUnits="userSpaceOnUse">
                        <path d="M 35 0 L 0 0 0 35" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
                    </pattern>
                </defs>
                <rect width="350" height="300" fill="url(#svmgrid)"/>

                <!-- Margin region (the "street") -->
                <polygon points="80,280 280,30 310,50 110,300" fill="rgba(255,215,0,0.15)"/>

                <!-- Decision boundary (hyperplane) -->
                <line x1="95" y1="290" x2="295" y2="40" stroke="#ffd700" stroke-width="3"/>
                <text x="200" y="150" fill="#ffd700" font-size="12" text-anchor="middle" transform="rotate(-52, 200, 150)" font-weight="bold">Decision Boundary</text>

                <!-- Margin boundaries -->
                <line x1="80" y1="280" x2="280" y2="30" stroke="#ffd700" stroke-width="2" stroke-dasharray="6,4"/>
                <line x1="110" y1="300" x2="310" y2="50" stroke="#ffd700" stroke-width="2" stroke-dasharray="6,4"/>

                <!-- Margin width annotation -->
                <line x1="170" y1="185" x2="200" y2="165" stroke="white" stroke-width="2"/>
                <text x="190" y="200" fill="white" font-size="12">margin</text>

                <!-- Class 1 points (circles - above line) -->
                <circle cx="60" cy="200" r="7" fill="#51cf66" stroke="white" stroke-width="2"/>
                <circle cx="80" cy="160" r="7" fill="#51cf66" stroke="white" stroke-width="2"/>
                <circle cx="100" cy="120" r="7" fill="#51cf66" stroke="white" stroke-width="2"/>
                <circle cx="50" cy="140" r="7" fill="#51cf66" stroke="white" stroke-width="2"/>
                <circle cx="120" cy="80" r="7" fill="#51cf66" stroke="white" stroke-width="2"/>
                <circle cx="70" cy="100" r="7" fill="#51cf66" stroke="white" stroke-width="2"/>
                <circle cx="140" cy="60" r="7" fill="#51cf66" stroke="white" stroke-width="2"/>
                <circle cx="160" cy="50" r="7" fill="#51cf66" stroke="white" stroke-width="2"/>

                <!-- Support vectors for Class 1 (on the margin) -->
                <circle cx="95" cy="180" r="9" fill="#51cf66" stroke="#ffd700" stroke-width="4"/>
                <circle cx="150" cy="115" r="9" fill="#51cf66" stroke="#ffd700" stroke-width="4"/>
                <circle cx="200" cy="60" r="9" fill="#51cf66" stroke="#ffd700" stroke-width="4"/>

                <!-- Class 2 points (squares - below line) -->
                <circle cx="180" cy="250" r="7" fill="#ff6b6b" stroke="white" stroke-width="2"/>
                <circle cx="220" cy="220" r="7" fill="#ff6b6b" stroke="white" stroke-width="2"/>
                <circle cx="250" cy="190" r="7" fill="#ff6b6b" stroke="white" stroke-width="2"/>
                <circle cx="280" cy="160" r="7" fill="#ff6b6b" stroke="white" stroke-width="2"/>
                <circle cx="300" cy="130" r="7" fill="#ff6b6b" stroke="white" stroke-width="2"/>
                <circle cx="260" cy="230" r="7" fill="#ff6b6b" stroke="white" stroke-width="2"/>
                <circle cx="290" cy="200" r="7" fill="#ff6b6b" stroke="white" stroke-width="2"/>
                <circle cx="320" cy="170" r="7" fill="#ff6b6b" stroke="white" stroke-width="2"/>

                <!-- Support vectors for Class 2 (on the margin) -->
                <circle cx="140" cy="240" r="9" fill="#ff6b6b" stroke="#ffd700" stroke-width="4"/>
                <circle cx="195" cy="175" r="9" fill="#ff6b6b" stroke="#ffd700" stroke-width="4"/>
                <circle cx="250" cy="110" r="9" fill="#ff6b6b" stroke="#ffd700" stroke-width="4"/>

                <!-- Legend -->
                <rect x="10" y="10" width="140" height="70" fill="rgba(0,0,0,0.5)" rx="5"/>
                <circle cx="25" cy="30" r="6" fill="#51cf66"/>
                <text x="38" y="34" fill="white" font-size="12">Class 1</text>
                <circle cx="25" cy="50" r="6" fill="#ff6b6b"/>
                <text x="38" y="54" fill="white" font-size="12">Class 2</text>
                <circle cx="100" cy="40" r="6" fill="#51cf66" stroke="#ffd700" stroke-width="2"/>
                <text x="113" y="44" fill="#ffd700" font-size="12">Support Vector</text>
            </svg>
        </div>
        <div class="card">
            <h4>Key Components</h4>
            <ul>
                <li><strong>Hyperplane:</strong> The solid yellow line - our decision boundary</li>
                <li><strong>Margin:</strong> The "street" between dashed lines - we want this as wide as possible</li>
                <li><strong>Support Vectors:</strong> Points ON the margin (yellow border) - only these matter!</li>
            </ul>
            <h4 style="margin-top: 15px;">Why Maximum Margin?</h4>
            <p>A wider margin means better generalization:</p>
            <ul style="font-size: 0.9em;">
                <li>More "breathing room" for new points</li>
                <li>Less sensitive to noise</li>
                <li>Better performance on unseen data</li>
            </ul>
            <div class="highlight" style="margin-top: 15px;">
                <p><strong>Fun Fact:</strong> Remove any non-support vector point and the boundary stays the same! Only support vectors define the model.</p>
            </div>
        </div>
    </div>
</div>

<!-- Slide: SVM - Kernel Trick Visualization -->
<div class="slide" id="slide27b">
    <span class="slide-number">27b</span>
    <h2>SVM: The Kernel Trick Visualized</h2>
    <p>Transforming non-linearly separable data into higher dimensions</p>
    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px; flex-wrap: wrap;">
        <!-- Original 2D space -->
        <div style="text-align: center;">
            <h4 style="color: #ff6b6b;">Problem: Not Linearly Separable</h4>
            <svg viewBox="0 0 250 250" style="width: 600px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Axes -->
                <line x1="30" y1="220" x2="230" y2="220" stroke="white" stroke-width="2"/>
                <line x1="30" y1="220" x2="30" y2="30" stroke="white" stroke-width="2"/>
                <text x="130" y="245" fill="white" font-size="12" text-anchor="middle">X₁</text>
                <text x="15" y="125" fill="white" font-size="12" text-anchor="middle" transform="rotate(-90, 15, 125)">X₂</text>

                <!-- Inner circle points (Class 1 - red) -->
                <circle cx="125" cy="125" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="140" cy="110" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="110" cy="110" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="140" cy="140" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="110" cy="140" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="125" cy="100" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="125" cy="150" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="150" cy="125" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="100" cy="125" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>

                <!-- Outer ring points (Class 2 - green) -->
                <circle cx="125" cy="50" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="125" cy="200" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="50" cy="125" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="200" cy="125" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="70" cy="70" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="180" cy="70" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="70" cy="180" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="180" cy="180" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="90" cy="55" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="160" cy="55" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="90" cy="195" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="160" cy="195" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>

                <!-- X mark showing can't separate -->
                <text x="125" y="25" fill="#ff6b6b" font-size="12" text-anchor="middle" font-weight="bold">✗ No linear boundary!</text>
            </svg>
            <p style="font-size: 0.85em; margin-top: 10px;">2D: Can't draw a line to separate</p>
        </div>

        <!-- Arrow -->
        <div style="display: flex; align-items: center;">
            <svg viewBox="0 0 80 60" style="width: 70px;">
                <text x="40" y="15" fill="#ffd700" font-size="12" text-anchor="middle">Kernel</text>
                <text x="40" y="28" fill="#ffd700" font-size="12" text-anchor="middle">φ(x)</text>
                <path d="M 10 40 L 60 40" stroke="#ffd700" stroke-width="3" fill="none"/>
                <polygon points="60,40 50,35 50,45" fill="#ffd700"/>
            </svg>
        </div>

        <!-- Transformed 3D space -->
        <div style="text-align: center;">
            <h4 style="color: #51cf66;">Solution: Higher Dimension</h4>
            <svg viewBox="0 0 250 250" style="width: 600px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- 3D-ish axes -->
                <line x1="30" y1="200" x2="220" y2="200" stroke="white" stroke-width="2"/>
                <line x1="30" y1="200" x2="30" y2="30" stroke="white" stroke-width="2"/>
                <line x1="30" y1="200" x2="90" y2="240" stroke="white" stroke-width="2"/>
                <text x="125" y="215" fill="white" font-size="12">X₁</text>
                <text x="15" y="115" fill="white" font-size="12" transform="rotate(-90, 15, 115)">X₂</text>
                <text x="70" y="240" fill="white" font-size="12">X₁² + X₂²</text>

                <!-- Separating plane (tilted rectangle) -->
                <polygon points="50,120 200,120 230,150 80,150" fill="rgba(255,215,0,0.3)" stroke="#ffd700" stroke-width="2"/>
                <text x="150" y="140" fill="#ffd700" font-size="12" text-anchor="middle" font-weight="bold">Separating Plane</text>

                <!-- Red points (lifted up in 3D - inner circle, lower values) -->
                <circle cx="110" cy="170" r="5" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="130" cy="165" r="5" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="120" cy="175" r="5" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="140" cy="168" r="5" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="100" cy="172" r="5" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="125" cy="158" r="5" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="115" cy="162" r="5" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="135" cy="175" r="5" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>

                <!-- Green points (lifted higher - outer ring, higher values) -->
                <circle cx="80" cy="70" r="5" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="170" cy="65" r="5" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="125" cy="55" r="5" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="60" cy="90" r="5" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="190" cy="85" r="5" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="100" cy="60" r="5" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="150" cy="58" r="5" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="75" cy="105" r="5" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="175" cy="100" r="5" fill="#51cf66" stroke="white" stroke-width="1.5"/>

                <!-- Check mark -->
                <text x="125" y="25" fill="#51cf66" font-size="12" text-anchor="middle" font-weight="bold">✓ Linearly separable!</text>
            </svg>
            <p style="font-size: 0.85em; margin-top: 10px;">3D: A plane can separate them!</p>
        </div>
    </div>
    <div class="highlight" style="margin-top: 20px;">
        <p><strong>The Magic:</strong> The kernel function computes the similarity in higher dimensions WITHOUT actually transforming the data - this is computationally efficient!</p>
    </div>
</div>

<!-- Slide: SVM - Effect of C Parameter -->
<div class="slide" id="slide27c">
    <span class="slide-number">27c</span>
    <h2>SVM: Effect of C Parameter</h2>
    <p>C controls the trade-off between a smooth boundary and classifying points correctly</p>
    <div style="display: flex; justify-content: center; gap: 15px; margin-top: 20px; flex-wrap: wrap;">
        <!-- Small C -->
        <div style="text-align: center;">
            <h4 style="color: #4a90d9;">Small C = 0.1</h4>
            <svg viewBox="0 0 200 200" style="width: 550px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Wide margin region -->
                <polygon points="30,180 170,30 200,50 60,200" fill="rgba(255,215,0,0.15)"/>

                <!-- Decision boundary -->
                <line x1="45" y1="190" x2="185" y2="40" stroke="#ffd700" stroke-width="2"/>

                <!-- Margin lines -->
                <line x1="30" y1="180" x2="170" y2="30" stroke="#ffd700" stroke-width="1.5" stroke-dasharray="4,3"/>
                <line x1="60" y1="200" x2="200" y2="50" stroke="#ffd700" stroke-width="1.5" stroke-dasharray="4,3"/>

                <!-- Class 1 (some misclassified - on wrong side) -->
                <circle cx="40" cy="130" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="60" cy="100" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="50" cy="70" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="80" cy="60" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <!-- Misclassified point -->
                <circle cx="100" cy="140" r="6" fill="#51cf66" stroke="#ff6b6b" stroke-width="3"/>

                <!-- Class 2 -->
                <circle cx="130" cy="160" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="150" cy="130" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="160" cy="100" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="170" cy="70" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <!-- Misclassified point -->
                <circle cx="70" cy="150" r="6" fill="#ff6b6b" stroke="#51cf66" stroke-width="3"/>

                <text x="100" y="20" fill="white" font-size="12" text-anchor="middle">Wide margin</text>
                <text x="100" y="195" fill="#ff6b6b" font-size="12" text-anchor="middle">Tolerates errors</text>
            </svg>
            <p style="font-size: 0.8em; margin-top: 8px; color: #4a90d9;">Soft margin, may underfit</p>
        </div>

        <!-- Medium C -->
        <div style="text-align: center;">
            <h4 style="color: #51cf66;">Medium C = 1.0</h4>
            <svg viewBox="0 0 200 200" style="width: 550px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Medium margin -->
                <polygon points="40,175 165,40 185,55 60,190" fill="rgba(255,215,0,0.15)"/>

                <!-- Decision boundary -->
                <line x1="50" y1="182" x2="175" y2="47" stroke="#ffd700" stroke-width="2"/>

                <!-- Margin lines -->
                <line x1="40" y1="175" x2="165" y2="40" stroke="#ffd700" stroke-width="1.5" stroke-dasharray="4,3"/>
                <line x1="60" y1="190" x2="185" y2="55" stroke="#ffd700" stroke-width="1.5" stroke-dasharray="4,3"/>

                <!-- Class 1 (properly classified) -->
                <circle cx="35" cy="140" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="50" cy="110" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="45" cy="80" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="70" cy="60" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="90" cy="50" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>

                <!-- Class 2 -->
                <circle cx="120" cy="170" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="140" cy="140" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="155" cy="110" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="165" cy="80" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="175" cy="60" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>

                <text x="100" y="20" fill="white" font-size="12" text-anchor="middle">Balanced</text>
                <text x="100" y="195" fill="#51cf66" font-size="12" text-anchor="middle">Good trade-off</text>
            </svg>
            <p style="font-size: 0.8em; margin-top: 8px; color: #51cf66;">Good balance (default)</p>
        </div>

        <!-- Large C -->
        <div style="text-align: center;">
            <h4 style="color: #ff6b6b;">Large C = 100</h4>
            <svg viewBox="0 0 200 200" style="width: 550px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Narrow/complex margin -->
                <path d="M 30 180 Q 60 150 80 140 Q 100 130 110 100 Q 120 70 150 50 Q 170 35 190 30" fill="none" stroke="#ffd700" stroke-width="2"/>

                <!-- Class 1 (all classified correctly but boundary is wiggly) -->
                <circle cx="30" cy="150" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="45" cy="120" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="55" cy="90" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="75" cy="70" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="95" cy="55" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <!-- Point that causes wiggly boundary -->
                <circle cx="90" cy="115" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>

                <!-- Class 2 -->
                <circle cx="100" cy="170" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="130" cy="150" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="145" cy="120" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="160" cy="90" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="175" cy="60" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <!-- Point that causes wiggly boundary -->
                <circle cx="120" cy="85" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>

                <text x="100" y="20" fill="white" font-size="12" text-anchor="middle">Narrow margin</text>
                <text x="100" y="195" fill="#ff6b6b" font-size="12" text-anchor="middle">No errors allowed</text>
            </svg>
            <p style="font-size: 0.8em; margin-top: 8px; color: #ff6b6b;">Hard margin, may overfit</p>
        </div>
    </div>
    <div class="two-column" style="margin-top: 20px;">
        <div class="card">
            <h4>Small C</h4>
            <ul style="font-size: 0.85em;">
                <li>Allows misclassifications</li>
                <li>Wider margin</li>
                <li>Smoother boundary</li>
                <li>Risk: Underfitting</li>
            </ul>
        </div>
        <div class="card">
            <h4>Large C</h4>
            <ul style="font-size: 0.85em;">
                <li>Penalizes all errors heavily</li>
                <li>Narrow margin</li>
                <li>Complex boundary</li>
                <li>Risk: Overfitting</li>
            </ul>
        </div>
    </div>
</div>

<!-- Slide: SVM Math - Hyperplane and Unit Vectors -->
<div class="slide" id="slide27d">
    <span class="slide-number">27d</span>
    <h2>SVM Math: The Hyperplane Equation</h2>
    <p>Understanding the geometry behind SVMs</p>
    <div class="two-column">
        <div class="card">
            <h4>The Hyperplane</h4>
            <p>A hyperplane is defined by a <strong>weight vector</strong> $\mathbf{w}$ and <strong>bias</strong> $b$:</p>
            <div class="formula">
                $\mathbf{w} \cdot \mathbf{x} + b = 0$
            </div>
            <p style="font-size: 0.9em;">Where:</p>
            <ul style="font-size: 0.9em;">
                <li>$\mathbf{w}$ = normal vector (perpendicular to hyperplane)</li>
                <li>$\mathbf{x}$ = input feature vector</li>
                <li>$b$ = bias (offset from origin)</li>
            </ul>
            <h4 style="margin-top: 15px;">Unit Normal Vector</h4>
            <p style="font-size: 0.9em;">The <strong>unit vector</strong> $\hat{\mathbf{w}}$ points perpendicular to the hyperplane:</p>
            <div class="formula">
                $\hat{\mathbf{w}} = \frac{\mathbf{w}}{||\mathbf{w}||}$
            </div>
            <p style="font-size: 0.85em;"><em>This normalizes the direction so $||\hat{\mathbf{w}}|| = 1$</em></p>
        </div>
        <div class="card">
            <h4>Visual: Hyperplane Geometry</h4>
            <svg viewBox="0 0 320 220" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Grid lines -->
                <defs>
                    <pattern id="gridSVM" width="40" height="40" patternUnits="userSpaceOnUse">
                        <path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/>
                    </pattern>
                </defs>
                <rect width="320" height="220" fill="url(#gridSVM)"/>

                <!-- Hyperplane (decision boundary) -->
                <line x1="60" y1="200" x2="280" y2="40" stroke="#ffd700" stroke-width="3"/>
                <text x="285" y="50" fill="#ffd700" font-size="12">w·x + b = 0</text>

                <!-- Normal vector w -->
                <line x1="170" y1="120" x2="220" y2="80" stroke="#ff6b6b" stroke-width="2.5" marker-end="url(#arrowhead)"/>
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#ff6b6b"/>
                    </marker>
                </defs>
                <text x="225" y="72" fill="#ff6b6b" font-size="14" font-weight="bold">w</text>

                <!-- Unit vector -->
                <line x1="170" y1="120" x2="195" y2="100" stroke="#51cf66" stroke-width="2" marker-end="url(#arrowhead2)"/>
                <defs>
                    <marker id="arrowhead2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#51cf66"/>
                    </marker>
                </defs>
                <text x="200" y="95" fill="#51cf66" font-size="12">ŵ (unit)</text>

                <!-- Point x on hyperplane -->
                <circle cx="170" cy="120" r="5" fill="white"/>
                <text x="155" y="138" fill="white" font-size="12">x₀</text>

                <!-- Point x₁ above -->
                <circle cx="100" cy="90" r="5" fill="#4a90d9"/>
                <text x="85" y="85" fill="#4a90d9" font-size="12">x₁</text>

                <!-- Distance line -->
                <line x1="100" y1="90" x2="145" y2="133" stroke="#4a90d9" stroke-width="1" stroke-dasharray="4,2"/>
                <text x="95" y="115" fill="#4a90d9" font-size="12">distance</text>

                <!-- Labels for regions -->
                <text x="50" y="50" fill="#51cf66" font-size="12">w·x + b > 0</text>
                <text x="50" y="65" fill="#51cf66" font-size="12">(Class +1)</text>
                <text x="230" y="180" fill="#ff6b6b" font-size="12">w·x + b < 0</text>
                <text x="230" y="195" fill="#ff6b6b" font-size="12">(Class -1)</text>
            </svg>
            <div class="highlight" style="margin-top: 10px; padding: 10px;">
                <p style="font-size: 0.85em; margin: 0;"><strong>Key Insight:</strong> Distance from point $\mathbf{x}$ to hyperplane = $\frac{|\mathbf{w} \cdot \mathbf{x} + b|}{||\mathbf{w}||}$</p>
            </div>
        </div>
    </div>
</div>

<!-- Slide: SVM Math - Margin and Optimization Objective -->
<div class="slide" id="slide27e">
    <span class="slide-number">27e</span>
    <h2>SVM Math: Maximizing the Margin</h2>
    <p>The goal is to find the hyperplane with the maximum margin</p>
    <div class="two-column">
        <div class="card">
            <h4>The Margin</h4>
            <p style="font-size: 0.9em;">For support vectors (points closest to the boundary):</p>
            <div class="formula">
                $\mathbf{w} \cdot \mathbf{x}_+ + b = +1$ (positive class)<br>
                $\mathbf{w} \cdot \mathbf{x}_- + b = -1$ (negative class)
            </div>
            <h4 style="margin-top: 15px;">Margin Width</h4>
            <p style="font-size: 0.9em;">The margin is the distance between the two support vector hyperplanes:</p>
            <div class="formula">
                $\text{margin} = \frac{2}{||\mathbf{w}||}$
            </div>
            <h4 style="margin-top: 15px;">Optimization Goal</h4>
            <p style="font-size: 0.9em;">To maximize margin, we <strong>minimize</strong> $||\mathbf{w}||$:</p>
            <div class="formula">
                $\min_{\mathbf{w}, b} \frac{1}{2}||\mathbf{w}||^2$
            </div>
            <p style="font-size: 0.8em;"><em>(We use $\frac{1}{2}||\mathbf{w}||^2$ for mathematical convenience)</em></p>
        </div>
        <div class="card">
            <h4>Visual: Margin Geometry</h4>
            <svg viewBox="0 0 320 200" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Margin region -->
                <polygon points="80,180 220,40 245,55 105,195" fill="rgba(255,215,0,0.15)"/>

                <!-- Decision boundary -->
                <line x1="92" y1="187" x2="232" y2="47" stroke="#ffd700" stroke-width="2.5"/>
                <text x="237" y="55" fill="#ffd700" font-size="12">w·x+b=0</text>

                <!-- Positive margin -->
                <line x1="80" y1="180" x2="220" y2="40" stroke="#51cf66" stroke-width="1.5" stroke-dasharray="5,3"/>
                <text x="215" y="30" fill="#51cf66" font-size="12">w·x+b=+1</text>

                <!-- Negative margin -->
                <line x1="105" y1="195" x2="245" y2="55" stroke="#ff6b6b" stroke-width="1.5" stroke-dasharray="5,3"/>
                <text x="248" y="70" fill="#ff6b6b" font-size="12">w·x+b=-1</text>

                <!-- Support vectors (positive) -->
                <circle cx="95" cy="100" r="7" fill="#51cf66" stroke="#ffd700" stroke-width="3"/>
                <circle cx="135" cy="70" r="7" fill="#51cf66" stroke="#ffd700" stroke-width="3"/>

                <!-- Support vectors (negative) -->
                <circle cx="175" cy="160" r="7" fill="#ff6b6b" stroke="#ffd700" stroke-width="3"/>
                <circle cx="210" cy="120" r="7" fill="#ff6b6b" stroke="#ffd700" stroke-width="3"/>

                <!-- Other points (positive) -->
                <circle cx="50" cy="80" r="5" fill="#51cf66"/>
                <circle cx="70" cy="50" r="5" fill="#51cf66"/>
                <circle cx="110" cy="40" r="5" fill="#51cf66"/>

                <!-- Other points (negative) -->
                <circle cx="220" cy="180" r="5" fill="#ff6b6b"/>
                <circle cx="260" cy="150" r="5" fill="#ff6b6b"/>
                <circle cx="280" cy="100" r="5" fill="#ff6b6b"/>

                <!-- Margin width indicator -->
                <line x1="150" y1="105" x2="170" y2="125" stroke="white" stroke-width="2"/>
                <line x1="145" y1="100" x2="155" y2="110" stroke="white" stroke-width="1.5"/>
                <line x1="165" y1="120" x2="175" y2="130" stroke="white" stroke-width="1.5"/>
                <text x="182" y="117" fill="white" font-size="12">2/||w||</text>

                <!-- Legend -->
                <circle cx="30" cy="185" r="5" fill="#51cf66" stroke="#ffd700" stroke-width="2"/>
                <text x="40" y="188" fill="white" font-size="12">Support vectors</text>
            </svg>
            <div class="highlight" style="margin-top: 10px; padding: 10px;">
                <p style="font-size: 0.85em; margin: 0;"><strong>Constraint:</strong> All points must satisfy $y_i(\mathbf{w} \cdot \mathbf{x}_i + b) \geq 1$</p>
            </div>
        </div>
    </div>
</div>

<!-- Slide: SVM Math - Lagrangian Optimization -->
<div class="slide" id="slide27f">
    <span class="slide-number">27f</span>
    <h2>SVM Math: Lagrangian Optimization</h2>
    <p>Converting the constrained optimization problem using Lagrange multipliers</p>
    <div class="two-column">
        <div class="card">
            <h4>The Primal Problem</h4>
            <p style="font-size: 0.85em;">Minimize:</p>
            <div class="formula" style="font-size: 0.95em;">
                $\min_{\mathbf{w}, b} \frac{1}{2}||\mathbf{w}||^2$
            </div>
            <p style="font-size: 0.85em;">Subject to: $y_i(\mathbf{w} \cdot \mathbf{x}_i + b) \geq 1$ for all $i$</p>

            <h4 style="margin-top: 15px;">The Lagrangian</h4>
            <p style="font-size: 0.85em;">Introduce Lagrange multipliers $\alpha_i \geq 0$:</p>
            <div class="formula" style="font-size: 0.85em;">
                $\mathcal{L}(\mathbf{w}, b, \boldsymbol{\alpha}) = \frac{1}{2}||\mathbf{w}||^2 - \sum_{i=1}^{n} \alpha_i[y_i(\mathbf{w} \cdot \mathbf{x}_i + b) - 1]$
            </div>

            <h4 style="margin-top: 15px;">Taking Derivatives</h4>
            <p style="font-size: 0.85em;">Set $\frac{\partial \mathcal{L}}{\partial \mathbf{w}} = 0$ and $\frac{\partial \mathcal{L}}{\partial b} = 0$:</p>
            <div class="formula" style="font-size: 0.9em;">
                $\mathbf{w} = \sum_{i=1}^{n} \alpha_i y_i \mathbf{x}_i$<br><br>
                $\sum_{i=1}^{n} \alpha_i y_i = 0$
            </div>
        </div>
        <div class="card">
            <h4>The Dual Problem</h4>
            <p style="font-size: 0.85em;">Substituting back, we get the <strong>dual formulation</strong>:</p>
            <div class="formula" style="font-size: 0.85em;">
                $\max_{\boldsymbol{\alpha}} \sum_{i=1}^{n} \alpha_i - \frac{1}{2}\sum_{i,j} \alpha_i \alpha_j y_i y_j (\mathbf{x}_i \cdot \mathbf{x}_j)$
            </div>
            <p style="font-size: 0.85em;">Subject to:</p>
            <ul style="font-size: 0.85em;">
                <li>$\alpha_i \geq 0$ for all $i$</li>
                <li>$\sum_i \alpha_i y_i = 0$</li>
            </ul>

            <h4 style="margin-top: 15px;">Key Observations</h4>
            <ul style="font-size: 0.85em;">
                <li>Only depends on <strong>dot products</strong> $\mathbf{x}_i \cdot \mathbf{x}_j$</li>
                <li>This enables the <strong>kernel trick!</strong></li>
                <li>Most $\alpha_i = 0$ (non-support vectors)</li>
                <li>$\alpha_i > 0$ only for <strong>support vectors</strong></li>
            </ul>

            <div class="highlight" style="margin-top: 10px; padding: 10px;">
                <p style="font-size: 0.8em; margin: 0;"><strong>Decision function:</strong> $f(\mathbf{x}) = \text{sign}\left(\sum_{i \in SV} \alpha_i y_i (\mathbf{x}_i \cdot \mathbf{x}) + b\right)$</p>
            </div>
        </div>
    </div>
</div>

<!-- Slide: SVM Math - KKT Conditions -->
<div class="slide" id="slide27g">
    <span class="slide-number">27g</span>
    <h2>SVM Math: KKT Conditions</h2>
    <p>Karush-Kuhn-Tucker conditions define when we've found the optimal solution</p>
    <div class="two-column">
        <div class="card">
            <h4>The KKT Conditions</h4>
            <p style="font-size: 0.85em;">At the optimal solution, these must hold:</p>
            <ol style="font-size: 0.85em;">
                <li style="margin-bottom: 10px;"><strong>Stationarity:</strong><br>
                    $\frac{\partial \mathcal{L}}{\partial \mathbf{w}} = 0 \Rightarrow \mathbf{w} = \sum_i \alpha_i y_i \mathbf{x}_i$</li>
                <li style="margin-bottom: 10px;"><strong>Primal feasibility:</strong><br>
                    $y_i(\mathbf{w} \cdot \mathbf{x}_i + b) \geq 1$</li>
                <li style="margin-bottom: 10px;"><strong>Dual feasibility:</strong><br>
                    $\alpha_i \geq 0$</li>
                <li><strong>Complementary slackness:</strong><br>
                    $\alpha_i[y_i(\mathbf{w} \cdot \mathbf{x}_i + b) - 1] = 0$</li>
            </ol>

            <div class="highlight" style="margin-top: 15px; padding: 10px;">
                <p style="font-size: 0.8em; margin: 0;"><strong>Complementary slackness</strong> means: either $\alpha_i = 0$ OR the point is exactly on the margin!</p>
            </div>
        </div>
        <div class="card">
            <h4>Visual: KKT in Action</h4>
            <svg viewBox="0 0 320 180" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Margin region -->
                <polygon points="70,165 200,40 225,55 95,180" fill="rgba(255,215,0,0.12)"/>

                <!-- Decision boundary -->
                <line x1="82" y1="172" x2="212" y2="47" stroke="#ffd700" stroke-width="2"/>

                <!-- Margin lines -->
                <line x1="70" y1="165" x2="200" y2="40" stroke="#51cf66" stroke-width="1.5" stroke-dasharray="4,3"/>
                <line x1="95" y1="180" x2="225" y2="55" stroke="#ff6b6b" stroke-width="1.5" stroke-dasharray="4,3"/>

                <!-- Support vector (α > 0, on margin) -->
                <circle cx="115" cy="90" r="8" fill="#51cf66" stroke="#ffd700" stroke-width="3"/>
                <text x="125" y="88" fill="#ffd700" font-size="12">α₁ > 0</text>
                <text x="125" y="100" fill="white" font-size="12">on margin</text>

                <!-- Support vector (α > 0, on margin) -->
                <circle cx="165" cy="145" r="8" fill="#ff6b6b" stroke="#ffd700" stroke-width="3"/>
                <text x="175" y="143" fill="#ffd700" font-size="12">α₂ > 0</text>
                <text x="175" y="155" fill="white" font-size="12">on margin</text>

                <!-- Non-support vector (α = 0, inside) -->
                <circle cx="60" cy="50" r="6" fill="#51cf66"/>
                <text x="70" y="55" fill="rgba(255,255,255,0.7)" font-size="12">α = 0</text>

                <!-- Non-support vector (α = 0, inside) -->
                <circle cx="85" cy="35" r="6" fill="#51cf66"/>

                <!-- Non-support vector (α = 0, inside) -->
                <circle cx="250" cy="120" r="6" fill="#ff6b6b"/>
                <text x="260" y="125" fill="rgba(255,255,255,0.7)" font-size="12">α = 0</text>

                <!-- Non-support vector -->
                <circle cx="270" cy="160" r="6" fill="#ff6b6b"/>

                <!-- Annotations -->
                <text x="20" y="170" fill="white" font-size="12">Points away from margin:</text>
                <text x="20" y="182" fill="white" font-size="12">α = 0 (not support vectors)</text>
            </svg>

            <h4 style="margin-top: 10px;">What This Tells Us</h4>
            <ul style="font-size: 0.85em;">
                <li><strong>Support vectors:</strong> $\alpha_i > 0$, lie exactly on margin</li>
                <li><strong>All other points:</strong> $\alpha_i = 0$, don't affect solution</li>
                <li>The solution only depends on support vectors!</li>
            </ul>
        </div>
    </div>
</div>

<!-- Slide: SVM Math - Soft Margin with Slack Variables -->
<div class="slide" id="slide27h">
    <span class="slide-number">27h</span>
    <h2>SVM Math: Soft Margin (Real-World SVMs)</h2>
    <p>Introducing slack variables $\xi_i$ to handle non-separable data</p>
    <div class="two-column">
        <div class="card">
            <h4>The Problem</h4>
            <p style="font-size: 0.9em;">Real data is rarely perfectly separable. We need to allow some misclassifications.</p>

            <h4 style="margin-top: 15px;">Soft Margin Formulation</h4>
            <p style="font-size: 0.85em;">Add slack variables $\xi_i \geq 0$ for each point:</p>
            <div class="formula" style="font-size: 0.85em;">
                $\min_{\mathbf{w}, b, \boldsymbol{\xi}} \frac{1}{2}||\mathbf{w}||^2 + C\sum_{i=1}^{n}\xi_i$
            </div>
            <p style="font-size: 0.85em;">Subject to:</p>
            <div class="formula" style="font-size: 0.85em;">
                $y_i(\mathbf{w} \cdot \mathbf{x}_i + b) \geq 1 - \xi_i$<br>
                $\xi_i \geq 0$
            </div>

            <h4 style="margin-top: 15px;">The C Parameter</h4>
            <ul style="font-size: 0.85em;">
                <li><strong>Large C:</strong> Penalize errors heavily → narrow margin</li>
                <li><strong>Small C:</strong> Allow more errors → wide margin</li>
            </ul>
        </div>
        <div class="card">
            <h4>Visual: Slack Variables</h4>
            <svg viewBox="0 0 320 200" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Margin region -->
                <polygon points="70,180 210,45 235,60 95,195" fill="rgba(255,215,0,0.1)"/>

                <!-- Decision boundary -->
                <line x1="82" y1="187" x2="222" y2="52" stroke="#ffd700" stroke-width="2"/>

                <!-- Margin lines -->
                <line x1="70" y1="180" x2="210" y2="45" stroke="#51cf66" stroke-width="1.5" stroke-dasharray="4,3"/>
                <line x1="95" y1="195" x2="235" y2="60" stroke="#ff6b6b" stroke-width="1.5" stroke-dasharray="4,3"/>

                <!-- Correct points -->
                <circle cx="50" cy="100" r="5" fill="#51cf66"/>
                <circle cx="70" cy="70" r="5" fill="#51cf66"/>
                <circle cx="100" cy="50" r="5" fill="#51cf66"/>

                <circle cx="200" cy="170" r="5" fill="#ff6b6b"/>
                <circle cx="250" cy="140" r="5" fill="#ff6b6b"/>
                <circle cx="270" cy="100" r="5" fill="#ff6b6b"/>

                <!-- Point in margin (0 < ξ < 1) -->
                <circle cx="135" cy="110" r="6" fill="#51cf66" stroke="orange" stroke-width="2"/>
                <line x1="135" y1="110" x2="120" y2="100" stroke="orange" stroke-width="1.5" stroke-dasharray="3,2"/>
                <text x="105" y="95" fill="orange" font-size="12">ξ₁</text>
                <text x="145" y="115" fill="white" font-size="12">0 < ξ < 1</text>

                <!-- Misclassified point (ξ > 1) -->
                <circle cx="175" cy="140" r="6" fill="#51cf66" stroke="#ff6b6b" stroke-width="3"/>
                <line x1="175" y1="140" x2="145" y2="115" stroke="#ff6b6b" stroke-width="1.5" stroke-dasharray="3,2"/>
                <text x="130" y="110" fill="#ff6b6b" font-size="12">ξ₂</text>
                <text x="182" y="150" fill="#ff6b6b" font-size="12">ξ > 1</text>
                <text x="182" y="160" fill="#ff6b6b" font-size="12">(misclassified)</text>

                <!-- Legend -->
                <rect x="10" y="175" width="120" height="22" fill="rgba(0,0,0,0.3)" rx="3"/>
                <text x="15" y="189" fill="white" font-size="12">ξ = 0: correct side</text>
            </svg>

            <h4 style="margin-top: 10px;">Interpreting Slack Values</h4>
            <table style="width: 100%; font-size: 0.8em; border-collapse: collapse;">
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td style="padding: 5px;">$\xi_i = 0$</td>
                    <td>Correct side of margin</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td style="padding: 5px;">$0 < \xi_i < 1$</td>
                    <td>Correct class, inside margin</td>
                </tr>
                <tr>
                    <td style="padding: 5px;">$\xi_i > 1$</td>
                    <td><strong>Misclassified!</strong></td>
                </tr>
            </table>
        </div>
    </div>
</div>

<!-- Slide: SVM Math - Summary -->
<div class="slide" id="slide27i">
    <span class="slide-number">27i</span>
    <h2>SVM Math: Putting It All Together</h2>
    <p>The complete picture of how SVMs find the optimal decision boundary</p>
    <div style="display: flex; justify-content: center; margin: 20px 0;">
        <svg viewBox="0 0 700 180" style="width: 90%; max-width: 900px;">
            <!-- Step 1 -->
            <rect x="10" y="20" width="130" height="140" rx="8" fill="rgba(255,255,255,0.1)" stroke="#c5d45a" stroke-width="2"/>
            <text x="75" y="45" fill="#c5d45a" font-size="14" text-anchor="middle" font-weight="bold">1. Problem</text>
            <text x="75" y="70" fill="white" font-size="12" text-anchor="middle">Maximize margin</text>
            <text x="75" y="90" fill="white" font-size="12" text-anchor="middle">max 2/||w||</text>
            <text x="75" y="115" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">Subject to:</text>
            <text x="75" y="130" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">yᵢ(w·xᵢ+b) ≥ 1</text>

            <!-- Arrow 1 -->
            <path d="M 145 90 L 170 90" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowYellow)"/>
            <defs>
                <marker id="arrowYellow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#ffd700"/>
                </marker>
            </defs>

            <!-- Step 2 -->
            <rect x="175" y="20" width="130" height="140" rx="8" fill="rgba(255,255,255,0.1)" stroke="#4a90d9" stroke-width="2"/>
            <text x="240" y="45" fill="#4a90d9" font-size="14" text-anchor="middle" font-weight="bold">2. Lagrangian</text>
            <text x="240" y="70" fill="white" font-size="12" text-anchor="middle">Add multipliers αᵢ</text>
            <text x="240" y="90" fill="white" font-size="12" text-anchor="middle">L = ½||w||² -</text>
            <text x="240" y="105" fill="white" font-size="12" text-anchor="middle">Σαᵢ[yᵢ(w·xᵢ+b)-1]</text>
            <text x="240" y="130" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">Take derivatives</text>
            <text x="240" y="145" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">∂L/∂w = 0, ∂L/∂b = 0</text>

            <!-- Arrow 2 -->
            <path d="M 310 90 L 335 90" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowYellow)"/>

            <!-- Step 3 -->
            <rect x="340" y="20" width="130" height="140" rx="8" fill="rgba(255,255,255,0.1)" stroke="#51cf66" stroke-width="2"/>
            <text x="405" y="45" fill="#51cf66" font-size="14" text-anchor="middle" font-weight="bold">3. Dual Form</text>
            <text x="405" y="70" fill="white" font-size="12" text-anchor="middle">Only dot products!</text>
            <text x="405" y="90" fill="white" font-size="12" text-anchor="middle">max Σαᵢ -</text>
            <text x="405" y="105" fill="white" font-size="12" text-anchor="middle">½ΣΣαᵢαⱼyᵢyⱼ(xᵢ·xⱼ)</text>
            <text x="405" y="130" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">Replace xᵢ·xⱼ with</text>
            <text x="405" y="145" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">K(xᵢ,xⱼ) → kernels!</text>

            <!-- Arrow 3 -->
            <path d="M 475 90 L 500 90" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowYellow)"/>

            <!-- Step 4 -->
            <rect x="505" y="20" width="130" height="140" rx="8" fill="rgba(255,255,255,0.1)" stroke="#ff6b6b" stroke-width="2"/>
            <text x="570" y="45" fill="#ff6b6b" font-size="14" text-anchor="middle" font-weight="bold">4. Solution</text>
            <text x="570" y="70" fill="white" font-size="12" text-anchor="middle">Find αᵢ values</text>
            <text x="570" y="90" fill="white" font-size="12" text-anchor="middle">via QP solver</text>
            <text x="570" y="115" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">Support vectors:</text>
            <text x="570" y="130" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">αᵢ > 0</text>
            <text x="570" y="150" fill="#ffd700" font-size="12" text-anchor="middle">w = Σαᵢyᵢxᵢ</text>
        </svg>
    </div>
    <div class="three-column" style="margin-top: 10px;">
        <div class="card" style="text-align: center;">
            <h4 style="color: #c5d45a;">Why Unit Vectors Matter</h4>
            <p style="font-size: 0.85em;">The normal vector $\hat{\mathbf{w}}$ defines the hyperplane orientation. Normalizing gives us the true geometric margin.</p>
        </div>
        <div class="card" style="text-align: center;">
            <h4 style="color: #4a90d9;">Why Lagrangian Works</h4>
            <p style="font-size: 0.85em;">Converts constrained optimization to unconstrained. The dual reveals that only dot products matter!</p>
        </div>
        <div class="card" style="text-align: center;">
            <h4 style="color: #51cf66;">Why SVMs Scale</h4>
            <p style="font-size: 0.85em;">Decision only depends on support vectors (sparse solution). Kernel trick avoids computing in high dimensions.</p>
        </div>
    </div>
</div>

<!-- Slide: SVM - The Kernel Trick -->
<div class="slide" id="slide28">
    <span class="slide-number">28</span>
    <h2>SVM - The Kernel Trick Explained</h2>
    <p>How SVMs handle non-linearly separable data</p>
    <div class="two-column">
        <div class="card">
            <h4>The Problem</h4>
            <p>Some data can't be separated by a straight line in its original space.</p>
            <div style="text-align: center; margin: 15px 0;">
                <p style="font-family: monospace; font-size: 0.9em;">
                    Original 2D: ○○○ × ○○○<br>
                    (can't draw a line!)
                </p>
            </div>
            <h4>The Solution</h4>
            <p>Project data to higher dimensions where it becomes separable!</p>
            <div style="text-align: center; margin: 15px 0;">
                <p style="font-family: monospace; font-size: 0.9em;">
                    3D projection: ○○○<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× (plane separates)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;○○○
                </p>
            </div>
        </div>
        <div class="card">
            <h4>Common Kernels</h4>
            <table style="width: 100%; font-size: 0.85em; margin-top: 10px;">
                <tr><td><strong>Linear</strong></td><td>K(x,y) = x·y</td><td>Simple, fast</td></tr>
                <tr><td><strong>RBF</strong></td><td>K(x,y) = exp(-γ||x-y||²)</td><td>Most versatile</td></tr>
                <tr><td><strong>Polynomial</strong></td><td>K(x,y) = (x·y + c)^d</td><td>Polynomial boundaries</td></tr>
            </table>
            <h4 style="margin-top: 20px;">Key Parameters</h4>
            <ul>
                <li><strong>C:</strong> Trade-off between margin width and errors</li>
                <li><strong>gamma (γ):</strong> How far influence of single point extends</li>
            </ul>
            <p style="margin-top: 10px; font-size: 0.9em;"><em>High C = fewer errors, narrow margin<br>High γ = complex boundaries, risk overfitting</em></p>
        </div>
    </div>
</div>

<!-- Slide: SVM - Tuning Parameters -->
<div class="slide" id="slide29">
    <span class="slide-number">29</span>
    <h2>SVM - Hyperparameter Tuning</h2>
    <p>Finding the right C and gamma values is crucial</p>
    <div class="two-column">
        <div class="card">
            <h4>Effect of C Parameter</h4>
            <ul>
                <li><strong>Small C (0.01):</strong> Wide margin, tolerates misclassifications → May underfit</li>
                <li><strong>Large C (100):</strong> Narrow margin, strict classification → May overfit</li>
            </ul>
            <div class="code-table" style="margin-top: 15px;">
                <div class="code-table-content">
                    <code># Grid search for best parameters
from sklearn.model_selection import GridSearchCV

param_grid = {
    'C': [0.1, 1, 10, 100],
    'gamma': ['scale', 0.1, 0.01],
    'kernel': ['rbf', 'linear']
}

grid = GridSearchCV(SVC(), param_grid, cv=5)
grid.fit(X_train, y_train)
print(grid.best_params_)</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>Effect of Gamma (RBF kernel)</h4>
            <ul>
                <li><strong>Small γ:</strong> Points have far-reaching influence → Smoother boundary</li>
                <li><strong>Large γ:</strong> Points have local influence → Wiggly boundary</li>
            </ul>
            <div class="highlight" style="margin-top: 20px;">
                <p><strong>Rule of Thumb:</strong></p>
                <ul style="font-size: 0.9em;">
                    <li>Start with <code>kernel='rbf'</code></li>
                    <li>Use <code>gamma='scale'</code> (default)</li>
                    <li>Tune C first: try [0.1, 1, 10, 100]</li>
                    <li>Always scale your features!</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- Slide: Decision Trees -->
<div class="slide" id="slide30">
    <span class="slide-number">30</span>
    <h2>Decision Trees</h2>
    <p>Make decisions by splitting data based on feature values</p>
    <div class="two-column">
        <div class="card">
            <h4>How It Works</h4>
            <div style="font-family: monospace; font-size: 0.85em; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px;">
Is Age > 30?<br>
├── Yes: Is Income > 50k?<br>
│   ├── Yes: Approve Loan<br>
│   └── No: Deny Loan<br>
└── No: Is Credit > 700?<br>
    ├── Yes: Approve Loan<br>
    └── No: Deny Loan
            </div>
            <p style="margin-top: 10px;">Splits data to maximize information gain (reduce entropy)</p>
        </div>
        <div class="card">
            <h4>Code Example</h4>
            <div class="code-table">
                <div class="code-table-content">
                    <code>from sklearn.tree import DecisionTreeClassifier

model = DecisionTreeClassifier(
    max_depth=5,      # Prevent overfitting
    min_samples_leaf=10
)
model.fit(X_train, y_train)

# Feature importance
print(model.feature_importances_)</code>
                </div>
            </div>
            <p style="margin-top: 10px;"><strong>Pros:</strong> Interpretable, handles non-linear</p>
            <p><strong>Cons:</strong> Prone to overfitting</p>
        </div>
    </div>
</div>

<!-- Slide: Decision Tree Visualization -->
<div class="slide" id="slide30a">
    <span class="slide-number">30a</span>
    <h2>Decision Tree Structure</h2>
    <p>Visual representation of how a tree makes decisions</p>
    <div style="display: flex; justify-content: center; margin: 20px 0;">
        <svg viewBox="0 0 600 380" style="width: 100%; max-width: 700px; background: rgba(0,0,0,0.2); border-radius: 8px;">
            <!-- Root Node -->
            <rect x="225" y="20" width="150" height="50" rx="8" fill="#4a90d9" stroke="white" stroke-width="2"/>
            <text x="300" y="42" fill="white" font-size="14" text-anchor="middle" font-weight="bold">Age > 30?</text>
            <text x="300" y="58" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">n=1000, Gini=0.50</text>

            <!-- Branches from root -->
            <line x1="250" y1="70" x2="150" y2="110" stroke="white" stroke-width="2"/>
            <line x1="350" y1="70" x2="450" y2="110" stroke="white" stroke-width="2"/>
            <text x="190" y="85" fill="#51cf66" font-size="12" font-weight="bold">Yes</text>
            <text x="390" y="85" fill="#ff6b6b" font-size="12" font-weight="bold">No</text>

            <!-- Left Child (Age > 30) -->
            <rect x="75" y="110" width="150" height="50" rx="8" fill="#5a9fd9" stroke="white" stroke-width="2"/>
            <text x="150" y="132" fill="white" font-size="14" text-anchor="middle" font-weight="bold">Income > 50k?</text>
            <text x="150" y="148" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">n=600, Gini=0.42</text>

            <!-- Right Child (Age <= 30) -->
            <rect x="375" y="110" width="150" height="50" rx="8" fill="#5a9fd9" stroke="white" stroke-width="2"/>
            <text x="450" y="132" fill="white" font-size="14" text-anchor="middle" font-weight="bold">Credit > 700?</text>
            <text x="450" y="148" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">n=400, Gini=0.48</text>

            <!-- Branches from left child -->
            <line x1="100" y1="160" x2="60" y2="200" stroke="white" stroke-width="2"/>
            <line x1="200" y1="160" x2="240" y2="200" stroke="white" stroke-width="2"/>
            <text x="70" y="178" fill="#51cf66" font-size="12">Yes</text>
            <text x="210" y="178" fill="#ff6b6b" font-size="12">No</text>

            <!-- Branches from right child -->
            <line x1="400" y1="160" x2="360" y2="200" stroke="white" stroke-width="2"/>
            <line x1="500" y1="160" x2="540" y2="200" stroke="white" stroke-width="2"/>
            <text x="370" y="178" fill="#51cf66" font-size="12">Yes</text>
            <text x="510" y="178" fill="#ff6b6b" font-size="12">No</text>

            <!-- Leaf Nodes -->
            <!-- Leaf 1: Approve (Age>30, Income>50k) -->
            <rect x="10" y="200" width="100" height="45" rx="8" fill="#51cf66" stroke="white" stroke-width="2"/>
            <text x="60" y="220" fill="white" font-size="12" text-anchor="middle" font-weight="bold">APPROVE</text>
            <text x="60" y="235" fill="rgba(255,255,255,0.8)" font-size="12" text-anchor="middle">85% Yes (n=400)</text>

            <!-- Leaf 2: Deny (Age>30, Income<=50k) -->
            <rect x="190" y="200" width="100" height="45" rx="8" fill="#ff6b6b" stroke="white" stroke-width="2"/>
            <text x="240" y="220" fill="white" font-size="12" text-anchor="middle" font-weight="bold">DENY</text>
            <text x="240" y="235" fill="rgba(255,255,255,0.8)" font-size="12" text-anchor="middle">70% No (n=200)</text>

            <!-- Leaf 3: Approve (Age<=30, Credit>700) -->
            <rect x="310" y="200" width="100" height="45" rx="8" fill="#51cf66" stroke="white" stroke-width="2"/>
            <text x="360" y="220" fill="white" font-size="12" text-anchor="middle" font-weight="bold">APPROVE</text>
            <text x="360" y="235" fill="rgba(255,255,255,0.8)" font-size="12" text-anchor="middle">75% Yes (n=150)</text>

            <!-- Leaf 4: Deny (Age<=30, Credit<=700) -->
            <rect x="490" y="200" width="100" height="45" rx="8" fill="#ff6b6b" stroke="white" stroke-width="2"/>
            <text x="540" y="220" fill="white" font-size="12" text-anchor="middle" font-weight="bold">DENY</text>
            <text x="540" y="235" fill="rgba(255,255,255,0.8)" font-size="12" text-anchor="middle">80% No (n=250)</text>

            <!-- Legend -->
            <rect x="180" y="270" width="240" height="100" fill="rgba(0,0,0,0.4)" rx="8"/>
            <text x="300" y="290" fill="white" font-size="14" text-anchor="middle" font-weight="bold">Tree Components</text>
            <rect x="195" y="300" width="15" height="15" rx="3" fill="#4a90d9"/>
            <text x="220" y="312" fill="white" font-size="12">Root Node (first split)</text>
            <rect x="195" y="320" width="15" height="15" rx="3" fill="#5a9fd9"/>
            <text x="220" y="332" fill="white" font-size="12">Internal Node (decision)</text>
            <rect x="195" y="340" width="15" height="15" rx="3" fill="#51cf66"/>
            <text x="220" y="352" fill="white" font-size="12">Leaf Node (prediction)</text>
        </svg>
    </div>
</div>

<!-- Slide: Decision Tree - Feature Space Partitioning -->
<div class="slide" id="slide30b">
    <span class="slide-number">30b</span>
    <h2>How Decision Trees Partition Space</h2>
    <p>Each split creates axis-aligned boundaries in the feature space</p>
    <div class="two-column">
        <div class="card" style="display: flex; flex-direction: column; align-items: center;">
            <svg viewBox="0 0 350 300" style="width: 100%; max-width: 750px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Axes -->
                <line x1="50" y1="250" x2="320" y2="250" stroke="white" stroke-width="2"/>
                <line x1="50" y1="250" x2="50" y2="30" stroke="white" stroke-width="2"/>
                <text x="185" y="280" fill="white" font-size="14" text-anchor="middle">Age</text>
                <text x="25" y="140" fill="white" font-size="14" text-anchor="middle" transform="rotate(-90, 25, 140)">Income</text>

                <!-- Axis labels -->
                <text x="50" y="268" fill="white" font-size="12">20</text>
                <text x="185" y="268" fill="white" font-size="12">30</text>
                <text x="320" y="268" fill="white" font-size="12">40</text>
                <text x="35" y="255" fill="white" font-size="12">30k</text>
                <text x="35" y="140" fill="white" font-size="12">50k</text>
                <text x="35" y="35" fill="white" font-size="12">70k</text>

                <!-- Decision boundary 1: Age = 30 (vertical line) -->
                <line x1="185" y1="30" x2="185" y2="250" stroke="#ffd700" stroke-width="3" stroke-dasharray="8,4"/>
                <text x="190" y="45" fill="#ffd700" font-size="12" font-weight="bold">Age=30</text>

                <!-- Decision boundary 2: Income = 50k for Age > 30 (horizontal line, right side) -->
                <line x1="185" y1="140" x2="320" y2="140" stroke="#ffd700" stroke-width="3" stroke-dasharray="8,4"/>
                <text x="250" y="155" fill="#ffd700" font-size="12" font-weight="bold">Income=50k</text>

                <!-- Shaded regions -->
                <!-- Top-right: Approve (Age>30, Income>50k) -->
                <rect x="185" y="30" width="135" height="110" fill="rgba(81,207,102,0.3)"/>
                <text x="252" y="85" fill="#51cf66" font-size="12" font-weight="bold">APPROVE</text>

                <!-- Bottom-right: Deny (Age>30, Income<=50k) -->
                <rect x="185" y="140" width="135" height="110" fill="rgba(255,107,107,0.3)"/>
                <text x="252" y="200" fill="#ff6b6b" font-size="12" font-weight="bold">DENY</text>

                <!-- Left side: Mixed (Age<=30) - simplified -->
                <rect x="50" y="30" width="135" height="220" fill="rgba(255,215,0,0.15)"/>
                <text x="117" y="140" fill="#ffd700" font-size="12" font-weight="bold">FURTHER</text>
                <text x="117" y="155" fill="#ffd700" font-size="12" font-weight="bold">SPLITS...</text>

                <!-- Data points - Approved (green) -->
                <circle cx="220" cy="60" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="260" cy="80" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="240" cy="100" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="290" cy="70" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="300" cy="110" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>

                <!-- Data points - Denied (red) -->
                <circle cx="220" cy="180" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="250" cy="200" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="280" cy="170" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="300" cy="220" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>

                <!-- Data points in left region -->
                <circle cx="80" cy="80" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="120" cy="200" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="100" cy="120" r="6" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="150" cy="180" r="6" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
            </svg>
        </div>
        <div class="card">
            <h4>Key Observations</h4>
            <ul>
                <li><strong>Axis-aligned:</strong> Splits are always perpendicular to one axis</li>
                <li><strong>Rectangular regions:</strong> Creates box-shaped decision regions</li>
                <li><strong>Hierarchical:</strong> Each split divides a region into two</li>
            </ul>
            <h4 style="margin-top: 15px;">Limitation</h4>
            <p>Cannot create diagonal boundaries efficiently:</p>
            <svg viewBox="0 0 200 80" style="width: 100%; max-width: 650px; margin: 10px auto; display: block;">
                <rect x="5" y="5" width="85" height="70" fill="rgba(0,0,0,0.3)" rx="4"/>
                <line x1="10" y1="70" x2="85" y2="10" stroke="#ff6b6b" stroke-width="2"/>
                <text x="47" y="82" fill="white" font-size="12" text-anchor="middle">Ideal</text>

                <rect x="110" y="5" width="85" height="70" fill="rgba(0,0,0,0.3)" rx="4"/>
                <path d="M 115 70 L 115 40 L 145 40 L 145 25 L 175 25 L 175 10" stroke="#51cf66" stroke-width="2" fill="none"/>
                <text x="152" y="82" fill="white" font-size="12" text-anchor="middle">Decision Tree</text>
            </svg>
            <p style="font-size: 0.9em; margin-top: 10px;">Trees approximate diagonal boundaries with many small splits (staircase pattern).</p>
        </div>
    </div>
</div>

<!-- Slide: Decision Trees - Splitting Criteria -->
<div class="slide" id="slide31">
    <span class="slide-number">31</span>
    <h2>Decision Trees - How Splits are Chosen</h2>
    <p>The algorithm chooses splits that maximize information gain</p>
    <div class="two-column">
        <div class="card">
            <h4>Splitting Criteria</h4>
            <ul>
                <li><strong>Gini Impurity:</strong> Measures probability of misclassification</li>
                <li><strong>Entropy:</strong> Measures disorder/uncertainty</li>
                <li><strong>Information Gain:</strong> Reduction in entropy after split</li>
            </ul>
            <div class="formula" style="margin: 15px 0; font-size: 0.9em;">
                $$Gini = 1 - \sum_{i=1}^{n} p_i^2$$
                $$Entropy = -\sum_{i=1}^{n} p_i \log_2(p_i)$$
            </div>
            <p style="font-size: 0.9em;"><em>Lower Gini/Entropy = purer node = better split</em></p>
        </div>
        <div class="card">
            <h4>Example: Should we split on Age?</h4>
            <div style="font-family: monospace; font-size: 0.8em; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 8px;">
Before split: 50% Yes, 50% No<br>
Gini = 1 - (0.5² + 0.5²) = 0.5<br><br>
After split on Age > 30:<br>
├── Age > 30: 80% Yes (Gini = 0.32)<br>
└── Age ≤ 30: 70% No (Gini = 0.42)<br><br>
Weighted Gini = 0.37 (improved!)
            </div>
            <p style="margin-top: 15px; font-size: 0.9em;"><strong>The algorithm tries all features and thresholds, picks the best split</strong></p>
        </div>
    </div>
</div>

<!-- Slide: Decision Trees - Preventing Overfitting -->
<div class="slide" id="slide32">
    <span class="slide-number">32</span>
    <h2>Decision Trees - Preventing Overfitting</h2>
    <p>Deep trees memorize training data instead of learning patterns</p>
    <div class="two-column">
        <div class="card">
            <h4>Pre-Pruning (Stop Early)</h4>
            <ul>
                <li><code>max_depth</code>: Maximum tree depth</li>
                <li><code>min_samples_split</code>: Min samples to split a node</li>
                <li><code>min_samples_leaf</code>: Min samples in leaf nodes</li>
                <li><code>max_features</code>: Features to consider per split</li>
            </ul>
            <div class="code-table" style="margin-top: 15px;">
                <div class="code-table-content">
                    <code>model = DecisionTreeClassifier(
    max_depth=5,          # Shallow tree
    min_samples_split=20, # Need 20 to split
    min_samples_leaf=10   # Min 10 per leaf
)</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>Post-Pruning (Cost Complexity)</h4>
            <p>Grow full tree, then prune branches that don't help</p>
            <div class="code-table" style="margin-top: 15px;">
                <div class="code-table-content">
                    <code># Find optimal alpha for pruning
path = model.cost_complexity_pruning_path(X_train, y_train)
alphas = path.ccp_alphas

# Use cross-validation to find best alpha
for alpha in alphas:
    model = DecisionTreeClassifier(ccp_alpha=alpha)
    scores = cross_val_score(model, X, y, cv=5)
    print(f"Alpha: {alpha:.4f}, Score: {scores.mean():.3f}")</code>
                </div>
            </div>
        </div>
    </div>
    <div class="highlight" style="margin-top: 15px;">
        <p><strong>Rule of Thumb:</strong> Start with max_depth=5-10, increase only if underfitting</p>
    </div>
</div>

<!-- Slide: Random Forests & Ensemble Methods -->
<div class="slide" id="slide33">
    <span class="slide-number">33</span>
    <h2>Random Forests & Ensemble Methods</h2>
    <p>Combine multiple models for better predictions</p>
    <div class="two-column">
        <div class="card">
            <h4>Random Forest</h4>
            <ul>
                <li>Many decision trees (typically 100+)</li>
                <li>Each tree trained on random subset of data</li>
                <li>Final prediction = majority vote</li>
                <li>Reduces overfitting dramatically</li>
            </ul>
            <div class="code-table" style="margin-top: 15px;">
                <div class="code-table-content">
                    <code>from sklearn.ensemble import RandomForestClassifier

model = RandomForestClassifier(
    n_estimators=100,  # Number of trees
    max_depth=10,
    random_state=42
)
model.fit(X_train, y_train)</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>Other Ensemble Methods</h4>
            <ul>
                <li><strong>Bagging:</strong> Train on random subsets</li>
                <li><strong>Boosting:</strong> Sequential correction of errors</li>
                <li><strong>XGBoost:</strong> Gradient boosting (very popular!)</li>
                <li><strong>Stacking:</strong> Combine different algorithms</li>
            </ul>
            <div class="code-table" style="margin-top: 15px;">
                <div class="code-table-content">
                    <code>from xgboost import XGBClassifier

model = XGBClassifier(
    n_estimators=100,
    learning_rate=0.1
)</code>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Slide: Random Forest - How It Works Visualization -->
<div class="slide" id="slide33a">
    <span class="slide-number">33a</span>
    <h2>Random Forest: Ensemble Voting</h2>
    <p>Multiple diverse trees vote to make a final prediction</p>
    <div style="display: flex; justify-content: center; margin: 15px 0;">
        <svg viewBox="0 0 700 400" style="width: 100%; max-width: 750px; background: rgba(0,0,0,0.2); border-radius: 8px;">
            <!-- Input Data -->
            <rect x="20" y="160" width="80" height="80" rx="8" fill="#4a90d9" stroke="white" stroke-width="2"/>
            <text x="60" y="195" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Input</text>
            <text x="60" y="210" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Data</text>
            <text x="60" y="228" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">(new sample)</text>

            <!-- Arrows from input to trees -->
            <line x1="100" y1="180" x2="150" y2="80" stroke="white" stroke-width="2" marker-end="url(#arrowhead)"/>
            <line x1="100" y1="200" x2="150" y2="200" stroke="white" stroke-width="2" marker-end="url(#arrowhead)"/>
            <line x1="100" y1="220" x2="150" y2="320" stroke="white" stroke-width="2" marker-end="url(#arrowhead)"/>

            <!-- Tree 1 -->
            <g transform="translate(150, 30)">
                <rect x="0" y="0" width="120" height="100" rx="8" fill="rgba(90,159,217,0.3)" stroke="#5a9fd9" stroke-width="2"/>
                <text x="60" y="20" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Tree 1</text>
                <!-- Mini tree structure -->
                <circle cx="60" cy="40" r="8" fill="#5a9fd9"/>
                <line x1="52" y1="48" x2="35" y2="65" stroke="white" stroke-width="1.5"/>
                <line x1="68" y1="48" x2="85" y2="65" stroke="white" stroke-width="1.5"/>
                <circle cx="35" cy="72" r="6" fill="#51cf66"/>
                <circle cx="85" cy="72" r="6" fill="#ff6b6b"/>
                <text x="60" y="95" fill="#51cf66" font-size="12" text-anchor="middle" font-weight="bold">Class A</text>
            </g>

            <!-- Tree 2 -->
            <g transform="translate(150, 150)">
                <rect x="0" y="0" width="120" height="100" rx="8" fill="rgba(90,159,217,0.3)" stroke="#5a9fd9" stroke-width="2"/>
                <text x="60" y="20" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Tree 2</text>
                <!-- Mini tree structure -->
                <circle cx="60" cy="40" r="8" fill="#5a9fd9"/>
                <line x1="52" y1="48" x2="35" y2="65" stroke="white" stroke-width="1.5"/>
                <line x1="68" y1="48" x2="85" y2="65" stroke="white" stroke-width="1.5"/>
                <circle cx="35" cy="72" r="6" fill="#ff6b6b"/>
                <circle cx="85" cy="72" r="6" fill="#51cf66"/>
                <text x="60" y="95" fill="#51cf66" font-size="12" text-anchor="middle" font-weight="bold">Class A</text>
            </g>

            <!-- Tree 3 -->
            <g transform="translate(150, 270)">
                <rect x="0" y="0" width="120" height="100" rx="8" fill="rgba(90,159,217,0.3)" stroke="#5a9fd9" stroke-width="2"/>
                <text x="60" y="20" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Tree 3</text>
                <!-- Mini tree structure -->
                <circle cx="60" cy="40" r="8" fill="#5a9fd9"/>
                <line x1="52" y1="48" x2="35" y2="65" stroke="white" stroke-width="1.5"/>
                <line x1="68" y1="48" x2="85" y2="65" stroke="white" stroke-width="1.5"/>
                <circle cx="35" cy="72" r="6" fill="#51cf66"/>
                <circle cx="85" cy="72" r="6" fill="#ff6b6b"/>
                <text x="60" y="95" fill="#ff6b6b" font-size="12" text-anchor="middle" font-weight="bold">Class B</text>
            </g>

            <!-- More trees indicator -->
            <text x="210" y="395" fill="rgba(255,255,255,0.5)" font-size="14" text-anchor="middle">... (100+ trees)</text>

            <!-- Arrows from trees to voting -->
            <line x1="270" y1="80" x2="350" y2="180" stroke="#51cf66" stroke-width="2"/>
            <line x1="270" y1="200" x2="350" y2="200" stroke="#51cf66" stroke-width="2"/>
            <line x1="270" y1="320" x2="350" y2="220" stroke="#ff6b6b" stroke-width="2"/>

            <!-- Voting Box -->
            <rect x="350" y="140" width="140" height="120" rx="8" fill="rgba(255,215,0,0.2)" stroke="#ffd700" stroke-width="2"/>
            <text x="420" y="165" fill="#ffd700" font-size="14" text-anchor="middle" font-weight="bold">VOTING</text>

            <!-- Vote counts -->
            <rect x="365" y="180" width="50" height="30" rx="4" fill="#51cf66"/>
            <text x="390" y="200" fill="white" font-size="12" text-anchor="middle" font-weight="bold">A: 2</text>

            <rect x="425" y="180" width="50" height="30" rx="4" fill="#ff6b6b"/>
            <text x="450" y="200" fill="white" font-size="12" text-anchor="middle" font-weight="bold">B: 1</text>

            <text x="420" y="240" fill="white" font-size="12" text-anchor="middle">Majority wins!</text>

            <!-- Arrow to final prediction -->
            <line x1="490" y1="200" x2="540" y2="200" stroke="white" stroke-width="2" marker-end="url(#arrowhead)"/>

            <!-- Final Prediction -->
            <rect x="540" y="160" width="140" height="80" rx="8" fill="#51cf66" stroke="white" stroke-width="3"/>
            <text x="610" y="195" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Final:</text>
            <text x="610" y="220" fill="white" font-size="14" text-anchor="middle" font-weight="bold">CLASS A</text>

            <!-- Arrow marker definition -->
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="white"/>
                </marker>
            </defs>
        </svg>
    </div>
    <div class="highlight" style="margin-top: 10px;">
        <p><strong>Key Insight:</strong> Each tree is trained on a random subset of data AND features, making trees diverse. Diversity + voting = robust predictions!</p>
    </div>
</div>

<!-- Slide: Random Forest - Bagging and Feature Randomness -->
<div class="slide" id="slide33b">
    <span class="slide-number">33b</span>
    <h2>Random Forest: Two Sources of Randomness</h2>
    <p>What makes each tree different and why that matters</p>
    <div class="two-column">
        <div class="card">
            <h4>1. Bootstrap Sampling (Bagging)</h4>
            <svg viewBox="0 0 280 180" style="width: 100%; max-width: 700px; background: rgba(0,0,0,0.2); border-radius: 8px; margin: 10px auto; display: block;">
                <!-- Original dataset -->
                <text x="70" y="20" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Original Data</text>
                <rect x="20" y="30" width="100" height="60" rx="4" fill="rgba(74,144,217,0.3)" stroke="#4a90d9"/>
                <circle cx="35" cy="50" r="5" fill="#ff6b6b"/><text x="35" y="53" fill="white" font-size="7" text-anchor="middle">1</text>
                <circle cx="55" cy="50" r="5" fill="#51cf66"/><text x="55" y="53" fill="white" font-size="7" text-anchor="middle">2</text>
                <circle cx="75" cy="50" r="5" fill="#ff6b6b"/><text x="75" y="53" fill="white" font-size="7" text-anchor="middle">3</text>
                <circle cx="95" cy="50" r="5" fill="#51cf66"/><text x="95" y="53" fill="white" font-size="7" text-anchor="middle">4</text>
                <circle cx="35" cy="75" r="5" fill="#51cf66"/><text x="35" y="78" fill="white" font-size="7" text-anchor="middle">5</text>
                <circle cx="55" cy="75" r="5" fill="#ff6b6b"/><text x="55" y="78" fill="white" font-size="7" text-anchor="middle">6</text>
                <circle cx="75" cy="75" r="5" fill="#51cf66"/><text x="75" y="78" fill="white" font-size="7" text-anchor="middle">7</text>
                <circle cx="95" cy="75" r="5" fill="#ff6b6b"/><text x="95" y="78" fill="white" font-size="7" text-anchor="middle">8</text>

                <!-- Arrow -->
                <path d="M 70 95 L 70 105 L 140 105" stroke="white" stroke-width="1.5" fill="none" marker-end="url(#arrow2)"/>
                <text x="105" y="100" fill="#ffd700" font-size="12">Sample with replacement</text>

                <!-- Bootstrap samples -->
                <text x="200" y="20" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Bootstrap Samples</text>

                <!-- Sample 1 -->
                <rect x="150" y="30" width="80" height="25" rx="3" fill="rgba(90,159,217,0.3)" stroke="#5a9fd9"/>
                <text x="155" y="45" fill="white" font-size="12">Tree 1:</text>
                <circle cx="190" cy="42" r="4" fill="#ff6b6b"/><text x="190" y="45" fill="white" font-size="6" text-anchor="middle">1</text>
                <circle cx="202" cy="42" r="4" fill="#ff6b6b"/><text x="202" y="45" fill="white" font-size="6" text-anchor="middle">1</text>
                <circle cx="214" cy="42" r="4" fill="#51cf66"/><text x="214" y="45" fill="white" font-size="6" text-anchor="middle">4</text>
                <circle cx="226" cy="42" r="4" fill="#51cf66"/><text x="226" y="45" fill="white" font-size="6" text-anchor="middle">7</text>

                <!-- Sample 2 -->
                <rect x="150" y="60" width="80" height="25" rx="3" fill="rgba(90,159,217,0.3)" stroke="#5a9fd9"/>
                <text x="155" y="75" fill="white" font-size="12">Tree 2:</text>
                <circle cx="190" cy="72" r="4" fill="#51cf66"/><text x="190" y="75" fill="white" font-size="6" text-anchor="middle">2</text>
                <circle cx="202" cy="72" r="4" fill="#ff6b6b"/><text x="202" y="75" fill="white" font-size="6" text-anchor="middle">3</text>
                <circle cx="214" cy="72" r="4" fill="#ff6b6b"/><text x="214" y="75" fill="white" font-size="6" text-anchor="middle">6</text>
                <circle cx="226" cy="72" r="4" fill="#ff6b6b"/><text x="226" y="75" fill="white" font-size="6" text-anchor="middle">6</text>

                <text x="190" y="100" fill="rgba(255,255,255,0.6)" font-size="12" text-anchor="middle">~63% unique samples per tree</text>

                <!-- Out-of-bag note -->
                <rect x="150" y="115" width="120" height="55" rx="4" fill="rgba(255,215,0,0.15)" stroke="#ffd700"/>
                <text x="210" y="130" fill="#ffd700" font-size="12" text-anchor="middle" font-weight="bold">Out-of-Bag (OOB)</text>
                <text x="210" y="145" fill="white" font-size="12" text-anchor="middle">~37% left out per tree</text>
                <text x="210" y="158" fill="white" font-size="12" text-anchor="middle">Used for validation!</text>

                <defs>
                    <marker id="arrow2" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                        <polygon points="0 0, 6 3, 0 6" fill="white"/>
                    </marker>
                </defs>
            </svg>
        </div>
        <div class="card">
            <h4>2. Feature Randomness</h4>
            <svg viewBox="0 0 280 180" style="width: 100%; max-width: 700px; background: rgba(0,0,0,0.2); border-radius: 8px; margin: 10px auto; display: block;">
                <!-- All features -->
                <text x="70" y="20" fill="white" font-size="12" text-anchor="middle" font-weight="bold">All Features</text>
                <rect x="20" y="30" width="100" height="50" rx="4" fill="rgba(74,144,217,0.3)" stroke="#4a90d9"/>
                <text x="35" y="50" fill="white" font-size="12">Age</text>
                <text x="35" y="65" fill="white" font-size="12">Income</text>
                <text x="75" y="50" fill="white" font-size="12">Credit</text>
                <text x="75" y="65" fill="white" font-size="12">Debt</text>

                <!-- Arrow -->
                <path d="M 70 85 L 70 95 L 140 95" stroke="white" stroke-width="1.5" fill="none" marker-end="url(#arrow2)"/>
                <text x="105" y="90" fill="#ffd700" font-size="12">Random subset</text>

                <!-- Feature subsets -->
                <text x="200" y="20" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Per-Split Features</text>

                <rect x="150" y="30" width="80" height="22" rx="3" fill="rgba(90,159,217,0.3)" stroke="#5a9fd9"/>
                <text x="155" y="44" fill="white" font-size="12">Tree 1: Age, Credit</text>

                <rect x="150" y="56" width="80" height="22" rx="3" fill="rgba(90,159,217,0.3)" stroke="#5a9fd9"/>
                <text x="155" y="70" fill="white" font-size="12">Tree 2: Income, Debt</text>

                <rect x="150" y="82" width="80" height="22" rx="3" fill="rgba(90,159,217,0.3)" stroke="#5a9fd9"/>
                <text x="155" y="96" fill="white" font-size="12">Tree 3: Age, Debt</text>

                <text x="190" y="120" fill="rgba(255,255,255,0.6)" font-size="12" text-anchor="middle">√n features typical</text>

                <!-- Why it matters -->
                <rect x="150" y="130" width="120" height="45" rx="4" fill="rgba(81,207,102,0.15)" stroke="#51cf66"/>
                <text x="210" y="145" fill="#51cf66" font-size="12" text-anchor="middle" font-weight="bold">Why?</text>
                <text x="210" y="158" fill="white" font-size="12" text-anchor="middle">Decorrelates trees</text>
                <text x="210" y="170" fill="white" font-size="12" text-anchor="middle">Reduces variance</text>
            </svg>
        </div>
    </div>
    <div class="highlight" style="margin-top: 15px;">
        <p><strong>Formula:</strong> max_features = √(total features) for classification, total/3 for regression. This is the default in sklearn!</p>
    </div>
</div>

<!-- Slide: Random Forest - Feature Importance -->
<div class="slide" id="slide34">
    <span class="slide-number">34</span>
    <h2>Random Forest - Feature Importance</h2>
    <p>Understand which features drive predictions</p>
    <div class="two-column">
        <div class="card">
            <h4>Why Feature Importance Matters</h4>
            <ul>
                <li><strong>Interpretability:</strong> Explain model decisions</li>
                <li><strong>Feature Selection:</strong> Remove irrelevant features</li>
                <li><strong>Domain Insight:</strong> Discover unexpected patterns</li>
                <li><strong>Debugging:</strong> Detect data leakage</li>
            </ul>
            <p style="margin-top: 15px;"><strong>How it works:</strong> Measures how much each feature decreases impurity (Gini) across all trees</p>
        </div>
        <div class="card">
            <h4>Visualizing Feature Importance</h4>
            <div class="code-table" style="margin-top: 10px;">
                <div class="code-table-content">
                    <code>import matplotlib.pyplot as plt

# Get feature importances
importances = model.feature_importances_
features = X.columns

# Sort and plot
sorted_idx = importances.argsort()
plt.barh(features[sorted_idx], importances[sorted_idx])
plt.xlabel('Feature Importance')
plt.title('Random Forest Feature Importance')
plt.tight_layout()
plt.show()</code>
                </div>
            </div>
        </div>
    </div>
    <div class="highlight" style="margin-top: 15px;">
        <p><strong>Tip:</strong> Use <code>permutation_importance</code> from sklearn for model-agnostic importance (works with any model!)</p>
    </div>
</div>

<!-- Slide: Random Forest - Hyperparameter Tuning -->
<div class="slide" id="slide35">
    <span class="slide-number">35</span>
    <h2>Random Forest - Hyperparameter Tuning</h2>
    <p>Key parameters to optimize for best performance</p>
    <div class="two-column">
        <div class="card">
            <h4>Key Hyperparameters</h4>
            <table style="width: 100%; font-size: 0.8em;">
                <tr style="background: rgba(197, 212, 90, 0.2);">
                    <th style="padding: 8px;">Parameter</th>
                    <th style="padding: 8px;">Effect</th>
                </tr>
                <tr>
                    <td style="padding: 6px;"><code>n_estimators</code></td>
                    <td style="padding: 6px;">More trees → more stable (100-500)</td>
                </tr>
                <tr style="background: rgba(255,255,255,0.05);">
                    <td style="padding: 6px;"><code>max_depth</code></td>
                    <td style="padding: 6px;">Deeper → more complex (5-20)</td>
                </tr>
                <tr>
                    <td style="padding: 6px;"><code>max_features</code></td>
                    <td style="padding: 6px;">Features per split ('sqrt', 'log2')</td>
                </tr>
                <tr style="background: rgba(255,255,255,0.05);">
                    <td style="padding: 6px;"><code>min_samples_leaf</code></td>
                    <td style="padding: 6px;">Min samples in leaf (1-10)</td>
                </tr>
            </table>
        </div>
        <div class="card">
            <h4>GridSearchCV Example</h4>
            <div class="code-table" style="margin-top: 10px;">
                <div class="code-table-content">
                    <code>from sklearn.model_selection import GridSearchCV

param_grid = {
    'n_estimators': [100, 200, 500],
    'max_depth': [5, 10, 15, None],
    'max_features': ['sqrt', 'log2'],
    'min_samples_leaf': [1, 2, 5]
}

grid = GridSearchCV(
    RandomForestClassifier(),
    param_grid, cv=5, n_jobs=-1
)
grid.fit(X_train, y_train)
print(f"Best: {grid.best_params_}")</code>
                </div>
            </div>
        </div>
    </div>
    <div class="highlight" style="margin-top: 15px;">
        <p><strong>Out-of-Bag Error:</strong> Set <code>oob_score=True</code> to get a free validation score without a separate test set!</p>
    </div>
</div>

<!-- Slide: Unsupervised Learning Introduction -->
<div class="slide" id="slide35a">
    <span class="slide-number">35a</span>
    <h2>Unsupervised Learning</h2>
    <p>Finding hidden patterns in data without labels</p>
    <div class="two-column">
        <div class="card">
            <h4>What Makes It Different?</h4>
            <table style="width: 100%; font-size: 0.85em; margin-top: 10px;">
                <tr style="background: rgba(81,207,102,0.2);">
                    <th style="padding: 8px;">Supervised</th>
                    <th style="padding: 8px;">Unsupervised</th>
                </tr>
                <tr>
                    <td style="padding: 8px;">Has labels (X, y)</td>
                    <td style="padding: 8px;">No labels (X only)</td>
                </tr>
                <tr style="background: rgba(255,255,255,0.05);">
                    <td style="padding: 8px;">Predict outcomes</td>
                    <td style="padding: 8px;">Find structure</td>
                </tr>
                <tr>
                    <td style="padding: 8px;">"Is this spam?"</td>
                    <td style="padding: 8px;">"What groups exist?"</td>
                </tr>
            </table>
            <h4 style="margin-top: 20px;">Common Tasks</h4>
            <ul style="font-size: 0.9em;">
                <li><strong>Clustering:</strong> Group similar items</li>
                <li><strong>Dimensionality Reduction:</strong> Compress features</li>
                <li><strong>Anomaly Detection:</strong> Find outliers</li>
            </ul>
        </div>
        <div class="card">
            <h4>Real-World Applications</h4>
            <ul>
                <li><strong>Customer Segmentation:</strong> Group customers by behavior for targeted marketing</li>
                <li><strong>Document Clustering:</strong> Organize articles by topic</li>
                <li><strong>Image Compression:</strong> Reduce colors using K-Means</li>
                <li><strong>Anomaly Detection:</strong> Fraud detection, network intrusion</li>
                <li><strong>Recommendation:</strong> "Customers like you also bought..."</li>
            </ul>
            <div class="highlight" style="margin-top: 15px;">
                <p><strong>Key Insight:</strong> No "right answer" to evaluate against - use domain knowledge and metrics like silhouette score.</p>
            </div>
        </div>
    </div>
</div>

<!-- Slide: K-Means Clustering Introduction -->
<div class="slide" id="slide35b">
    <span class="slide-number">35b</span>
    <h2>K-Means Clustering</h2>
    <p>The most popular clustering algorithm - simple, fast, and effective</p>
    <div class="two-column">
        <div class="card">
            <h4>How It Works</h4>
            <ol style="font-size: 0.9em;">
                <li><strong>Choose K:</strong> Number of clusters</li>
                <li><strong>Initialize:</strong> Place K random centroids</li>
                <li><strong>Assign:</strong> Each point → nearest centroid</li>
                <li><strong>Update:</strong> Move centroids to cluster means</li>
                <li><strong>Repeat:</strong> Until centroids stop moving</li>
            </ol>
            <div class="code-table" style="margin-top: 15px;">
                <div class="code-table-content">
                    <code>from sklearn.cluster import KMeans

# Create K-Means with 3 clusters
kmeans = KMeans(n_clusters=3, random_state=42)

# Fit and predict cluster labels
labels = kmeans.fit_predict(X)

# Get cluster centers
centers = kmeans.cluster_centers_</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>Key Concepts</h4>
            <ul>
                <li><strong>Centroid:</strong> Center point of a cluster</li>
                <li><strong>Inertia:</strong> Sum of squared distances to centroids (lower = tighter clusters)</li>
                <li><strong>K:</strong> Number of clusters (you choose!)</li>
            </ul>
            <h4 style="margin-top: 15px;">Pros & Cons</h4>
            <p style="color: #51cf66;"><strong>Pros:</strong></p>
            <ul style="font-size: 0.85em;">
                <li>Fast and scalable</li>
                <li>Easy to understand</li>
                <li>Works well on spherical clusters</li>
            </ul>
            <p style="color: #ff6b6b; margin-top: 10px;"><strong>Cons:</strong></p>
            <ul style="font-size: 0.85em;">
                <li>Must choose K in advance</li>
                <li>Sensitive to initialization</li>
                <li>Assumes spherical clusters</li>
            </ul>
        </div>
    </div>
</div>

<!-- Slide: K-Means Algorithm Steps Visualization -->
<div class="slide" id="slide35c">
    <span class="slide-number">35c</span>
    <h2>K-Means: Step-by-Step</h2>
    <p>Watch how the algorithm converges to find clusters</p>
    <div style="display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin-top: 15px;">
        <!-- Step 1: Initial Data -->
        <div style="text-align: center;">
            <svg viewBox="0 0 180 180" style="width: 500px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <text x="90" y="18" fill="#ffd700" font-size="12" text-anchor="middle" font-weight="bold">Step 1: Raw Data</text>
                <!-- Cluster 1 points (will be blue) -->
                <circle cx="40" cy="50" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="55" cy="65" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="35" cy="70" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="50" cy="45" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="60" cy="55" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <!-- Cluster 2 points (will be green) -->
                <circle cx="130" cy="55" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="145" cy="70" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="140" cy="45" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="155" cy="60" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <!-- Cluster 3 points (will be red) -->
                <circle cx="85" cy="130" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="100" cy="145" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="95" cy="120" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="75" cy="140" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="110" cy="135" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <text x="90" y="170" fill="rgba(255,255,255,0.6)" font-size="12" text-anchor="middle">No labels yet</text>
            </svg>
        </div>

        <!-- Step 2: Random Centroids -->
        <div style="text-align: center;">
            <svg viewBox="0 0 180 180" style="width: 500px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <text x="90" y="18" fill="#ffd700" font-size="12" text-anchor="middle" font-weight="bold">Step 2: Init Centroids</text>
                <!-- Same points -->
                <circle cx="40" cy="50" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="55" cy="65" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="35" cy="70" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="50" cy="45" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="60" cy="55" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="130" cy="55" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="145" cy="70" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="140" cy="45" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="155" cy="60" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="85" cy="130" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="100" cy="145" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="95" cy="120" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="75" cy="140" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <circle cx="110" cy="135" r="5" fill="white" stroke="rgba(255,255,255,0.5)"/>
                <!-- Random centroids (stars) -->
                <polygon points="70,80 73,90 83,90 75,96 78,106 70,100 62,106 65,96 57,90 67,90" fill="#4a90d9" stroke="white" stroke-width="1"/>
                <polygon points="120,110 123,120 133,120 125,126 128,136 120,130 112,136 115,126 107,120 117,120" fill="#51cf66" stroke="white" stroke-width="1"/>
                <polygon points="90,60 93,70 103,70 95,76 98,86 90,80 82,86 85,76 77,70 87,70" fill="#ff6b6b" stroke="white" stroke-width="1"/>
                <text x="90" y="170" fill="rgba(255,255,255,0.6)" font-size="12" text-anchor="middle">Random positions</text>
            </svg>
        </div>

        <!-- Step 3: Assign Points -->
        <div style="text-align: center;">
            <svg viewBox="0 0 180 180" style="width: 500px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <text x="90" y="18" fill="#ffd700" font-size="12" text-anchor="middle" font-weight="bold">Step 3: Assign Points</text>
                <!-- Points colored by nearest centroid -->
                <circle cx="40" cy="50" r="5" fill="#4a90d9" stroke="white" stroke-width="1.5"/>
                <circle cx="55" cy="65" r="5" fill="#4a90d9" stroke="white" stroke-width="1.5"/>
                <circle cx="35" cy="70" r="5" fill="#4a90d9" stroke="white" stroke-width="1.5"/>
                <circle cx="50" cy="45" r="5" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="60" cy="55" r="5" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="130" cy="55" r="5" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="145" cy="70" r="5" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="140" cy="45" r="5" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="155" cy="60" r="5" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="85" cy="130" r="5" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="100" cy="145" r="5" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="95" cy="120" r="5" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="75" cy="140" r="5" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="110" cy="135" r="5" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <!-- Centroids -->
                <polygon points="70,80 73,90 83,90 75,96 78,106 70,100 62,106 65,96 57,90 67,90" fill="#4a90d9" stroke="white" stroke-width="2"/>
                <polygon points="120,110 123,120 133,120 125,126 128,136 120,130 112,136 115,126 107,120 117,120" fill="#51cf66" stroke="white" stroke-width="2"/>
                <polygon points="90,60 93,70 103,70 95,76 98,86 90,80 82,86 85,76 77,70 87,70" fill="#ff6b6b" stroke="white" stroke-width="2"/>
                <text x="90" y="170" fill="rgba(255,255,255,0.6)" font-size="12" text-anchor="middle">Wrong assignments!</text>
            </svg>
        </div>

        <!-- Step 4: Final Result -->
        <div style="text-align: center;">
            <svg viewBox="0 0 180 180" style="width: 500px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <text x="90" y="18" fill="#51cf66" font-size="12" text-anchor="middle" font-weight="bold">Final: Converged!</text>
                <!-- Points correctly clustered -->
                <circle cx="40" cy="50" r="5" fill="#4a90d9" stroke="white" stroke-width="1.5"/>
                <circle cx="55" cy="65" r="5" fill="#4a90d9" stroke="white" stroke-width="1.5"/>
                <circle cx="35" cy="70" r="5" fill="#4a90d9" stroke="white" stroke-width="1.5"/>
                <circle cx="50" cy="45" r="5" fill="#4a90d9" stroke="white" stroke-width="1.5"/>
                <circle cx="60" cy="55" r="5" fill="#4a90d9" stroke="white" stroke-width="1.5"/>
                <circle cx="130" cy="55" r="5" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="145" cy="70" r="5" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="140" cy="45" r="5" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="155" cy="60" r="5" fill="#51cf66" stroke="white" stroke-width="1.5"/>
                <circle cx="85" cy="130" r="5" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="100" cy="145" r="5" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="95" cy="120" r="5" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="75" cy="140" r="5" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <circle cx="110" cy="135" r="5" fill="#ff6b6b" stroke="white" stroke-width="1.5"/>
                <!-- Final centroids at cluster centers -->
                <polygon points="48,57 51,67 61,67 53,73 56,83 48,77 40,83 43,73 35,67 45,67" fill="#4a90d9" stroke="white" stroke-width="2"/>
                <polygon points="142,57 145,67 155,67 147,73 150,83 142,77 134,83 137,73 129,67 139,67" fill="#51cf66" stroke="white" stroke-width="2"/>
                <polygon points="93,134 96,144 106,144 98,150 101,160 93,154 85,160 88,150 80,144 90,144" fill="#ff6b6b" stroke="white" stroke-width="2"/>
                <text x="90" y="170" fill="rgba(255,255,255,0.6)" font-size="12" text-anchor="middle">3 clusters found!</text>
            </svg>
        </div>
    </div>
    <div class="highlight" style="margin-top: 15px;">
        <p><strong>Convergence:</strong> Algorithm stops when centroids no longer move (or move less than a threshold). Typically converges in 10-20 iterations.</p>
    </div>
</div>

<!-- Slide: K-Means Before/After Visualization -->
<div class="slide" id="slide35d">
    <span class="slide-number">35d</span>
    <h2>K-Means: Before and After</h2>
    <p>Customer segmentation example - grouping customers by spending behavior</p>
    <div class="two-column">
        <div class="card" style="text-align: center;">
            <h4>Before: Unlabeled Data</h4>
            <svg viewBox="0 0 300 250" style="width: 100%; max-width: 700px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Axes -->
                <line x1="40" y1="220" x2="280" y2="220" stroke="white" stroke-width="2"/>
                <line x1="40" y1="220" x2="40" y2="30" stroke="white" stroke-width="2"/>
                <text x="160" y="245" fill="white" font-size="12" text-anchor="middle">Annual Income ($K)</text>
                <text x="15" y="125" fill="white" font-size="12" text-anchor="middle" transform="rotate(-90, 15, 125)">Spending Score</text>

                <!-- All points same color (unlabeled) -->
                <!-- Low income, low spending -->
                <circle cx="60" cy="180" r="5" fill="white" opacity="0.8"/>
                <circle cx="75" cy="195" r="5" fill="white" opacity="0.8"/>
                <circle cx="55" cy="170" r="5" fill="white" opacity="0.8"/>
                <circle cx="80" cy="185" r="5" fill="white" opacity="0.8"/>
                <circle cx="70" cy="175" r="5" fill="white" opacity="0.8"/>
                <!-- Low income, high spending -->
                <circle cx="60" cy="60" r="5" fill="white" opacity="0.8"/>
                <circle cx="75" cy="50" r="5" fill="white" opacity="0.8"/>
                <circle cx="55" cy="70" r="5" fill="white" opacity="0.8"/>
                <circle cx="85" cy="55" r="5" fill="white" opacity="0.8"/>
                <circle cx="65" cy="45" r="5" fill="white" opacity="0.8"/>
                <!-- High income, low spending -->
                <circle cx="230" cy="180" r="5" fill="white" opacity="0.8"/>
                <circle cx="250" cy="190" r="5" fill="white" opacity="0.8"/>
                <circle cx="240" cy="175" r="5" fill="white" opacity="0.8"/>
                <circle cx="260" cy="185" r="5" fill="white" opacity="0.8"/>
                <circle cx="220" cy="195" r="5" fill="white" opacity="0.8"/>
                <!-- High income, high spending -->
                <circle cx="230" cy="55" r="5" fill="white" opacity="0.8"/>
                <circle cx="250" cy="65" r="5" fill="white" opacity="0.8"/>
                <circle cx="245" cy="50" r="5" fill="white" opacity="0.8"/>
                <circle cx="260" cy="60" r="5" fill="white" opacity="0.8"/>
                <circle cx="235" cy="70" r="5" fill="white" opacity="0.8"/>
                <!-- Middle income, middle spending -->
                <circle cx="150" cy="120" r="5" fill="white" opacity="0.8"/>
                <circle cx="160" cy="130" r="5" fill="white" opacity="0.8"/>
                <circle cx="145" cy="115" r="5" fill="white" opacity="0.8"/>
                <circle cx="170" cy="125" r="5" fill="white" opacity="0.8"/>
                <circle cx="155" cy="135" r="5" fill="white" opacity="0.8"/>

                <text x="160" y="20" fill="rgba(255,255,255,0.6)" font-size="12" text-anchor="middle">Who are our customer segments?</text>
            </svg>
            <p style="font-size: 0.85em; margin-top: 10px; color: rgba(255,255,255,0.7);">200 customers, no clear groups visible</p>
        </div>
        <div class="card" style="text-align: center;">
            <h4>After: K-Means (K=5)</h4>
            <svg viewBox="0 0 300 250" style="width: 100%; max-width: 700px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Axes -->
                <line x1="40" y1="220" x2="280" y2="220" stroke="white" stroke-width="2"/>
                <line x1="40" y1="220" x2="40" y2="30" stroke="white" stroke-width="2"/>
                <text x="160" y="245" fill="white" font-size="12" text-anchor="middle">Annual Income ($K)</text>
                <text x="15" y="125" fill="white" font-size="12" text-anchor="middle" transform="rotate(-90, 15, 125)">Spending Score</text>

                <!-- Cluster 1: Budget Conscious (low income, low spending) - Blue -->
                <circle cx="60" cy="180" r="5" fill="#4a90d9" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" repeatCount="indefinite"/>
                </circle>
                <circle cx="75" cy="195" r="5" fill="#4a90d9" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="0.2s" repeatCount="indefinite"/>
                </circle>
                <circle cx="55" cy="170" r="5" fill="#4a90d9" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="0.4s" repeatCount="indefinite"/>
                </circle>
                <circle cx="80" cy="185" r="5" fill="#4a90d9" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="0.1s" repeatCount="indefinite"/>
                </circle>
                <circle cx="70" cy="175" r="5" fill="#4a90d9" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="0.3s" repeatCount="indefinite"/>
                </circle>
                <polygon points="68,182 70,188 76,188 71,192 73,198 68,194 63,198 65,192 60,188 66,188" fill="#4a90d9" stroke="white" stroke-width="1.5">
                    <animate attributeName="opacity" values="1;0.6;1" dur="1.5s" repeatCount="indefinite"/>
                </polygon>

                <!-- Cluster 2: Spenders (low income, high spending) - Magenta -->
                <circle cx="60" cy="60" r="5" fill="#e040fb" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="0.5s" repeatCount="indefinite"/>
                </circle>
                <circle cx="75" cy="50" r="5" fill="#e040fb" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="0.7s" repeatCount="indefinite"/>
                </circle>
                <circle cx="55" cy="70" r="5" fill="#e040fb" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="0.6s" repeatCount="indefinite"/>
                </circle>
                <circle cx="85" cy="55" r="5" fill="#e040fb" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="0.8s" repeatCount="indefinite"/>
                </circle>
                <circle cx="65" cy="45" r="5" fill="#e040fb" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="0.9s" repeatCount="indefinite"/>
                </circle>
                <polygon points="68,56 70,62 76,62 71,66 73,72 68,68 63,72 65,66 60,62 66,62" fill="#e040fb" stroke="white" stroke-width="1.5">
                    <animate attributeName="opacity" values="1;0.6;1" dur="1.5s" begin="0.3s" repeatCount="indefinite"/>
                </polygon>

                <!-- Cluster 3: Savers (high income, low spending) - Orange -->
                <circle cx="230" cy="180" r="5" fill="#ff9800" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="1s" repeatCount="indefinite"/>
                </circle>
                <circle cx="250" cy="190" r="5" fill="#ff9800" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="1.1s" repeatCount="indefinite"/>
                </circle>
                <circle cx="240" cy="175" r="5" fill="#ff9800" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="1.2s" repeatCount="indefinite"/>
                </circle>
                <circle cx="260" cy="185" r="5" fill="#ff9800" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="1.3s" repeatCount="indefinite"/>
                </circle>
                <circle cx="220" cy="195" r="5" fill="#ff9800" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="1.4s" repeatCount="indefinite"/>
                </circle>
                <polygon points="240,185 242,191 248,191 243,195 245,201 240,197 235,201 237,195 232,191 238,191" fill="#ff9800" stroke="white" stroke-width="1.5">
                    <animate attributeName="opacity" values="1;0.6;1" dur="1.5s" begin="0.6s" repeatCount="indefinite"/>
                </polygon>

                <!-- Cluster 4: Premium (high income, high spending) - Green -->
                <circle cx="230" cy="55" r="5" fill="#51cf66" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="1.5s" repeatCount="indefinite"/>
                </circle>
                <circle cx="250" cy="65" r="5" fill="#51cf66" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="1.6s" repeatCount="indefinite"/>
                </circle>
                <circle cx="245" cy="50" r="5" fill="#51cf66" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="1.7s" repeatCount="indefinite"/>
                </circle>
                <circle cx="260" cy="60" r="5" fill="#51cf66" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="1.8s" repeatCount="indefinite"/>
                </circle>
                <circle cx="235" cy="70" r="5" fill="#51cf66" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="1.9s" repeatCount="indefinite"/>
                </circle>
                <polygon points="244,60 246,66 252,66 247,70 249,76 244,72 239,76 241,70 236,66 242,66" fill="#51cf66" stroke="white" stroke-width="1.5">
                    <animate attributeName="opacity" values="1;0.6;1" dur="1.5s" begin="0.9s" repeatCount="indefinite"/>
                </polygon>

                <!-- Cluster 5: Average (middle) - Red -->
                <circle cx="150" cy="120" r="5" fill="#ff6b6b" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="0.15s" repeatCount="indefinite"/>
                </circle>
                <circle cx="160" cy="130" r="5" fill="#ff6b6b" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="0.35s" repeatCount="indefinite"/>
                </circle>
                <circle cx="145" cy="115" r="5" fill="#ff6b6b" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="0.55s" repeatCount="indefinite"/>
                </circle>
                <circle cx="170" cy="125" r="5" fill="#ff6b6b" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="0.75s" repeatCount="indefinite"/>
                </circle>
                <circle cx="155" cy="135" r="5" fill="#ff6b6b" stroke="white" stroke-width="1">
                    <animate attributeName="r" values="5;6;5" dur="2s" begin="0.95s" repeatCount="indefinite"/>
                </circle>
                <polygon points="156,124 158,130 164,130 159,134 161,140 156,136 151,140 153,134 148,130 154,130" fill="#ff6b6b" stroke="white" stroke-width="1.5">
                    <animate attributeName="opacity" values="1;0.6;1" dur="1.5s" begin="1.2s" repeatCount="indefinite"/>
                </polygon>

                <text x="160" y="20" fill="rgba(255,255,255,0.8)" font-size="12" text-anchor="middle">5 distinct customer segments!</text>
            </svg>
            <p style="font-size: 0.85em; margin-top: 10px; color: rgba(255,255,255,0.7);">Stars = cluster centroids</p>
        </div>
    </div>
    <div style="display: flex; justify-content: center; gap: 10px; margin-top: 15px; flex-wrap: wrap;">
        <span style="display: inline-flex; align-items: center; font-size: 0.8em;"><span style="width: 12px; height: 12px; background: #4a90d9; border-radius: 50%; margin-right: 5px;"></span>Budget Conscious</span>
        <span style="display: inline-flex; align-items: center; font-size: 0.8em;"><span style="width: 12px; height: 12px; background: #e040fb; border-radius: 50%; margin-right: 5px;"></span>Careless Spenders</span>
        <span style="display: inline-flex; align-items: center; font-size: 0.8em;"><span style="width: 12px; height: 12px; background: #ff9800; border-radius: 50%; margin-right: 5px;"></span>Careful Savers</span>
        <span style="display: inline-flex; align-items: center; font-size: 0.8em;"><span style="width: 12px; height: 12px; background: #51cf66; border-radius: 50%; margin-right: 5px;"></span>Premium Customers</span>
        <span style="display: inline-flex; align-items: center; font-size: 0.8em;"><span style="width: 12px; height: 12px; background: #ff6b6b; border-radius: 50%; margin-right: 5px;"></span>Average</span>
    </div>
</div>

<!-- Slide: Choosing K - Elbow Method -->
<div class="slide" id="slide35e">
    <span class="slide-number">35e</span>
    <h2>Choosing K: The Elbow Method</h2>
    <p>How to find the optimal number of clusters</p>
    <div class="two-column">
        <div class="card" style="text-align: center;">
            <h4>Elbow Plot</h4>
            <svg viewBox="0 0 300 220" style="width: 100%; max-width: 700px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Axes -->
                <line x1="50" y1="180" x2="280" y2="180" stroke="white" stroke-width="2"/>
                <line x1="50" y1="180" x2="50" y2="30" stroke="white" stroke-width="2"/>
                <text x="165" y="205" fill="white" font-size="12" text-anchor="middle">Number of Clusters (K)</text>
                <text x="20" y="105" fill="white" font-size="12" text-anchor="middle" transform="rotate(-90, 20, 105)">Inertia (WCSS)</text>

                <!-- X-axis labels -->
                <text x="70" y="195" fill="white" font-size="12">1</text>
                <text x="110" y="195" fill="white" font-size="12">2</text>
                <text x="150" y="195" fill="white" font-size="12">3</text>
                <text x="190" y="195" fill="white" font-size="12">4</text>
                <text x="230" y="195" fill="white" font-size="12">5</text>
                <text x="270" y="195" fill="white" font-size="12">6</text>

                <!-- Elbow curve with drawing animation -->
                <path d="M 70 50 L 110 90 L 150 130 L 190 150 L 230 160 L 270 165" fill="none" stroke="#00d4ff" stroke-width="3" stroke-dasharray="300" stroke-dashoffset="300">
                    <animate attributeName="stroke-dashoffset" values="300;0;0" dur="6s" repeatCount="indefinite" keyTimes="0;0.5;1"/>
                </path>

                <!-- Points on curve - appear sequentially -->
                <circle cx="70" cy="50" r="5" fill="#00d4ff" stroke="white" stroke-width="2" opacity="0">
                    <animate attributeName="opacity" values="0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.05;0.1;1"/>
                    <animate attributeName="r" values="0;7;5;5" dur="6s" repeatCount="indefinite" keyTimes="0;0.05;0.12;1"/>
                </circle>
                <circle cx="110" cy="90" r="5" fill="#00d4ff" stroke="white" stroke-width="2" opacity="0">
                    <animate attributeName="opacity" values="0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.12;0.17;1"/>
                    <animate attributeName="r" values="0;7;5;5" dur="6s" repeatCount="indefinite" keyTimes="0;0.12;0.19;1"/>
                </circle>
                <circle cx="150" cy="130" r="5" fill="#ffd700" stroke="white" stroke-width="3" opacity="0">
                    <animate attributeName="opacity" values="0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.22;0.27;1"/>
                    <animate attributeName="r" values="0;9;6;8;6;8;6" dur="6s" repeatCount="indefinite" keyTimes="0;0.22;0.3;0.5;0.6;0.7;1"/>
                </circle>
                <circle cx="190" cy="150" r="5" fill="#00d4ff" stroke="white" stroke-width="2" opacity="0">
                    <animate attributeName="opacity" values="0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.32;0.37;1"/>
                    <animate attributeName="r" values="0;7;5;5" dur="6s" repeatCount="indefinite" keyTimes="0;0.32;0.39;1"/>
                </circle>
                <circle cx="230" cy="160" r="5" fill="#00d4ff" stroke="white" stroke-width="2" opacity="0">
                    <animate attributeName="opacity" values="0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.4;0.45;1"/>
                    <animate attributeName="r" values="0;7;5;5" dur="6s" repeatCount="indefinite" keyTimes="0;0.4;0.47;1"/>
                </circle>
                <circle cx="270" cy="165" r="5" fill="#00d4ff" stroke="white" stroke-width="2" opacity="0">
                    <animate attributeName="opacity" values="0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.48;0.53;1"/>
                    <animate attributeName="r" values="0;7;5;5" dur="6s" repeatCount="indefinite" keyTimes="0;0.48;0.55;1"/>
                </circle>

                <!-- Elbow annotation - appears after elbow point -->
                <line x1="150" y1="130" x2="150" y2="180" stroke="#ffd700" stroke-width="2" stroke-dasharray="4,4" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.27;0.35;0.4;1"/>
                </line>
                <text x="150" y="125" fill="#ffd700" font-size="12" text-anchor="middle" font-weight="bold" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;0.5;1;0.5;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.35;0.4;0.45;0.5;0.55;0.6;0.65;1"/>
                    ELBOW
                </text>
                <text x="175" y="115" fill="#ffd700" font-size="12" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.4;0.45;0.5;1"/>
                    K=3
                </text>
            </svg>
        </div>
        <div class="card">
            <h4>How It Works</h4>
            <ol style="font-size: 0.9em;">
                <li>Run K-Means for K = 1, 2, 3, ... n</li>
                <li>Calculate <strong>inertia</strong> (within-cluster sum of squares)</li>
                <li>Plot inertia vs K</li>
                <li>Find the "elbow" - where improvement slows</li>
            </ol>
            <div class="code-table" style="margin-top: 15px;">
                <div class="code-table-content">
                    <code>inertias = []
for k in range(1, 11):
    kmeans = KMeans(n_clusters=k)
    kmeans.fit(X)
    inertias.append(kmeans.inertia_)

plt.plot(range(1, 11), inertias, 'bo-')
plt.xlabel('K')
plt.ylabel('Inertia')
plt.title('Elbow Method')</code>
                </div>
            </div>
            <div class="highlight" style="margin-top: 10px;">
                <p><strong>Rule:</strong> Choose K at the elbow - adding more clusters doesn't help much after this point!</p>
            </div>
        </div>
    </div>
</div>

<!-- Slide: K-Means Distance Calculation -->
<div class="slide" id="slide35f">
    <span class="slide-number">35f</span>
    <h2>K-Means: How Distance is Calculated</h2>
    <p>The algorithm uses Euclidean distance to assign points to clusters</p>
    <div class="two-column">
        <div class="card">
            <h4>Euclidean Distance Formula</h4>
            <div class="formula" style="font-size: 1em; margin: 15px 0;">$$d = \sqrt{\sum_{i=1}^{n}(x_i - c_i)^2}$$</div>
            <p>For 2D: distance between point (x₁, y₁) and centroid (c₁, c₂):</p>
            <div class="formula" style="font-size: 0.95em; margin: 10px 0;">$$d = \sqrt{(x_1-c_1)^2 + (y_1-c_2)^2}$$</div>

            <h4 style="margin-top: 20px;">Example Calculation</h4>
            <div style="background: rgba(0,0,0,0.3); padding: 12px; border-radius: 8px; font-size: 0.85em;">
                <p>Point: (4, 5)</p>
                <p>Centroid A: (2, 3) → d = √[(4-2)² + (5-3)²] = √8 = <strong style="color: #51cf66;">2.83</strong></p>
                <p>Centroid B: (8, 6) → d = √[(4-8)² + (5-6)²] = √17 = <strong style="color: #ff6b6b;">4.12</strong></p>
                <p style="margin-top: 10px;"><strong>Result:</strong> Point assigned to Centroid A (closer)</p>
            </div>
        </div>
        <div class="card" style="text-align: center;">
            <h4>Visual: Distance to Centroids</h4>
            <svg viewBox="0 0 250 220" style="width: 100%; max-width: 650px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Grid -->
                <defs>
                    <pattern id="kmgrid" width="25" height="25" patternUnits="userSpaceOnUse">
                        <path d="M 25 0 L 0 0 0 25" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
                    </pattern>
                </defs>
                <rect x="25" y="20" width="200" height="175" fill="url(#kmgrid)"/>

                <!-- Axes -->
                <line x1="25" y1="195" x2="225" y2="195" stroke="white" stroke-width="1.5"/>
                <line x1="25" y1="195" x2="25" y2="20" stroke="white" stroke-width="1.5"/>

                <!-- Axis labels -->
                <text x="50" y="210" fill="white" font-size="12">2</text>
                <text x="100" y="210" fill="white" font-size="12">4</text>
                <text x="150" y="210" fill="white" font-size="12">6</text>
                <text x="200" y="210" fill="white" font-size="12">8</text>

                <!-- Point (4, 5) - with pulse animation -->
                <circle cx="100" cy="95" r="8" fill="white" stroke="#ffd700" stroke-width="3">
                    <animate attributeName="r" values="8;10;8" dur="2s" repeatCount="indefinite"/>
                    <animate attributeName="stroke-width" values="3;4;3" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="110" y="88" fill="#ffd700" font-size="12" font-weight="bold">(4,5)</text>

                <!-- Centroid A (2, 3) -->
                <polygon points="50,145 53,155 63,155 55,161 58,171 50,165 42,171 45,161 37,155 47,155" fill="#51cf66" stroke="white" stroke-width="2">
                    <animate attributeName="opacity" values="1;1;1;1;0.6;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.5;0.55;0.6;0.65;0.7;1"/>
                </polygon>
                <text x="35" y="180" fill="#51cf66" font-size="12">A (2,3)</text>

                <!-- Centroid B (8, 6) -->
                <polygon points="200,70 203,80 213,80 205,86 208,96 200,90 192,96 195,86 187,80 197,80" fill="#ff6b6b" stroke="white" stroke-width="2"/>
                <text x="205" y="65" fill="#ff6b6b" font-size="12">B (8,6)</text>

                <!-- Distance line to A - draws out -->
                <line x1="100" y1="95" x2="50" y2="145" stroke="#51cf66" stroke-width="2" stroke-dasharray="80" stroke-dashoffset="80">
                    <animate attributeName="stroke-dashoffset" values="80;80;0;0" dur="6s" repeatCount="indefinite" keyTimes="0;0.1;0.3;1"/>
                </line>

                <!-- Pulse traveling to A -->
                <circle r="5" fill="#51cf66" opacity="0">
                    <animate attributeName="cx" values="100;75;50" dur="0.5s" begin="0.6s;6.6s;12.6s" repeatCount="indefinite"/>
                    <animate attributeName="cy" values="95;120;145" dur="0.5s" begin="0.6s;6.6s;12.6s" repeatCount="indefinite"/>
                    <animate attributeName="opacity" values="0;1;0" dur="0.5s" begin="0.6s;6.6s;12.6s" repeatCount="indefinite"/>
                </circle>

                <!-- Distance line to B - draws out -->
                <line x1="100" y1="95" x2="200" y2="70" stroke="#ff6b6b" stroke-width="2" stroke-dasharray="110" stroke-dashoffset="110">
                    <animate attributeName="stroke-dashoffset" values="110;110;0;0" dur="6s" repeatCount="indefinite" keyTimes="0;0.15;0.4;1"/>
                </line>

                <!-- Pulse traveling to B -->
                <circle r="5" fill="#ff6b6b" opacity="0">
                    <animate attributeName="cx" values="100;150;200" dur="0.6s" begin="0.9s;6.9s;12.9s" repeatCount="indefinite"/>
                    <animate attributeName="cy" values="95;82;70" dur="0.6s" begin="0.9s;6.9s;12.9s" repeatCount="indefinite"/>
                    <animate attributeName="opacity" values="0;1;0" dur="0.6s" begin="0.9s;6.9s;12.9s" repeatCount="indefinite"/>
                </circle>

                <!-- Distance labels - appear after lines drawn -->
                <text x="60" y="115" fill="#51cf66" font-size="12" font-weight="bold" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.3;0.35;0.4;1"/>
                    2.83
                </text>
                <text x="155" y="75" fill="#ff6b6b" font-size="12" font-weight="bold" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.4;0.45;0.5;1"/>
                    4.12
                </text>

                <!-- Winner highlight - green circle around A -->
                <circle cx="50" cy="158" r="18" fill="none" stroke="#51cf66" stroke-width="3" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0.8;0.4;0.8;0.8" dur="6s" repeatCount="indefinite" keyTimes="0;0.5;0.55;0.6;0.65;0.7;0.8;0.9;1"/>
                    <animate attributeName="r" values="18;18;18;18;18;22;20;22;20" dur="6s" repeatCount="indefinite" keyTimes="0;0.5;0.55;0.6;0.65;0.7;0.8;0.9;1"/>
                </circle>
            </svg>
            <p style="font-size: 0.85em; margin-top: 10px;">Point assigned to <span style="color: #51cf66; font-weight: bold;">Centroid A</span> (shorter distance)</p>
        </div>
    </div>
    <div class="highlight" style="margin-top: 15px;">
        <p><strong>Important:</strong> Always <strong>scale your features</strong> before K-Means! Different scales (e.g., age 0-100 vs salary 0-1M) will bias distance calculations.</p>
    </div>
</div>

<!-- Slide: K-Nearest Neighbors -->
<div class="slide" id="slide35g">
    <span class="slide-number">35g</span>
    <h2>K-Nearest Neighbors (KNN)</h2>
    <p>Classification by finding the K closest data points and voting</p>
    <div class="two-column">
        <div class="card" style="text-align: center;">
            <h4>KNN Classification (K=3)</h4>
            <svg viewBox="0 0 350 280" style="width: 100%; max-width: 750px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Axes -->
                <line x1="40" y1="240" x2="320" y2="240" stroke="white" stroke-width="2"/>
                <line x1="40" y1="240" x2="40" y2="30" stroke="white" stroke-width="2"/>
                <text x="180" y="268" fill="white" font-size="12" text-anchor="middle">Feature 1</text>
                <text x="15" y="135" fill="white" font-size="12" text-anchor="middle" transform="rotate(-90, 15, 135)">Feature 2</text>

                <!-- Class A points (Blue circles) -->
                <circle cx="80" cy="180" r="8" fill="#4a90d9" stroke="white" stroke-width="2"/>
                <circle cx="100" cy="160" r="8" fill="#4a90d9" stroke="white" stroke-width="2"/>
                <circle cx="70" cy="140" r="8" fill="#4a90d9" stroke="white" stroke-width="2"/>
                <circle cx="120" cy="190" r="8" fill="#4a90d9" stroke="white" stroke-width="2"/>
                <circle cx="90" cy="120" r="8" fill="#4a90d9" stroke="white" stroke-width="2"/>
                <circle cx="140" cy="150" r="8" fill="#4a90d9" stroke="white" stroke-width="2"/>
                <circle cx="60" cy="200" r="8" fill="#4a90d9" stroke="white" stroke-width="2"/>

                <!-- Class B points (Green squares) -->
                <rect x="232" y="52" width="16" height="16" fill="#51cf66" stroke="white" stroke-width="2"/>
                <rect x="262" y="72" width="16" height="16" fill="#51cf66" stroke="white" stroke-width="2"/>
                <rect x="242" y="92" width="16" height="16" fill="#51cf66" stroke="white" stroke-width="2"/>
                <rect x="282" y="62" width="16" height="16" fill="#51cf66" stroke="white" stroke-width="2"/>
                <rect x="252" y="112" width="16" height="16" fill="#51cf66" stroke="white" stroke-width="2"/>
                <rect x="222" y="82" width="16" height="16" fill="#51cf66" stroke="white" stroke-width="2"/>
                <rect x="272" y="102" width="16" height="16" fill="#51cf66" stroke="white" stroke-width="2"/>

                <!-- New unknown point (appears with animation) -->
                <circle cx="180" cy="130" r="10" fill="#ffd700" stroke="white" stroke-width="3">
                    <animate attributeName="opacity" values="0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.05;0.1;1"/>
                    <animate attributeName="r" values="0;12;10;10" dur="8s" repeatCount="indefinite" keyTimes="0;0.05;0.15;1"/>
                </circle>
                <text x="180" y="115" fill="#ffd700" font-size="11" text-anchor="middle" font-weight="bold">
                    <animate attributeName="opacity" values="0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.1;0.15;1"/>
                    ?
                </text>

                <!-- Expanding search radius circle -->
                <circle cx="180" cy="130" r="0" fill="none" stroke="#ffd700" stroke-width="2" stroke-dasharray="5,3" opacity="0">
                    <animate attributeName="r" values="0;0;0;80;80;80;0" dur="8s" repeatCount="indefinite" keyTimes="0;0.1;0.15;0.35;0.7;0.95;1"/>
                    <animate attributeName="opacity" values="0;0;0.7;0.7;0.7;0;0" dur="8s" repeatCount="indefinite" keyTimes="0;0.1;0.15;0.7;0.9;0.95;1"/>
                </circle>

                <!-- Distance lines to nearest neighbors (appear during search) -->
                <!-- To blue point at (140, 150) - closest -->
                <line x1="180" y1="130" x2="140" y2="150" stroke="#4a90d9" stroke-width="2" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0.9;0.9;0" dur="8s" repeatCount="indefinite" keyTimes="0;0.3;0.35;0.4;0.45;0.9;1"/>
                </line>
                <!-- To green point at (250, 100) - second closest -->
                <line x1="180" y1="130" x2="260" y2="120" stroke="#51cf66" stroke-width="2" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0.9;0.9;0" dur="8s" repeatCount="indefinite" keyTimes="0;0.35;0.4;0.45;0.5;0.55;0.9;1"/>
                </line>
                <!-- To blue point at (100, 160) - third closest -->
                <line x1="180" y1="130" x2="100" y2="160" stroke="#4a90d9" stroke-width="2" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;0.9;0.9;0" dur="8s" repeatCount="indefinite" keyTimes="0;0.4;0.45;0.5;0.55;0.6;0.65;0.9;1"/>
                </line>

                <!-- Neighbor highlight rings -->
                <circle cx="140" cy="150" r="14" fill="none" stroke="#ffd700" stroke-width="2" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;1;1;0" dur="8s" repeatCount="indefinite" keyTimes="0;0.4;0.42;0.45;0.5;0.9;1"/>
                </circle>
                <circle cx="260" cy="120" r="14" fill="none" stroke="#ffd700" stroke-width="2" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;1;1;0" dur="8s" repeatCount="indefinite" keyTimes="0;0.5;0.52;0.55;0.58;0.6;0.9;1"/>
                </circle>
                <circle cx="100" cy="160" r="14" fill="none" stroke="#ffd700" stroke-width="2" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;1;1;0" dur="8s" repeatCount="indefinite" keyTimes="0;0.6;0.62;0.65;0.68;0.7;0.72;0.9;1"/>
                </circle>

                <!-- Vote count display -->
                <rect x="135" y="195" width="90" height="35" rx="5" fill="rgba(0,0,0,0.5)" stroke="white" stroke-width="1" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;0;1;1;0" dur="8s" repeatCount="indefinite" keyTimes="0;0.65;0.68;0.7;0.72;0.74;0.76;0.78;0.95;1"/>
                </rect>
                <text x="180" y="210" fill="white" font-size="10" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;0;1;1;0" dur="8s" repeatCount="indefinite" keyTimes="0;0.65;0.68;0.7;0.72;0.74;0.76;0.78;0.95;1"/>
                    Votes: Blue=2, Green=1
                </text>
                <text x="180" y="225" fill="#4a90d9" font-size="12" text-anchor="middle" font-weight="bold" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;0;1;1;0" dur="8s" repeatCount="indefinite" keyTimes="0;0.65;0.68;0.7;0.72;0.74;0.76;0.78;0.95;1"/>
                    → Class A wins!
                </text>

                <!-- Final classification (point turns blue) -->
                <circle cx="180" cy="130" r="10" fill="#4a90d9" stroke="#ffd700" stroke-width="3" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;1;1;0" dur="8s" repeatCount="indefinite" keyTimes="0;0.7;0.72;0.75;0.78;0.8;0.82;0.85;0.88;0.95;1"/>
                </circle>

                <!-- Legend -->
                <circle cx="60" y="258" r="6" fill="#4a90d9"/>
                <text x="75" y="262" fill="white" font-size="10">Class A</text>
                <rect x="110" y="252" width="12" height="12" fill="#51cf66"/>
                <text x="130" y="262" fill="white" font-size="10">Class B</text>
                <circle cx="175" cy="258" r="6" fill="#ffd700"/>
                <text x="190" y="262" fill="white" font-size="10">Unknown</text>
            </svg>
        </div>
        <div class="card">
            <h4>How KNN Works</h4>
            <ol style="font-size: 0.9em;">
                <li><strong>Store</strong> all training data points</li>
                <li><strong>Receive</strong> new point to classify</li>
                <li><strong>Calculate</strong> distance to all training points</li>
                <li><strong>Find K</strong> nearest neighbors</li>
                <li><strong>Vote:</strong> Majority class wins!</li>
            </ol>
            <div class="code-table" style="margin-top: 15px;">
                <div class="code-table-content">
                    <code>from sklearn.neighbors import KNeighborsClassifier

knn = KNeighborsClassifier(n_neighbors=3)
knn.fit(X_train, y_train)
prediction = knn.predict(new_point)</code>
                </div>
            </div>
            <div class="highlight" style="margin-top: 15px;">
                <p><strong>K-Means vs KNN:</strong></p>
                <ul style="font-size: 0.85em; margin: 5px 0;">
                    <li><strong>K-Means:</strong> Unsupervised clustering (finds groups)</li>
                    <li><strong>KNN:</strong> Supervised classification (predicts labels)</li>
                </ul>
            </div>
            <div style="background: rgba(81, 207, 102, 0.2); padding: 10px; border-radius: 8px; margin-top: 10px;">
                <p style="font-size: 0.85em; margin: 0;"><strong>Choosing K:</strong> Odd numbers avoid ties. Smaller K = more flexible, larger K = smoother boundaries.</p>
            </div>
        </div>
    </div>
</div>

<!-- Slide: Algorithm Selection Guide -->
<div class="slide" id="slide36">
    <span class="slide-number">36</span>
    <h2>Choosing the Right Algorithm</h2>
    <p>A practical guide for selecting ML algorithms</p>
    <table style="width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 0.85em;">
        <tr style="background: rgba(197, 212, 90, 0.3);">
            <th style="padding: 12px; text-align: left; border: 1px solid rgba(255,255,255,0.2);">Algorithm</th>
            <th style="padding: 12px; text-align: left; border: 1px solid rgba(255,255,255,0.2);">Best For</th>
            <th style="padding: 12px; text-align: left; border: 1px solid rgba(255,255,255,0.2);">Data Size</th>
            <th style="padding: 12px; text-align: left; border: 1px solid rgba(255,255,255,0.2);">Interpretable?</th>
        </tr>
        <tr>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">Logistic Regression</td>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">Linear relationships, probabilities</td>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">Any</td>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">✓ Yes</td>
        </tr>
        <tr style="background: rgba(255,255,255,0.05);">
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">SVM</td>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">High dimensions, clear margins</td>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">Small-Medium</td>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">Somewhat</td>
        </tr>
        <tr>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">Decision Tree</td>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">Rule-based decisions</td>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">Any</td>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">✓ Yes</td>
        </tr>
        <tr style="background: rgba(255,255,255,0.05);">
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">Random Forest</td>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">General purpose, feature importance</td>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">Medium-Large</td>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">Partial</td>
        </tr>
        <tr>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">XGBoost</td>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">Competitions, tabular data</td>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">Medium-Large</td>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">Partial</td>
        </tr>
        <tr style="background: rgba(255,255,255,0.05);">
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">Neural Networks</td>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">Complex patterns, images, text</td>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">Large</td>
            <td style="padding: 10px; border: 1px solid rgba(255,255,255,0.2);">✗ No</td>
        </tr>
    </table>
    <div class="highlight" style="margin-top: 20px;">
        <p><strong>Rule of Thumb:</strong> Start simple (Logistic Regression), then try Random Forest, then XGBoost. Use neural networks for images/text or when you have lots of data.</p>
    </div>
</div>

<!-- Slide: Model Evaluation -->
<div class="slide" id="slide37">
    <span class="slide-number">37</span>
    <h2>Evaluating Models</h2>
    <div class="two-column">
        <div class="card">
            <h4>Regression Metrics</h4>
            <ul>
                <li><strong>MSE:</strong> Mean Squared Error</li>
                <li><strong>RMSE:</strong> Root MSE</li>
                <li><strong>MAE:</strong> Mean Absolute Error</li>
                <li><strong>R²:</strong> Coefficient of determination</li>
            </ul>
        </div>
        <div class="card">
            <h4>Classification Metrics</h4>
            <ul>
                <li><strong>Accuracy:</strong> % correct predictions</li>
                <li><strong>Precision:</strong> True positives / predicted positives</li>
                <li><strong>Recall:</strong> True positives / actual positives</li>
                <li><strong>F1 Score:</strong> Harmonic mean of precision & recall</li>
            </ul>
        </div>
    </div>
    <div class="highlight" style="margin-top: 20px;">
        <p><strong>Key Concept:</strong> Always evaluate on data the model hasn't seen (test set)!</p>
    </div>
</div>

<!-- Slide 22: Overfitting -->
<div class="slide" id="slide38">
    <span class="slide-number">38</span>
    <h2>The Overfitting Problem</h2>
    <div class="two-column">
        <div class="card">
            <h4>Underfitting</h4>
            <p>Model is too simple</p>
            <ul>
                <li>High training error</li>
                <li>High test error</li>
                <li>Misses patterns in data</li>
            </ul>
        </div>
        <div class="card">
            <h4>Overfitting</h4>
            <p>Model is too complex</p>
            <ul>
                <li>Low training error</li>
                <li>High test error</li>
                <li>Memorizes noise</li>
            </ul>
        </div>
    </div>
    <div class="highlight" style="margin-top: 20px;">
        <p><strong>Goal:</strong> Find the sweet spot - complex enough to capture patterns, simple enough to generalize</p>
    </div>
</div>

<!-- NLP MODULE HEADER -->
<div class="slide" id="slide-nlp-intro">
    <span class="slide-number">NLP-1</span>
    <div class="day-header">MODULE: NLP FOUNDATIONS</div>
    <h1>Natural Language Processing</h1>
    <p class="subtitle">Teaching Machines to Understand Human Language</p>
    <div style="margin-top: 40px;">
        <p><strong>Text Preprocessing:</strong> Cleaning and preparing text data</p>
        <p><strong>Text Representation:</strong> Bag of Words, TF-IDF, Word Vectors</p>
        <p><strong>Linguistic Analysis:</strong> POS Tagging, Chunking, NER</p>
        <p><strong>Classification:</strong> Bayesian Methods for Text</p>
    </div>
</div>

<!-- Slide: Why NLP is Hard -->
<div class="slide" id="slide-nlp-why-hard">
    <span class="slide-number">NLP-2</span>
    <h2>Why is NLP Challenging?</h2>
    <p>Human language is inherently ambiguous and context-dependent</p>
    <div class="two-column">
        <div class="card">
            <h4>Language Challenges</h4>
            <ul>
                <li><strong>Ambiguity:</strong> "I saw her duck" (bird or action?)</li>
                <li><strong>Context:</strong> "It's cold" (temperature vs. personality)</li>
                <li><strong>Sarcasm:</strong> "Oh great, another meeting"</li>
                <li><strong>Idioms:</strong> "Break a leg" ≠ injury</li>
                <li><strong>Synonyms:</strong> happy, joyful, elated, pleased</li>
                <li><strong>Homonyms:</strong> bank (river vs. financial)</li>
            </ul>
        </div>
        <div class="card">
            <h4>Visual: Ambiguity in Language</h4>
            <svg viewBox="0 0 300 200" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Sentence -->
                <text x="150" y="30" fill="#c5d45a" font-size="12" text-anchor="middle" font-weight="bold">"Time flies like an arrow"</text>

                <!-- Three interpretations -->
                <rect x="20" y="50" width="80" height="60" rx="5" fill="rgba(81,207,102,0.2)" stroke="#51cf66"/>
                <text x="60" y="75" fill="white" font-size="12" text-anchor="middle">Time passes</text>
                <text x="60" y="90" fill="white" font-size="12" text-anchor="middle">quickly like</text>
                <text x="60" y="105" fill="white" font-size="12" text-anchor="middle">an arrow flies</text>

                <rect x="110" y="50" width="80" height="60" rx="5" fill="rgba(74,144,217,0.2)" stroke="#4a90d9"/>
                <text x="150" y="75" fill="white" font-size="12" text-anchor="middle">Measure the</text>
                <text x="150" y="90" fill="white" font-size="12" text-anchor="middle">speed of flies</text>
                <text x="150" y="105" fill="white" font-size="12" text-anchor="middle">like an arrow</text>

                <rect x="200" y="50" width="80" height="60" rx="5" fill="rgba(255,107,107,0.2)" stroke="#ff6b6b"/>
                <text x="240" y="75" fill="white" font-size="12" text-anchor="middle">Time-flies</text>
                <text x="240" y="90" fill="white" font-size="12" text-anchor="middle">(insects) enjoy</text>
                <text x="240" y="105" fill="white" font-size="12" text-anchor="middle">arrows</text>

                <!-- Arrow showing computers struggle -->
                <text x="150" y="140" fill="#ffd700" font-size="12" text-anchor="middle">Computers must choose the right interpretation!</text>

                <!-- Machine vs Human -->
                <rect x="50" y="155" width="90" height="35" rx="5" fill="rgba(255,255,255,0.1)"/>
                <text x="95" y="175" fill="#51cf66" font-size="12" text-anchor="middle">Human: Easy</text>

                <rect x="160" y="155" width="90" height="35" rx="5" fill="rgba(255,255,255,0.1)"/>
                <text x="205" y="175" fill="#ff6b6b" font-size="12" text-anchor="middle">Computer: Hard</text>
            </svg>
        </div>
    </div>
</div>

<!-- Slide: Text Preprocessing Pipeline -->
<div class="slide" id="slide-nlp-preprocessing">
    <span class="slide-number">NLP-3</span>
    <h2>Text Preprocessing Pipeline</h2>
    <p>Raw text must be cleaned and normalized before analysis</p>
    <div style="display: flex; justify-content: center; margin: 20px 0;">
        <svg viewBox="0 0 750 140" style="width: 95%; max-width: 950px;">
            <!-- Step 1: Raw Text -->
            <rect x="5" y="30" width="100" height="80" rx="8" fill="rgba(255,255,255,0.1)" stroke="#ff6b6b" stroke-width="2"/>
            <text x="55" y="55" fill="#ff6b6b" font-size="12" text-anchor="middle" font-weight="bold">Raw Text</text>
            <text x="55" y="75" fill="white" font-size="12" text-anchor="middle">"The CATS are</text>
            <text x="55" y="87" fill="white" font-size="12" text-anchor="middle">running!!!"</text>

            <path d="M 110 70 L 130 70" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>
            <defs>
                <marker id="arrowNLP" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#ffd700"/>
                </marker>
            </defs>

            <!-- Step 2: Lowercase -->
            <rect x="135" y="30" width="100" height="80" rx="8" fill="rgba(255,255,255,0.1)" stroke="#4a90d9" stroke-width="2"/>
            <text x="185" y="55" fill="#4a90d9" font-size="12" text-anchor="middle" font-weight="bold">Lowercase</text>
            <text x="185" y="75" fill="white" font-size="12" text-anchor="middle">"the cats are</text>
            <text x="185" y="87" fill="white" font-size="12" text-anchor="middle">running!!!"</text>

            <path d="M 240 70 L 260 70" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>

            <!-- Step 3: Remove Punctuation -->
            <rect x="265" y="30" width="100" height="80" rx="8" fill="rgba(255,255,255,0.1)" stroke="#51cf66" stroke-width="2"/>
            <text x="315" y="50" fill="#51cf66" font-size="12" text-anchor="middle" font-weight="bold">Remove</text>
            <text x="315" y="63" fill="#51cf66" font-size="12" text-anchor="middle" font-weight="bold">Punctuation</text>
            <text x="315" y="85" fill="white" font-size="12" text-anchor="middle">"the cats are</text>
            <text x="315" y="97" fill="white" font-size="12" text-anchor="middle">running"</text>

            <path d="M 370 70 L 390 70" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>

            <!-- Step 4: Tokenize -->
            <rect x="395" y="30" width="100" height="80" rx="8" fill="rgba(255,255,255,0.1)" stroke="#c5d45a" stroke-width="2"/>
            <text x="445" y="55" fill="#c5d45a" font-size="12" text-anchor="middle" font-weight="bold">Tokenize</text>
            <text x="445" y="75" fill="white" font-size="12" text-anchor="middle">["the", "cats",</text>
            <text x="445" y="87" fill="white" font-size="12" text-anchor="middle">"are", "running"]</text>

            <path d="M 500 70 L 520 70" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>

            <!-- Step 5: Remove Stopwords -->
            <rect x="525" y="30" width="100" height="80" rx="8" fill="rgba(255,255,255,0.1)" stroke="orange" stroke-width="2"/>
            <text x="575" y="50" fill="orange" font-size="12" text-anchor="middle" font-weight="bold">Remove</text>
            <text x="575" y="63" fill="orange" font-size="12" text-anchor="middle" font-weight="bold">Stopwords</text>
            <text x="575" y="85" fill="white" font-size="12" text-anchor="middle">["cats",</text>
            <text x="575" y="97" fill="white" font-size="12" text-anchor="middle">"running"]</text>

            <path d="M 630 70 L 650 70" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>

            <!-- Step 6: Stem/Lemmatize -->
            <rect x="655" y="30" width="90" height="80" rx="8" fill="rgba(255,255,255,0.1)" stroke="#51cf66" stroke-width="2"/>
            <text x="700" y="50" fill="#51cf66" font-size="12" text-anchor="middle" font-weight="bold">Stem/</text>
            <text x="700" y="63" fill="#51cf66" font-size="12" text-anchor="middle" font-weight="bold">Lemmatize</text>
            <text x="700" y="85" fill="white" font-size="12" text-anchor="middle">["cat",</text>
            <text x="700" y="97" fill="white" font-size="12" text-anchor="middle">"run"]</text>
        </svg>
    </div>
    <div class="two-column" style="margin-top: 10px;">
        <div class="card">
            <h4>Stemming vs Lemmatization</h4>
            <table style="width: 100%; font-size: 0.85em;">
                <tr><td><strong>Stemming</strong></td><td>running → runn (crude chop)</td></tr>
                <tr><td><strong>Lemmatization</strong></td><td>running → run (dictionary lookup)</td></tr>
                <tr><td><strong>better → </strong></td><td>stem: better, lemma: good</td></tr>
            </table>
        </div>
        <div class="card">
            <h4>Common Stopwords</h4>
            <p style="font-size: 0.9em;">Words that appear frequently but carry little meaning:</p>
            <p style="font-family: monospace; font-size: 0.85em; color: #c5d45a;">the, a, an, is, are, was, were, in, on, at, to, for, of, and, or, but...</p>
        </div>
    </div>
</div>

<!-- Slide: Stemming vs Lemmatization Visual -->
<div class="slide" id="slide-nlp-stem-lemma-visual">
    <span class="slide-number">NLP-3b</span>
    <h2>Stemming vs Lemmatization: Visual Comparison</h2>
    <p>Two approaches to reducing words to their base form</p>
    <div style="display: flex; justify-content: center; margin: 20px 0;">
        <svg viewBox="0 0 750 320" style="width: 95%; max-width: 950px;">
            <!-- Title row -->
            <text x="200" y="30" fill="#ff6b6b" font-size="14" text-anchor="middle" font-weight="bold">Stemming (Porter Algorithm)</text>
            <text x="550" y="30" fill="#51cf66" font-size="14" text-anchor="middle" font-weight="bold">Lemmatization (Dictionary)</text>

            <!-- Divider -->
            <line x1="375" y1="45" x2="375" y2="310" stroke="rgba(255,255,255,0.3)" stroke-width="2" stroke-dasharray="5,5"/>

            <!-- Stemming examples -->
            <g transform="translate(50, 55)">
                <!-- running -->
                <rect x="0" y="0" width="90" height="32" rx="5" fill="rgba(74,144,217,0.3)" stroke="#4a90d9"/>
                <text x="45" y="21" fill="white" font-size="13" text-anchor="middle">running</text>
                <path d="M 95 16 L 125 16" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>
                <rect x="130" y="0" width="75" height="32" rx="5" fill="rgba(255,107,107,0.3)" stroke="#ff6b6b"/>
                <text x="167" y="21" fill="#ff6b6b" font-size="13" text-anchor="middle" font-weight="bold">runn</text>
                <text x="240" y="21" fill="rgba(255,255,255,0.6)" font-size="12">✗ not a word</text>

                <!-- studies -->
                <rect x="0" y="42" width="90" height="32" rx="5" fill="rgba(74,144,217,0.3)" stroke="#4a90d9"/>
                <text x="45" y="63" fill="white" font-size="13" text-anchor="middle">studies</text>
                <path d="M 95 58 L 125 58" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>
                <rect x="130" y="42" width="75" height="32" rx="5" fill="rgba(255,107,107,0.3)" stroke="#ff6b6b"/>
                <text x="167" y="63" fill="#ff6b6b" font-size="13" text-anchor="middle" font-weight="bold">studi</text>
                <text x="240" y="63" fill="rgba(255,255,255,0.6)" font-size="12">✗ not a word</text>

                <!-- better -->
                <rect x="0" y="84" width="90" height="32" rx="5" fill="rgba(74,144,217,0.3)" stroke="#4a90d9"/>
                <text x="45" y="105" fill="white" font-size="13" text-anchor="middle">better</text>
                <path d="M 95 100 L 125 100" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>
                <rect x="130" y="84" width="75" height="32" rx="5" fill="rgba(255,107,107,0.3)" stroke="#ff6b6b"/>
                <text x="167" y="105" fill="#ff6b6b" font-size="13" text-anchor="middle" font-weight="bold">better</text>
                <text x="240" y="105" fill="rgba(255,255,255,0.6)" font-size="12">✗ no change</text>

                <!-- wolves -->
                <rect x="0" y="126" width="90" height="32" rx="5" fill="rgba(74,144,217,0.3)" stroke="#4a90d9"/>
                <text x="45" y="147" fill="white" font-size="13" text-anchor="middle">wolves</text>
                <path d="M 95 142 L 125 142" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>
                <rect x="130" y="126" width="75" height="32" rx="5" fill="rgba(255,107,107,0.3)" stroke="#ff6b6b"/>
                <text x="167" y="147" fill="#ff6b6b" font-size="13" text-anchor="middle" font-weight="bold">wolv</text>
                <text x="240" y="147" fill="rgba(255,255,255,0.6)" font-size="12">✗ not a word</text>
            </g>

            <!-- Lemmatization examples -->
            <g transform="translate(400, 55)">
                <!-- running -->
                <rect x="0" y="0" width="90" height="32" rx="5" fill="rgba(74,144,217,0.3)" stroke="#4a90d9"/>
                <text x="45" y="21" fill="white" font-size="13" text-anchor="middle">running</text>
                <path d="M 95 16 L 125 16" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>
                <rect x="130" y="0" width="75" height="32" rx="5" fill="rgba(81,207,102,0.3)" stroke="#51cf66"/>
                <text x="167" y="21" fill="#51cf66" font-size="13" text-anchor="middle" font-weight="bold">run</text>
                <text x="240" y="21" fill="#51cf66" font-size="12">✓ real word</text>

                <!-- studies -->
                <rect x="0" y="42" width="90" height="32" rx="5" fill="rgba(74,144,217,0.3)" stroke="#4a90d9"/>
                <text x="45" y="63" fill="white" font-size="13" text-anchor="middle">studies</text>
                <path d="M 95 58 L 125 58" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>
                <rect x="130" y="42" width="75" height="32" rx="5" fill="rgba(81,207,102,0.3)" stroke="#51cf66"/>
                <text x="167" y="63" fill="#51cf66" font-size="13" text-anchor="middle" font-weight="bold">study</text>
                <text x="240" y="63" fill="#51cf66" font-size="12">✓ real word</text>

                <!-- better -->
                <rect x="0" y="84" width="90" height="32" rx="5" fill="rgba(74,144,217,0.3)" stroke="#4a90d9"/>
                <text x="45" y="105" fill="white" font-size="13" text-anchor="middle">better</text>
                <path d="M 95 100 L 125 100" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>
                <rect x="130" y="84" width="75" height="32" rx="5" fill="rgba(81,207,102,0.3)" stroke="#51cf66"/>
                <text x="167" y="105" fill="#51cf66" font-size="13" text-anchor="middle" font-weight="bold">good</text>
                <text x="240" y="105" fill="#51cf66" font-size="12">✓ base form</text>

                <!-- wolves -->
                <rect x="0" y="126" width="90" height="32" rx="5" fill="rgba(74,144,217,0.3)" stroke="#4a90d9"/>
                <text x="45" y="147" fill="white" font-size="13" text-anchor="middle">wolves</text>
                <path d="M 95 142 L 125 142" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>
                <rect x="130" y="126" width="75" height="32" rx="5" fill="rgba(81,207,102,0.3)" stroke="#51cf66"/>
                <text x="167" y="147" fill="#51cf66" font-size="13" text-anchor="middle" font-weight="bold">wolf</text>
                <text x="240" y="147" fill="#51cf66" font-size="12">✓ real word</text>
            </g>

            <!-- Comparison boxes - moved down with more space -->
            <rect x="50" y="235" width="270" height="70" rx="8" fill="rgba(255,107,107,0.15)" stroke="#ff6b6b"/>
            <text x="185" y="258" fill="#ff6b6b" font-size="14" text-anchor="middle" font-weight="bold">Stemming</text>
            <text x="185" y="278" fill="white" font-size="12" text-anchor="middle">• Fast (rule-based)</text>
            <text x="185" y="295" fill="white" font-size="12" text-anchor="middle">• May produce non-words</text>

            <rect x="430" y="235" width="270" height="70" rx="8" fill="rgba(81,207,102,0.15)" stroke="#51cf66"/>
            <text x="565" y="258" fill="#51cf66" font-size="14" text-anchor="middle" font-weight="bold">Lemmatization</text>
            <text x="565" y="278" fill="white" font-size="12" text-anchor="middle">• Slower (dictionary lookup)</text>
            <text x="565" y="295" fill="white" font-size="12" text-anchor="middle">• Always produces real words</text>
        </svg>
    </div>
</div>

<!-- Slide: Tokenization Deep Dive -->
<div class="slide" id="slide-nlp-tokenization">
    <span class="slide-number">NLP-4</span>
    <h2>Tokenization: Breaking Text into Pieces</h2>
    <p>The fundamental first step in any NLP pipeline</p>
    <div style="display: flex; justify-content: center; margin: 20px 0;">
        <svg viewBox="0 0 800 280" style="width: 95%; max-width: 950px; background: rgba(0,0,0,0.2); border-radius: 8px;">
            <text x="400" y="30" fill="#c5d45a" font-size="18" text-anchor="middle" font-weight="bold">Tokenizing: "unhappiness"</text>

            <!-- Word level -->
            <g transform="translate(50, 60)">
                <rect x="0" y="0" width="200" height="80" rx="8" fill="rgba(74,144,217,0.15)" stroke="#4a90d9" stroke-width="2"/>
                <text x="100" y="25" fill="#4a90d9" font-size="16" text-anchor="middle" font-weight="bold">Word Tokenization</text>
                <rect x="30" y="40" width="140" height="30" rx="5" fill="rgba(74,144,217,0.4)" stroke="#4a90d9"/>
                <text x="100" y="62" fill="white" font-size="14" text-anchor="middle">unhappiness</text>
            </g>

            <!-- Subword level -->
            <g transform="translate(300, 60)">
                <rect x="0" y="0" width="200" height="80" rx="8" fill="rgba(81,207,102,0.15)" stroke="#51cf66" stroke-width="2"/>
                <text x="100" y="25" fill="#51cf66" font-size="16" text-anchor="middle" font-weight="bold">Subword (BPE)</text>
                <rect x="15" y="40" width="50" height="30" rx="5" fill="rgba(81,207,102,0.4)" stroke="#51cf66"/>
                <text x="40" y="62" fill="white" font-size="14" text-anchor="middle">un</text>
                <rect x="70" y="40" width="60" height="30" rx="5" fill="rgba(81,207,102,0.4)" stroke="#51cf66"/>
                <text x="100" y="62" fill="white" font-size="14" text-anchor="middle">happi</text>
                <rect x="135" y="40" width="50" height="30" rx="5" fill="rgba(81,207,102,0.4)" stroke="#51cf66"/>
                <text x="160" y="62" fill="white" font-size="14" text-anchor="middle">ness</text>
            </g>

            <!-- Character level -->
            <g transform="translate(550, 60)">
                <rect x="0" y="0" width="200" height="80" rx="8" fill="rgba(255,107,107,0.15)" stroke="#ff6b6b" stroke-width="2"/>
                <text x="100" y="25" fill="#ff6b6b" font-size="16" text-anchor="middle" font-weight="bold">Character</text>
                <rect x="10" y="40" width="24" height="30" rx="4" fill="rgba(255,107,107,0.4)" stroke="#ff6b6b"/>
                <text x="22" y="62" fill="white" font-size="14" text-anchor="middle">u</text>
                <rect x="38" y="40" width="24" height="30" rx="4" fill="rgba(255,107,107,0.4)" stroke="#ff6b6b"/>
                <text x="50" y="62" fill="white" font-size="14" text-anchor="middle">n</text>
                <rect x="66" y="40" width="24" height="30" rx="4" fill="rgba(255,107,107,0.4)" stroke="#ff6b6b"/>
                <text x="78" y="62" fill="white" font-size="14" text-anchor="middle">h</text>
                <rect x="94" y="40" width="24" height="30" rx="4" fill="rgba(255,107,107,0.4)" stroke="#ff6b6b"/>
                <text x="106" y="62" fill="white" font-size="14" text-anchor="middle">a</text>
                <rect x="122" y="40" width="24" height="30" rx="4" fill="rgba(255,107,107,0.4)" stroke="#ff6b6b"/>
                <text x="134" y="62" fill="white" font-size="14" text-anchor="middle">p</text>
                <text x="165" y="62" fill="white" font-size="16">...</text>
            </g>

            <!-- Comparison section -->
            <text x="400" y="170" fill="white" font-size="16" text-anchor="middle" font-weight="bold">Trade-offs</text>

            <g transform="translate(50, 185)">
                <rect x="0" y="0" width="200" height="75" rx="6" fill="rgba(74,144,217,0.1)" stroke="rgba(74,144,217,0.5)"/>
                <text x="100" y="22" fill="#4a90d9" font-size="14" text-anchor="middle">Smallest vocabulary</text>
                <text x="100" y="42" fill="white" font-size="12" text-anchor="middle">Can't handle unknown words</text>
                <text x="100" y="62" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">Simple but limited</text>
            </g>

            <g transform="translate(300, 185)">
                <rect x="0" y="0" width="200" height="75" rx="6" fill="rgba(81,207,102,0.1)" stroke="rgba(81,207,102,0.5)"/>
                <text x="100" y="22" fill="#51cf66" font-size="14" text-anchor="middle">Best balance</text>
                <text x="100" y="42" fill="white" font-size="12" text-anchor="middle">Used by GPT, BERT</text>
                <text x="100" y="62" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">Modern standard</text>
            </g>

            <g transform="translate(550, 185)">
                <rect x="0" y="0" width="200" height="75" rx="6" fill="rgba(255,107,107,0.1)" stroke="rgba(255,107,107,0.5)"/>
                <text x="100" y="22" fill="#ff6b6b" font-size="14" text-anchor="middle">Handles all words</text>
                <text x="100" y="42" fill="white" font-size="12" text-anchor="middle">Very long sequences</text>
                <text x="100" y="62" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">Computationally expensive</text>
            </g>
        </svg>
    </div>
</div>

<!-- Slide: Bag of Words -->
<div class="slide" id="slide-nlp-bow">
    <span class="slide-number">NLP-5</span>
    <h2>Bag of Words (BoW)</h2>
    <p>Represent text as a count of word occurrences - ignoring order</p>
    <div style="display: flex; justify-content: center; margin: 20px 0;">
        <svg viewBox="0 0 800 280" style="width: 95%; max-width: 950px; background: rgba(0,0,0,0.2); border-radius: 8px;">
            <!-- Title -->
            <text x="400" y="30" fill="#c5d45a" font-size="18" text-anchor="middle" font-weight="bold">Document-Term Matrix (Bag of Words)</text>

            <!-- Column headers (vocabulary) -->
            <text x="320" y="70" fill="#4a90d9" font-size="16" text-anchor="middle" font-weight="bold">and</text>
            <text x="410" y="70" fill="#4a90d9" font-size="16" text-anchor="middle" font-weight="bold">cats</text>
            <text x="500" y="70" fill="#4a90d9" font-size="16" text-anchor="middle" font-weight="bold">dogs</text>
            <text x="590" y="70" fill="#4a90d9" font-size="16" text-anchor="middle" font-weight="bold">love</text>

            <!-- Row 1: "I love cats" -->
            <text x="150" y="110" fill="#51cf66" font-size="15" text-anchor="middle">"I love cats"</text>
            <rect x="280" y="88" width="70" height="35" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.3)"/>
            <text x="315" y="112" fill="white" font-size="16" text-anchor="middle">0</text>
            <rect x="370" y="88" width="70" height="35" fill="rgba(81,207,102,0.4)" stroke="#51cf66" stroke-width="2"/>
            <text x="405" y="112" fill="white" font-size="16" text-anchor="middle" font-weight="bold">1</text>
            <rect x="460" y="88" width="70" height="35" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.3)"/>
            <text x="495" y="112" fill="white" font-size="16" text-anchor="middle">0</text>
            <rect x="550" y="88" width="70" height="35" fill="rgba(81,207,102,0.4)" stroke="#51cf66" stroke-width="2"/>
            <text x="585" y="112" fill="white" font-size="16" text-anchor="middle" font-weight="bold">1</text>

            <!-- Row 2: "I love dogs" -->
            <text x="150" y="155" fill="#ff6b6b" font-size="15" text-anchor="middle">"I love dogs"</text>
            <rect x="280" y="133" width="70" height="35" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.3)"/>
            <text x="315" y="157" fill="white" font-size="16" text-anchor="middle">0</text>
            <rect x="370" y="133" width="70" height="35" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.3)"/>
            <text x="405" y="157" fill="white" font-size="16" text-anchor="middle">0</text>
            <rect x="460" y="133" width="70" height="35" fill="rgba(255,107,107,0.4)" stroke="#ff6b6b" stroke-width="2"/>
            <text x="495" y="157" fill="white" font-size="16" text-anchor="middle" font-weight="bold">1</text>
            <rect x="550" y="133" width="70" height="35" fill="rgba(255,107,107,0.4)" stroke="#ff6b6b" stroke-width="2"/>
            <text x="585" y="157" fill="white" font-size="16" text-anchor="middle" font-weight="bold">1</text>

            <!-- Row 3: "cats and dogs" -->
            <text x="150" y="200" fill="#ffd700" font-size="15" text-anchor="middle">"cats and dogs"</text>
            <rect x="280" y="178" width="70" height="35" fill="rgba(255,215,0,0.4)" stroke="#ffd700" stroke-width="2"/>
            <text x="315" y="202" fill="white" font-size="16" text-anchor="middle" font-weight="bold">1</text>
            <rect x="370" y="178" width="70" height="35" fill="rgba(255,215,0,0.4)" stroke="#ffd700" stroke-width="2"/>
            <text x="405" y="202" fill="white" font-size="16" text-anchor="middle" font-weight="bold">1</text>
            <rect x="460" y="178" width="70" height="35" fill="rgba(255,215,0,0.4)" stroke="#ffd700" stroke-width="2"/>
            <text x="495" y="202" fill="white" font-size="16" text-anchor="middle" font-weight="bold">1</text>
            <rect x="550" y="178" width="70" height="35" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.3)"/>
            <text x="585" y="202" fill="white" font-size="16" text-anchor="middle">0</text>

            <!-- Pros/Cons -->
            <rect x="680" y="85" width="100" height="130" rx="6" fill="rgba(0,0,0,0.3)"/>
            <text x="730" y="110" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Trade-offs</text>
            <text x="730" y="135" fill="#51cf66" font-size="11" text-anchor="middle">✓ Simple</text>
            <text x="730" y="152" fill="#51cf66" font-size="11" text-anchor="middle">✓ Fast</text>
            <text x="730" y="175" fill="#ff6b6b" font-size="11" text-anchor="middle">✗ No order</text>
            <text x="730" y="192" fill="#ff6b6b" font-size="11" text-anchor="middle">✗ Sparse</text>

            <!-- Explanation -->
            <text x="400" y="250" fill="white" font-size="14" text-anchor="middle">Each document becomes a vector: count how many times each word appears</text>
            <text x="400" y="270" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">Vocabulary: all unique words across all documents</text>
        </svg>
    </div>
</div>

<!-- Slide: N-grams Visualization -->
<div class="slide" id="slide-nlp-ngrams">
    <span class="slide-number">NLP-5b</span>
    <h2>N-grams: Capturing Word Sequences</h2>
    <p>N-grams preserve some word order information that Bag of Words loses</p>
    <div style="display: flex; justify-content: center; margin: 15px 0;">
        <svg viewBox="0 0 750 300" style="width: 95%; max-width: 950px;">
            <!-- Input sentence -->
            <text x="375" y="25" fill="#c5d45a" font-size="14" text-anchor="middle" font-weight="bold">"The cat sat on the mat"</text>

            <!-- Unigrams (1-grams) -->
            <rect x="30" y="50" width="200" height="115" rx="8" fill="rgba(74,144,217,0.15)" stroke="#4a90d9" stroke-width="2"/>
            <text x="130" y="75" fill="#4a90d9" font-size="14" text-anchor="middle" font-weight="bold">Unigrams (n=1)</text>
            <g transform="translate(45, 90)">
                <rect x="0" y="0" width="55" height="28" rx="4" fill="rgba(74,144,217,0.3)"/>
                <text x="27" y="19" fill="white" font-size="13" text-anchor="middle">The</text>
                <rect x="60" y="0" width="55" height="28" rx="4" fill="rgba(74,144,217,0.3)"/>
                <text x="87" y="19" fill="white" font-size="13" text-anchor="middle">cat</text>
                <rect x="120" y="0" width="55" height="28" rx="4" fill="rgba(74,144,217,0.3)"/>
                <text x="147" y="19" fill="white" font-size="13" text-anchor="middle">sat</text>
                <rect x="0" y="34" width="55" height="28" rx="4" fill="rgba(74,144,217,0.3)"/>
                <text x="27" y="53" fill="white" font-size="13" text-anchor="middle">on</text>
                <rect x="60" y="34" width="55" height="28" rx="4" fill="rgba(74,144,217,0.3)"/>
                <text x="87" y="53" fill="white" font-size="13" text-anchor="middle">the</text>
                <rect x="120" y="34" width="55" height="28" rx="4" fill="rgba(74,144,217,0.3)"/>
                <text x="147" y="53" fill="white" font-size="13" text-anchor="middle">mat</text>
            </g>

            <!-- Bigrams (2-grams) -->
            <rect x="270" y="50" width="210" height="115" rx="8" fill="rgba(81,207,102,0.15)" stroke="#51cf66" stroke-width="2"/>
            <text x="375" y="75" fill="#51cf66" font-size="14" text-anchor="middle" font-weight="bold">Bigrams (n=2)</text>
            <g transform="translate(285, 90)">
                <rect x="0" y="0" width="90" height="28" rx="4" fill="rgba(81,207,102,0.3)"/>
                <text x="45" y="19" fill="white" font-size="12" text-anchor="middle">The cat</text>
                <rect x="95" y="0" width="90" height="28" rx="4" fill="rgba(81,207,102,0.3)"/>
                <text x="140" y="19" fill="white" font-size="12" text-anchor="middle">cat sat</text>
                <rect x="0" y="34" width="90" height="28" rx="4" fill="rgba(81,207,102,0.3)"/>
                <text x="45" y="53" fill="white" font-size="12" text-anchor="middle">sat on</text>
                <rect x="95" y="34" width="90" height="28" rx="4" fill="rgba(81,207,102,0.3)"/>
                <text x="140" y="53" fill="white" font-size="12" text-anchor="middle">on the</text>
                <rect x="47" y="68" width="90" height="28" rx="4" fill="rgba(81,207,102,0.3)"/>
                <text x="92" y="87" fill="white" font-size="12" text-anchor="middle">the mat</text>
            </g>

            <!-- Trigrams (3-grams) -->
            <rect x="520" y="50" width="210" height="115" rx="8" fill="rgba(255,215,0,0.15)" stroke="#ffd700" stroke-width="2"/>
            <text x="625" y="75" fill="#ffd700" font-size="14" text-anchor="middle" font-weight="bold">Trigrams (n=3)</text>
            <g transform="translate(535, 90)">
                <rect x="0" y="0" width="90" height="28" rx="4" fill="rgba(255,215,0,0.3)"/>
                <text x="45" y="19" fill="white" font-size="11" text-anchor="middle">The cat sat</text>
                <rect x="95" y="0" width="90" height="28" rx="4" fill="rgba(255,215,0,0.3)"/>
                <text x="140" y="19" fill="white" font-size="11" text-anchor="middle">cat sat on</text>
                <rect x="0" y="34" width="90" height="28" rx="4" fill="rgba(255,215,0,0.3)"/>
                <text x="45" y="53" fill="white" font-size="11" text-anchor="middle">sat on the</text>
                <rect x="95" y="34" width="90" height="28" rx="4" fill="rgba(255,215,0,0.3)"/>
                <text x="140" y="53" fill="white" font-size="11" text-anchor="middle">on the mat</text>
            </g>

            <!-- Why N-grams matter -->
            <text x="375" y="190" fill="white" font-size="14" text-anchor="middle" font-weight="bold">Why N-grams Matter</text>

            <g transform="translate(50, 205)">
                <rect x="0" y="0" width="200" height="85" rx="6" fill="rgba(255,107,107,0.15)" stroke="#ff6b6b"/>
                <text x="100" y="22" fill="#ff6b6b" font-size="14" text-anchor="middle" font-weight="bold">Unigrams Lose Context</text>
                <text x="100" y="42" fill="white" font-size="12" text-anchor="middle">"not good" vs "good"</text>
                <text x="100" y="58" fill="white" font-size="12" text-anchor="middle">Both have "good" = 1</text>
                <text x="100" y="74" fill="#ff6b6b" font-size="12" text-anchor="middle">Opposite meanings!</text>
            </g>

            <g transform="translate(275, 205)">
                <rect x="0" y="0" width="200" height="85" rx="6" fill="rgba(81,207,102,0.15)" stroke="#51cf66"/>
                <text x="100" y="22" fill="#51cf66" font-size="14" text-anchor="middle" font-weight="bold">Bigrams Capture Negation</text>
                <text x="100" y="42" fill="white" font-size="12" text-anchor="middle">"not good" → bigram</text>
                <text x="100" y="58" fill="white" font-size="12" text-anchor="middle">"not_good" = 1</text>
                <text x="100" y="74" fill="#51cf66" font-size="12" text-anchor="middle">Preserves meaning!</text>
            </g>

            <g transform="translate(500, 205)">
                <rect x="0" y="0" width="200" height="85" rx="6" fill="rgba(255,215,0,0.15)" stroke="#ffd700"/>
                <text x="100" y="22" fill="#ffd700" font-size="14" text-anchor="middle" font-weight="bold">Trade-off</text>
                <text x="100" y="42" fill="white" font-size="12" text-anchor="middle">Higher n → more context</text>
                <text x="100" y="58" fill="white" font-size="12" text-anchor="middle">But: vocabulary explodes!</text>
                <text x="100" y="74" fill="white" font-size="12" text-anchor="middle">Common: unigrams + bigrams</text>
            </g>
        </svg>
    </div>
</div>

<!-- Slide: Why TF-IDF? The Problem with Raw Counts -->
<div class="slide" id="slide-nlp-tfidf-why">
    <span class="slide-number">NLP-6</span>
    <h2>Why TF-IDF? The Problem with Raw Word Counts</h2>
    <p>Bag of Words treats all words equally - but some words are more informative than others!</p>
    <div style="display: flex; justify-content: center; margin: 20px 0;">
        <svg viewBox="0 0 800 320" style="width: 95%; max-width: 950px; background: rgba(0,0,0,0.2); border-radius: 8px;">
            <!-- The Problem -->
            <text x="400" y="30" fill="#ff6b6b" font-size="18" text-anchor="middle" font-weight="bold">The Problem: Not All Words Are Equal</text>

            <!-- Example document -->
            <rect x="50" y="50" width="300" height="80" rx="8" fill="rgba(74,144,217,0.15)" stroke="#4a90d9"/>
            <text x="200" y="75" fill="#4a90d9" font-size="14" text-anchor="middle" font-weight="bold">Document about Machine Learning</text>
            <text x="200" y="100" fill="white" font-size="12" text-anchor="middle">"The neural network is trained on the data.</text>
            <text x="200" y="118" fill="white" font-size="12" text-anchor="middle">The model learns the patterns."</text>

            <!-- Word counts -->
            <rect x="400" y="50" width="350" height="80" rx="8" fill="rgba(255,107,107,0.15)" stroke="#ff6b6b"/>
            <text x="575" y="75" fill="#ff6b6b" font-size="14" text-anchor="middle" font-weight="bold">Raw Word Counts (BoW)</text>
            <text x="450" y="100" fill="white" font-size="13">"the" = 4</text>
            <text x="550" y="100" fill="white" font-size="13">"is" = 1</text>
            <text x="650" y="100" fill="white" font-size="13">"on" = 1</text>
            <text x="450" y="118" fill="#51cf66" font-size="13">"neural" = 1</text>
            <text x="550" y="118" fill="#51cf66" font-size="13">"network" = 1</text>
            <text x="680" y="118" fill="#51cf66" font-size="13">"learns" = 1</text>

            <!-- Arrow and insight -->
            <text x="400" y="160" fill="#ffd700" font-size="16" text-anchor="middle" font-weight="bold">⚠️ "the" appears most often but tells us NOTHING about the topic!</text>

            <!-- The Solution -->
            <text x="400" y="195" fill="#51cf66" font-size="18" text-anchor="middle" font-weight="bold">The Solution: TF-IDF</text>

            <!-- Two boxes showing the concept -->
            <rect x="50" y="215" width="320" height="90" rx="8" fill="rgba(255,107,107,0.15)" stroke="#ff6b6b"/>
            <text x="210" y="240" fill="#ff6b6b" font-size="14" text-anchor="middle" font-weight="bold">Words that appear EVERYWHERE</text>
            <text x="210" y="262" fill="white" font-size="13" text-anchor="middle">"the", "is", "a", "and", "to", "of"</text>
            <text x="210" y="285" fill="#ff6b6b" font-size="13" text-anchor="middle">→ LOW importance (low IDF)</text>

            <rect x="430" y="215" width="320" height="90" rx="8" fill="rgba(81,207,102,0.15)" stroke="#51cf66"/>
            <text x="590" y="240" fill="#51cf66" font-size="14" text-anchor="middle" font-weight="bold">Words that are RARE but meaningful</text>
            <text x="590" y="262" fill="white" font-size="13" text-anchor="middle">"neural", "network", "algorithm", "gradient"</text>
            <text x="590" y="285" fill="#51cf66" font-size="13" text-anchor="middle">→ HIGH importance (high IDF)</text>
        </svg>
    </div>
</div>

<!-- Slide: TF-IDF Visualization -->
<div class="slide" id="slide-nlp-tfidf">
    <span class="slide-number">NLP-6b</span>
    <h2>TF-IDF: Term Frequency - Inverse Document Frequency</h2>
    <p>Weight words by importance: frequent in document, rare across corpus</p>
    <div class="formula">
        $\text{TF-IDF}(t, d) = \text{TF}(t, d) \times \text{IDF}(t) \quad \text{where TF} = \frac{\text{count of t in d}}{\text{total terms}} \quad \text{IDF} = \log\frac{\text{total docs}}{\text{docs with t}}$
    </div>
    <div style="display: flex; justify-content: center; margin: 20px 0;">
        <svg viewBox="0 0 800 280" style="width: 95%; max-width: 950px; background: rgba(0,0,0,0.2); border-radius: 8px;">
            <!-- Title -->
            <text x="400" y="30" fill="#c5d45a" font-size="18" text-anchor="middle" font-weight="bold">Word Importance Spectrum</text>

            <!-- Gradient bar -->
            <defs>
                <linearGradient id="tfidfGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" style="stop-color:#ff6b6b"/>
                    <stop offset="50%" style="stop-color:#ffd700"/>
                    <stop offset="100%" style="stop-color:#51cf66"/>
                </linearGradient>
            </defs>
            <rect x="100" y="55" width="600" height="30" rx="8" fill="url(#tfidfGrad)"/>
            <text x="100" y="105" fill="#ff6b6b" font-size="14">Low TF-IDF (common words)</text>
            <text x="700" y="105" fill="#51cf66" font-size="14" text-anchor="end">High TF-IDF (rare/specific)</text>

            <!-- Word examples on spectrum -->
            <g transform="translate(130, 70)">
                <circle cx="0" cy="0" r="18" fill="rgba(255,107,107,0.6)" stroke="#ff6b6b" stroke-width="2"/>
                <text x="0" y="45" fill="white" font-size="14" text-anchor="middle">"the"</text>
                <text x="0" y="62" fill="rgba(255,255,255,0.6)" font-size="11" text-anchor="middle">common</text>
            </g>

            <g transform="translate(230, 70)">
                <circle cx="0" cy="0" r="18" fill="rgba(255,150,100,0.6)" stroke="orange" stroke-width="2"/>
                <text x="0" y="45" fill="white" font-size="14" text-anchor="middle">"is"</text>
                <text x="0" y="62" fill="rgba(255,255,255,0.6)" font-size="11" text-anchor="middle">stopword</text>
            </g>

            <g transform="translate(400, 70)">
                <circle cx="0" cy="0" r="18" fill="rgba(255,215,0,0.6)" stroke="#ffd700" stroke-width="2"/>
                <text x="0" y="45" fill="white" font-size="14" text-anchor="middle">"learning"</text>
                <text x="0" y="62" fill="rgba(255,255,255,0.6)" font-size="11" text-anchor="middle">moderate</text>
            </g>

            <g transform="translate(540, 70)">
                <circle cx="0" cy="0" r="18" fill="rgba(150,200,100,0.6)" stroke="#b8c76f" stroke-width="2"/>
                <text x="0" y="45" fill="white" font-size="14" text-anchor="middle">"neural"</text>
                <text x="0" y="62" fill="rgba(255,255,255,0.6)" font-size="11" text-anchor="middle">specific</text>
            </g>

            <g transform="translate(660, 70)">
                <circle cx="0" cy="0" r="18" fill="rgba(81,207,102,0.6)" stroke="#51cf66" stroke-width="2"/>
                <text x="0" y="45" fill="white" font-size="14" text-anchor="middle">"LSTM"</text>
                <text x="0" y="62" fill="rgba(255,255,255,0.6)" font-size="11" text-anchor="middle">rare/unique</text>
            </g>

            <!-- Example calculation box -->
            <rect x="150" y="180" width="500" height="85" rx="8" fill="rgba(0,0,0,0.4)" stroke="rgba(255,255,255,0.2)"/>
            <text x="400" y="205" fill="#c5d45a" font-size="16" text-anchor="middle" font-weight="bold">Example: "neural" in a Machine Learning document</text>
            <text x="170" y="230" fill="white" font-size="14">TF = 5/100 = 0.05 (appears 5 times in 100-word doc)</text>
            <text x="170" y="250" fill="white" font-size="14">IDF = log(1000/50) = 1.3 (found in 50 of 1000 docs)</text>
            <text x="540" y="240" fill="#51cf66" font-size="16" font-weight="bold">TF-IDF = 0.065</text>
        </svg>
    </div>
</div>

<!-- Slide: TF-IDF Code Example -->
<div class="slide" id="slide-nlp-tfidf-code">
    <span class="slide-number">NLP-7</span>
    <h2>TF-IDF in Practice</h2>
    <p>Using scikit-learn to compute TF-IDF vectors</p>
    <div class="two-column">
        <div class="card">
            <h4>Code Example</h4>
            <div class="code-table">
                <div class="code-table-header">Python: TF-IDF with sklearn</div>
                <div class="code-table-content">
                    <code>from sklearn.feature_extraction.text import TfidfVectorizer

documents = [
    "Machine learning is amazing",
    "Deep learning is a subset of machine learning",
    "Neural networks power deep learning"
]

# Create TF-IDF vectorizer
tfidf = TfidfVectorizer()
X = tfidf.fit_transform(documents)

# View feature names
print(tfidf.get_feature_names_out())
# ['amazing', 'deep', 'is', 'learning',
#  'machine', 'networks', 'neural', ...]

# View TF-IDF matrix (sparse)
print(X.toarray().round(2))</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>TF-IDF Matrix Result</h4>
            <svg viewBox="0 0 320 200" style="width: 100%; max-width: 550px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Headers -->
                <text x="100" y="25" fill="#4a90d9" font-size="12" text-anchor="middle">amazing</text>
                <text x="140" y="25" fill="#4a90d9" font-size="12" text-anchor="middle">deep</text>
                <text x="175" y="25" fill="#4a90d9" font-size="12" text-anchor="middle">learning</text>
                <text x="215" y="25" fill="#4a90d9" font-size="12" text-anchor="middle">neural</text>
                <text x="260" y="25" fill="#4a90d9" font-size="12" text-anchor="middle">networks</text>

                <!-- Doc 1 -->
                <text x="45" y="55" fill="#51cf66" font-size="7" text-anchor="middle">Doc 1</text>
                <rect x="80" y="38" width="35" height="22" fill="rgba(81,207,102,0.4)" stroke="#51cf66"/>
                <text x="97" y="53" fill="white" font-size="12" text-anchor="middle">0.63</text>
                <rect x="120" y="38" width="35" height="22" fill="rgba(255,255,255,0.05)"/>
                <text x="137" y="53" fill="white" font-size="12" text-anchor="middle">0</text>
                <rect x="160" y="38" width="35" height="22" fill="rgba(255,215,0,0.3)"/>
                <text x="177" y="53" fill="white" font-size="12" text-anchor="middle">0.35</text>
                <rect x="200" y="38" width="35" height="22" fill="rgba(255,255,255,0.05)"/>
                <text x="217" y="53" fill="white" font-size="12" text-anchor="middle">0</text>
                <rect x="240" y="38" width="35" height="22" fill="rgba(255,255,255,0.05)"/>
                <text x="257" y="53" fill="white" font-size="12" text-anchor="middle">0</text>

                <!-- Doc 2 -->
                <text x="45" y="85" fill="#ff6b6b" font-size="7" text-anchor="middle">Doc 2</text>
                <rect x="80" y="68" width="35" height="22" fill="rgba(255,255,255,0.05)"/>
                <text x="97" y="83" fill="white" font-size="12" text-anchor="middle">0</text>
                <rect x="120" y="68" width="35" height="22" fill="rgba(255,107,107,0.3)"/>
                <text x="137" y="83" fill="white" font-size="12" text-anchor="middle">0.38</text>
                <rect x="160" y="68" width="35" height="22" fill="rgba(255,215,0,0.4)"/>
                <text x="177" y="83" fill="white" font-size="12" text-anchor="middle">0.53</text>
                <rect x="200" y="68" width="35" height="22" fill="rgba(255,255,255,0.05)"/>
                <text x="217" y="83" fill="white" font-size="12" text-anchor="middle">0</text>
                <rect x="240" y="68" width="35" height="22" fill="rgba(255,255,255,0.05)"/>
                <text x="257" y="83" fill="white" font-size="12" text-anchor="middle">0</text>

                <!-- Doc 3 -->
                <text x="45" y="115" fill="#ffd700" font-size="7" text-anchor="middle">Doc 3</text>
                <rect x="80" y="98" width="35" height="22" fill="rgba(255,255,255,0.05)"/>
                <text x="97" y="113" fill="white" font-size="12" text-anchor="middle">0</text>
                <rect x="120" y="98" width="35" height="22" fill="rgba(255,215,0,0.3)"/>
                <text x="137" y="113" fill="white" font-size="12" text-anchor="middle">0.35</text>
                <rect x="160" y="98" width="35" height="22" fill="rgba(255,215,0,0.3)"/>
                <text x="177" y="113" fill="white" font-size="12" text-anchor="middle">0.35</text>
                <rect x="200" y="98" width="35" height="22" fill="rgba(81,207,102,0.4)" stroke="#51cf66"/>
                <text x="217" y="113" fill="white" font-size="12" text-anchor="middle">0.50</text>
                <rect x="240" y="98" width="35" height="22" fill="rgba(81,207,102,0.4)" stroke="#51cf66"/>
                <text x="257" y="113" fill="white" font-size="12" text-anchor="middle">0.50</text>

                <!-- Legend -->
                <text x="160" y="145" fill="#c5d45a" font-size="12" text-anchor="middle" font-weight="bold">Key Insights:</text>
                <text x="160" y="162" fill="white" font-size="12" text-anchor="middle">"amazing" high in Doc1 (unique to it)</text>
                <text x="160" y="177" fill="white" font-size="12" text-anchor="middle">"learning" moderate (appears in all docs)</text>
                <text x="160" y="192" fill="white" font-size="12" text-anchor="middle">"neural", "networks" high in Doc3 (unique)</text>
            </svg>
        </div>
    </div>
</div>

<!-- Slide: Parts of Speech (POS) Tagging -->
<div class="slide" id="slide-nlp-pos">
    <span class="slide-number">NLP-8</span>
    <h2>Parts of Speech (POS) Tagging</h2>
    <p>Labeling each word with its grammatical category</p>
    <div class="two-column">
        <div class="card">
            <h4>Common POS Tags</h4>
            <table style="width: 100%; font-size: 0.85em; border-collapse: collapse;">
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td style="padding: 5px;"><strong>NN</strong></td><td>Noun (cat, dog)</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td style="padding: 5px;"><strong>VB</strong></td><td>Verb (run, eat)</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td style="padding: 5px;"><strong>JJ</strong></td><td>Adjective (big, fast)</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td style="padding: 5px;"><strong>RB</strong></td><td>Adverb (quickly)</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td style="padding: 5px;"><strong>DT</strong></td><td>Determiner (the, a)</td>
                </tr>
                <tr>
                    <td style="padding: 5px;"><strong>NNP</strong></td><td>Proper Noun (John)</td>
                </tr>
            </table>
            <div class="code-table" style="margin-top: 15px;">
                <div class="code-table-header">Python: POS Tagging with NLTK</div>
                <div class="code-table-content">
                    <code>import nltk
from nltk import pos_tag, word_tokenize

text = "The quick brown fox jumps"
tokens = word_tokenize(text)
tagged = pos_tag(tokens)
# [('The', 'DT'), ('quick', 'JJ'),
#  ('brown', 'JJ'), ('fox', 'NN'),
#  ('jumps', 'VBZ')]</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>Visual: POS Tagging in Action</h4>
            <svg viewBox="0 0 320 220" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Sentence -->
                <text x="160" y="25" fill="#c5d45a" font-size="14" text-anchor="middle" font-weight="bold">"The quick brown fox jumps over the lazy dog"</text>

                <!-- Word boxes with POS tags -->
                <g transform="translate(20, 50)">
                    <!-- The -->
                    <rect x="0" y="0" width="35" height="35" rx="4" fill="rgba(74,144,217,0.3)" stroke="#4a90d9"/>
                    <text x="17" y="22" fill="white" font-size="12" text-anchor="middle">The</text>
                    <rect x="0" y="40" width="35" height="18" rx="3" fill="#4a90d9"/>
                    <text x="17" y="52" fill="white" font-size="12" text-anchor="middle">DT</text>
                </g>

                <g transform="translate(60, 50)">
                    <!-- quick -->
                    <rect x="0" y="0" width="40" height="35" rx="4" fill="rgba(81,207,102,0.3)" stroke="#51cf66"/>
                    <text x="20" y="22" fill="white" font-size="12" text-anchor="middle">quick</text>
                    <rect x="0" y="40" width="40" height="18" rx="3" fill="#51cf66"/>
                    <text x="20" y="52" fill="white" font-size="12" text-anchor="middle">JJ</text>
                </g>

                <g transform="translate(105, 50)">
                    <!-- brown -->
                    <rect x="0" y="0" width="45" height="35" rx="4" fill="rgba(81,207,102,0.3)" stroke="#51cf66"/>
                    <text x="22" y="22" fill="white" font-size="12" text-anchor="middle">brown</text>
                    <rect x="0" y="40" width="45" height="18" rx="3" fill="#51cf66"/>
                    <text x="22" y="52" fill="white" font-size="12" text-anchor="middle">JJ</text>
                </g>

                <g transform="translate(155, 50)">
                    <!-- fox -->
                    <rect x="0" y="0" width="35" height="35" rx="4" fill="rgba(255,107,107,0.3)" stroke="#ff6b6b"/>
                    <text x="17" y="22" fill="white" font-size="12" text-anchor="middle">fox</text>
                    <rect x="0" y="40" width="35" height="18" rx="3" fill="#ff6b6b"/>
                    <text x="17" y="52" fill="white" font-size="12" text-anchor="middle">NN</text>
                </g>

                <g transform="translate(195, 50)">
                    <!-- jumps -->
                    <rect x="0" y="0" width="45" height="35" rx="4" fill="rgba(255,215,0,0.3)" stroke="#ffd700"/>
                    <text x="22" y="22" fill="white" font-size="12" text-anchor="middle">jumps</text>
                    <rect x="0" y="40" width="45" height="18" rx="3" fill="#ffd700"/>
                    <text x="22" y="52" fill="black" font-size="12" text-anchor="middle">VBZ</text>
                </g>

                <g transform="translate(245, 50)">
                    <!-- over -->
                    <rect x="0" y="0" width="35" height="35" rx="4" fill="rgba(197,212,90,0.3)" stroke="#c5d45a"/>
                    <text x="17" y="22" fill="white" font-size="12" text-anchor="middle">over</text>
                    <rect x="0" y="40" width="35" height="18" rx="3" fill="#c5d45a"/>
                    <text x="17" y="52" fill="black" font-size="12" text-anchor="middle">IN</text>
                </g>

                <!-- Legend -->
                <g transform="translate(30, 135)">
                    <rect x="0" y="0" width="18" height="12" rx="2" fill="#4a90d9"/>
                    <text x="25" y="10" fill="white" font-size="12">DT = Determiner</text>

                    <rect x="0" y="18" width="18" height="12" rx="2" fill="#51cf66"/>
                    <text x="25" y="28" fill="white" font-size="12">JJ = Adjective</text>

                    <rect x="0" y="36" width="18" height="12" rx="2" fill="#ff6b6b"/>
                    <text x="25" y="46" fill="white" font-size="12">NN = Noun</text>

                    <rect x="140" y="0" width="18" height="12" rx="2" fill="#ffd700"/>
                    <text x="165" y="10" fill="white" font-size="12">VBZ = Verb (3rd person)</text>

                    <rect x="140" y="18" width="18" height="12" rx="2" fill="#c5d45a"/>
                    <text x="165" y="28" fill="white" font-size="12">IN = Preposition</text>
                </g>

                <!-- Use case -->
                <text x="160" y="205" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">Used for: chunking, parsing, information extraction</text>
            </svg>
        </div>
    </div>
</div>

<!-- Slide: Chunking and Chinking -->
<div class="slide" id="slide-nlp-chunking">
    <span class="slide-number">NLP-9</span>
    <h2>Chunking and Chinking</h2>
    <p>Grouping words into meaningful phrases based on POS patterns</p>
    <div class="two-column">
        <div class="card">
            <h4>Chunking</h4>
            <p style="font-size: 0.9em;">Extracting phrases that match a pattern (inclusion)</p>
            <div class="code-table" style="margin-top: 10px;">
                <div class="code-table-header">Python: Noun Phrase Chunking</div>
                <div class="code-table-content">
                    <code>import nltk

# Define a grammar pattern for NP
# NP = optional determiner + adjectives + noun
grammar = r"""
  NP: {<DT>?<JJ>*<NN>}   # Chunk NPs
"""

cp = nltk.RegexpParser(grammar)
sentence = [("the", "DT"), ("quick", "JJ"),
            ("fox", "NN"), ("jumps", "VBZ")]

result = cp.parse(sentence)
# (S (NP the/DT quick/JJ fox/NN) jumps/VBZ)</code>
                </div>
            </div>

            <h4 style="margin-top: 15px;">Chinking</h4>
            <p style="font-size: 0.9em;">Excluding patterns from chunks (exclusion)</p>
            <div class="code-table" style="margin-top: 10px;">
                <div class="code-table-content">
                    <code># Chink pattern: exclude verbs from chunks
grammar = r"""
  NP: {<.*>+}        # Chunk everything
      }<VB.*>+{      # Chink: remove verbs
"""</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>Visual: Chunking vs Chinking</h4>
            <svg viewBox="0 0 320 240" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Title -->
                <text x="160" y="20" fill="#c5d45a" font-size="12" text-anchor="middle" font-weight="bold">Chunking: Building Phrases</text>

                <!-- Original sentence -->
                <text x="160" y="45" fill="white" font-size="12" text-anchor="middle">"The quick brown fox jumps over the lazy dog"</text>

                <!-- Chunking result -->
                <g transform="translate(20, 60)">
                    <!-- NP chunk 1 -->
                    <rect x="0" y="0" width="140" height="40" rx="6" fill="rgba(81,207,102,0.2)" stroke="#51cf66" stroke-width="2"/>
                    <text x="70" y="18" fill="#51cf66" font-size="12" text-anchor="middle" font-weight="bold">NP</text>
                    <text x="70" y="32" fill="white" font-size="12" text-anchor="middle">The quick brown fox</text>

                    <!-- VP (not chunked) -->
                    <text x="165" y="32" fill="rgba(255,255,255,0.5)" font-size="12">jumps</text>

                    <!-- Preposition -->
                    <text x="200" y="32" fill="rgba(255,255,255,0.5)" font-size="12">over</text>

                    <!-- NP chunk 2 -->
                    <rect x="220" y="0" width="75" height="40" rx="6" fill="rgba(81,207,102,0.2)" stroke="#51cf66" stroke-width="2"/>
                    <text x="257" y="18" fill="#51cf66" font-size="12" text-anchor="middle" font-weight="bold">NP</text>
                    <text x="257" y="32" fill="white" font-size="12" text-anchor="middle">the lazy dog</text>
                </g>

                <!-- Divider -->
                <line x1="30" y1="120" x2="290" y2="120" stroke="rgba(255,255,255,0.3)" stroke-dasharray="5,5"/>

                <!-- Chinking title -->
                <text x="160" y="140" fill="#ff6b6b" font-size="12" text-anchor="middle" font-weight="bold">Chinking: Removing from Phrases</text>

                <!-- Chinking visualization -->
                <g transform="translate(20, 155)">
                    <!-- Start with chunk -->
                    <rect x="0" y="0" width="280" height="30" rx="5" fill="rgba(255,215,0,0.2)" stroke="#ffd700" stroke-width="2"/>
                    <text x="140" y="20" fill="white" font-size="12" text-anchor="middle">The quick brown fox jumps over the lazy dog</text>

                    <!-- Arrow -->
                    <path d="M 140 35 L 140 50" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>

                    <!-- After chinking -->
                    <rect x="0" y="55" width="130" height="30" rx="5" fill="rgba(81,207,102,0.2)" stroke="#51cf66" stroke-width="2"/>
                    <text x="65" y="75" fill="white" font-size="12" text-anchor="middle">The quick brown fox</text>

                    <!-- Chinked part -->
                    <rect x="135" y="55" width="70" height="30" rx="5" fill="rgba(255,107,107,0.3)" stroke="#ff6b6b" stroke-width="2" stroke-dasharray="4,2"/>
                    <text x="170" y="75" fill="#ff6b6b" font-size="12" text-anchor="middle">jumps over</text>
                    <text x="170" y="68" fill="#ff6b6b" font-size="7" text-anchor="middle">CHINKED</text>

                    <rect x="210" y="55" width="70" height="30" rx="5" fill="rgba(81,207,102,0.2)" stroke="#51cf66" stroke-width="2"/>
                    <text x="245" y="75" fill="white" font-size="12" text-anchor="middle">the lazy dog</text>
                </g>
            </svg>
        </div>
    </div>
</div>

<!-- Slide: Named Entity Recognition -->
<div class="slide" id="slide-nlp-ner">
    <span class="slide-number">NLP-10</span>
    <h2>Named Entity Recognition (NER)</h2>
    <p>Identifying and classifying named entities in text</p>
    <div class="two-column">
        <div class="card">
            <h4>Common Entity Types</h4>
            <table style="width: 100%; font-size: 0.85em; border-collapse: collapse;">
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td style="padding: 5px; color: #4a90d9;"><strong>PERSON</strong></td><td>Elon Musk, Marie Curie</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td style="padding: 5px; color: #51cf66;"><strong>ORG</strong></td><td>Google, United Nations</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td style="padding: 5px; color: #ff6b6b;"><strong>GPE</strong></td><td>New York, France (places)</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td style="padding: 5px; color: #ffd700;"><strong>DATE</strong></td><td>January 2024, next week</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td style="padding: 5px; color: #c5d45a;"><strong>MONEY</strong></td><td>$50, 100 euros</td>
                </tr>
                <tr>
                    <td style="padding: 5px; color: orange;"><strong>PRODUCT</strong></td><td>iPhone, Tesla Model 3</td>
                </tr>
            </table>
            <div class="code-table" style="margin-top: 15px;">
                <div class="code-table-header">Python: NER with spaCy</div>
                <div class="code-table-content">
                    <code>import spacy

nlp = spacy.load("en_core_web_sm")
text = "Apple CEO Tim Cook announced
        the new iPhone in California"

doc = nlp(text)
for ent in doc.ents:
    print(f"{ent.text}: {ent.label_}")
# Apple: ORG
# Tim Cook: PERSON
# iPhone: PRODUCT
# California: GPE</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>Visual: NER in Action</h4>
            <svg viewBox="0 0 320 240" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Sentence with entities highlighted -->
                <text x="160" y="25" fill="#c5d45a" font-size="12" text-anchor="middle" font-weight="bold">Sample Text with Entities</text>

                <!-- Text with entities -->
                <g transform="translate(15, 40)">
                    <!-- Apple -->
                    <rect x="0" y="0" width="45" height="25" rx="4" fill="rgba(81,207,102,0.3)" stroke="#51cf66"/>
                    <text x="22" y="17" fill="white" font-size="12" text-anchor="middle">Apple</text>
                    <text x="22" y="35" fill="#51cf66" font-size="7" text-anchor="middle">ORG</text>

                    <text x="55" y="17" fill="white" font-size="12">CEO</text>

                    <!-- Tim Cook -->
                    <rect x="80" y="0" width="65" height="25" rx="4" fill="rgba(74,144,217,0.3)" stroke="#4a90d9"/>
                    <text x="112" y="17" fill="white" font-size="12" text-anchor="middle">Tim Cook</text>
                    <text x="112" y="35" fill="#4a90d9" font-size="7" text-anchor="middle">PERSON</text>

                    <text x="155" y="17" fill="white" font-size="12">announced</text>
                </g>

                <g transform="translate(15, 85)">
                    <text x="0" y="17" fill="white" font-size="12">the new</text>

                    <!-- iPhone -->
                    <rect x="55" y="0" width="50" height="25" rx="4" fill="rgba(255,165,0,0.3)" stroke="orange"/>
                    <text x="80" y="17" fill="white" font-size="12" text-anchor="middle">iPhone</text>
                    <text x="80" y="35" fill="orange" font-size="7" text-anchor="middle">PRODUCT</text>

                    <text x="115" y="17" fill="white" font-size="12">in</text>

                    <!-- California -->
                    <rect x="135" y="0" width="70" height="25" rx="4" fill="rgba(255,107,107,0.3)" stroke="#ff6b6b"/>
                    <text x="170" y="17" fill="white" font-size="12" text-anchor="middle">California</text>
                    <text x="170" y="35" fill="#ff6b6b" font-size="7" text-anchor="middle">GPE</text>

                    <text x="215" y="17" fill="white" font-size="12">on</text>

                    <!-- Date -->
                    <rect x="235" y="0" width="55" height="25" rx="4" fill="rgba(255,215,0,0.3)" stroke="#ffd700"/>
                    <text x="262" y="17" fill="white" font-size="12" text-anchor="middle">June 5th</text>
                    <text x="262" y="35" fill="#ffd700" font-size="7" text-anchor="middle">DATE</text>
                </g>

                <!-- Use cases -->
                <rect x="20" y="140" width="280" height="90" rx="8" fill="rgba(0,0,0,0.3)"/>
                <text x="160" y="160" fill="#c5d45a" font-size="12" text-anchor="middle" font-weight="bold">NER Applications</text>

                <text x="35" y="180" fill="white" font-size="12">• Information Extraction from news</text>
                <text x="35" y="195" fill="white" font-size="12">• Customer support ticket routing</text>
                <text x="35" y="210" fill="white" font-size="12">• Resume parsing for job applications</text>
                <text x="35" y="225" fill="white" font-size="12">• Question answering systems</text>
            </svg>
        </div>
    </div>
</div>

<!-- Slide: Why Convert Words to Numbers? -->
<div class="slide" id="slide-nlp-words-to-numbers">
    <span class="slide-number">NLP-11</span>
    <h2>Why Convert Words to Numbers?</h2>
    <p>Machine learning models only understand numbers - we need to transform text into numerical vectors</p>
    <div style="display: flex; justify-content: center; margin: 20px 0;">
        <svg viewBox="0 0 800 300" style="width: 95%; max-width: 950px; background: rgba(0,0,0,0.2); border-radius: 8px;">
            <!-- The Problem -->
            <text x="400" y="30" fill="#c5d45a" font-size="18" text-anchor="middle" font-weight="bold">The Challenge: Text → Numbers</text>

            <!-- Left side: Text -->
            <rect x="50" y="55" width="250" height="100" rx="10" fill="rgba(74,144,217,0.2)" stroke="#4a90d9" stroke-width="2"/>
            <text x="175" y="80" fill="#4a90d9" font-size="16" text-anchor="middle" font-weight="bold">Text (Human)</text>
            <text x="175" y="110" fill="white" font-size="14" text-anchor="middle">"cat"</text>
            <text x="175" y="130" fill="white" font-size="14" text-anchor="middle">"dog"</text>
            <text x="175" y="150" fill="white" font-size="14" text-anchor="middle">"I love machine learning"</text>

            <!-- Arrow -->
            <path d="M 320 105 L 380 105" stroke="#ffd700" stroke-width="3" marker-end="url(#arrowNLP)"/>
            <text x="350" y="95" fill="#ffd700" font-size="12" text-anchor="middle">???</text>

            <!-- Right side: Numbers -->
            <rect x="400" y="55" width="250" height="100" rx="10" fill="rgba(81,207,102,0.2)" stroke="#51cf66" stroke-width="2"/>
            <text x="525" y="80" fill="#51cf66" font-size="16" text-anchor="middle" font-weight="bold">Numbers (Computer)</text>
            <text x="525" y="110" fill="white" font-size="14" text-anchor="middle">[0.2, 0.8, -0.3, ...]</text>
            <text x="525" y="130" fill="white" font-size="14" text-anchor="middle">[0.3, 0.7, -0.2, ...]</text>
            <text x="525" y="150" fill="white" font-size="14" text-anchor="middle">[0.1, 0.5, 0.9, ...]</text>

            <!-- Why box -->
            <rect x="680" y="55" width="100" height="100" rx="8" fill="rgba(255,107,107,0.2)" stroke="#ff6b6b"/>
            <text x="730" y="80" fill="#ff6b6b" font-size="12" text-anchor="middle" font-weight="bold">Why?</text>
            <text x="730" y="100" fill="white" font-size="10" text-anchor="middle">ML models</text>
            <text x="730" y="115" fill="white" font-size="10" text-anchor="middle">need math</text>
            <text x="730" y="130" fill="white" font-size="10" text-anchor="middle">operations:</text>
            <text x="730" y="145" fill="white" font-size="10" text-anchor="middle">+, -, ×, ÷</text>

            <!-- One-Hot Encoding explanation -->
            <text x="400" y="190" fill="#51cf66" font-size="18" text-anchor="middle" font-weight="bold">Solution: One-Hot Encoding</text>

            <rect x="100" y="210" width="600" height="75" rx="8" fill="rgba(81,207,102,0.1)" stroke="#51cf66"/>
            <text x="400" y="235" fill="white" font-size="14" text-anchor="middle">Assign each word a unique position in a vector, mark it with "1", everything else is "0"</text>

            <text x="180" y="265" fill="#4a90d9" font-size="13" text-anchor="middle">Vocabulary: [cat, dog, bird]</text>
            <text x="400" y="265" fill="#51cf66" font-size="13" text-anchor="middle">"cat" → [1, 0, 0]</text>
            <text x="580" y="265" fill="#ff6b6b" font-size="13" text-anchor="middle">"dog" → [0, 1, 0]</text>
        </svg>
    </div>
</div>

<!-- Slide: Word Vectors - One Hot Encoding -->
<div class="slide" id="slide-nlp-onehot">
    <span class="slide-number">NLP-11b</span>
    <h2>One-Hot Encoding: How It Works</h2>
    <p>The simplest way to represent words as numbers</p>
    <div class="two-column">
        <div class="card">
            <h4>How One-Hot Encoding Works</h4>
            <p style="font-size: 0.9em;">Each word gets a unique vector with a single 1:</p>
            <ul style="font-size: 0.85em;">
                <li>Vector length = vocabulary size</li>
                <li>Each word has exactly one "1"</li>
                <li>All other positions are "0"</li>
            </ul>
            <div class="code-table" style="margin-top: 15px;">
                <div class="code-table-header">Python: One-Hot Encoding</div>
                <div class="code-table-content">
                    <code>from sklearn.preprocessing import OneHotEncoder
import numpy as np

vocab = ["cat", "dog", "bird", "fish"]
# Create one-hot vectors
# cat  = [1, 0, 0, 0]
# dog  = [0, 1, 0, 0]
# bird = [0, 0, 1, 0]
# fish = [0, 0, 0, 1]

# Problem: vectors are orthogonal!
# cat · dog = 0 (no similarity)</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>Visual: One-Hot Vectors</h4>
            <svg viewBox="0 0 320 220" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Title -->
                <text x="160" y="20" fill="#c5d45a" font-size="12" text-anchor="middle" font-weight="bold">Vocabulary: [cat, dog, bird, fish]</text>

                <!-- Column headers -->
                <text x="130" y="50" fill="#4a90d9" font-size="12" text-anchor="middle">cat</text>
                <text x="175" y="50" fill="#4a90d9" font-size="12" text-anchor="middle">dog</text>
                <text x="220" y="50" fill="#4a90d9" font-size="12" text-anchor="middle">bird</text>
                <text x="265" y="50" fill="#4a90d9" font-size="12" text-anchor="middle">fish</text>

                <!-- cat row -->
                <text x="70" y="80" fill="#51cf66" font-size="12" text-anchor="middle">"cat"</text>
                <rect x="110" y="60" width="35" height="28" fill="rgba(81,207,102,0.4)" stroke="#51cf66" stroke-width="2"/>
                <text x="127" y="80" fill="white" font-size="14" text-anchor="middle" font-weight="bold">1</text>
                <rect x="155" y="60" width="35" height="28" fill="rgba(255,255,255,0.05)"/>
                <text x="172" y="80" fill="white" font-size="14" text-anchor="middle">0</text>
                <rect x="200" y="60" width="35" height="28" fill="rgba(255,255,255,0.05)"/>
                <text x="217" y="80" fill="white" font-size="14" text-anchor="middle">0</text>
                <rect x="245" y="60" width="35" height="28" fill="rgba(255,255,255,0.05)"/>
                <text x="262" y="80" fill="white" font-size="14" text-anchor="middle">0</text>

                <!-- dog row -->
                <text x="70" y="115" fill="#ff6b6b" font-size="12" text-anchor="middle">"dog"</text>
                <rect x="110" y="95" width="35" height="28" fill="rgba(255,255,255,0.05)"/>
                <text x="127" y="115" fill="white" font-size="14" text-anchor="middle">0</text>
                <rect x="155" y="95" width="35" height="28" fill="rgba(255,107,107,0.4)" stroke="#ff6b6b" stroke-width="2"/>
                <text x="172" y="115" fill="white" font-size="14" text-anchor="middle" font-weight="bold">1</text>
                <rect x="200" y="95" width="35" height="28" fill="rgba(255,255,255,0.05)"/>
                <text x="217" y="115" fill="white" font-size="14" text-anchor="middle">0</text>
                <rect x="245" y="95" width="35" height="28" fill="rgba(255,255,255,0.05)"/>
                <text x="262" y="115" fill="white" font-size="14" text-anchor="middle">0</text>

                <!-- bird row -->
                <text x="70" y="150" fill="#ffd700" font-size="12" text-anchor="middle">"bird"</text>
                <rect x="110" y="130" width="35" height="28" fill="rgba(255,255,255,0.05)"/>
                <text x="127" y="150" fill="white" font-size="14" text-anchor="middle">0</text>
                <rect x="155" y="130" width="35" height="28" fill="rgba(255,255,255,0.05)"/>
                <text x="172" y="150" fill="white" font-size="14" text-anchor="middle">0</text>
                <rect x="200" y="130" width="35" height="28" fill="rgba(255,215,0,0.4)" stroke="#ffd700" stroke-width="2"/>
                <text x="217" y="150" fill="white" font-size="14" text-anchor="middle" font-weight="bold">1</text>
                <rect x="245" y="130" width="35" height="28" fill="rgba(255,255,255,0.05)"/>
                <text x="262" y="150" fill="white" font-size="14" text-anchor="middle">0</text>

                <!-- Problems -->
                <rect x="30" y="170" width="260" height="45" rx="5" fill="rgba(255,107,107,0.1)" stroke="#ff6b6b"/>
                <text x="160" y="188" fill="#ff6b6b" font-size="12" text-anchor="middle" font-weight="bold">Problems with One-Hot:</text>
                <text x="160" y="203" fill="white" font-size="12" text-anchor="middle">• Huge vectors (vocab can be 100k+ words)</text>
                <text x="160" y="215" fill="white" font-size="12" text-anchor="middle">• No semantic similarity: cat ≠ similar to dog</text>
            </svg>
        </div>
    </div>
</div>

<!-- Slide: Why Word2Vec? The Problem with One-Hot -->
<div class="slide" id="slide-nlp-word2vec-why">
    <span class="slide-number">NLP-12</span>
    <h2>Why Word2Vec? The Limitations of One-Hot Encoding</h2>
    <p>One-hot vectors can't capture meaning - we need smarter representations</p>
    <div style="display: flex; justify-content: center; margin: 20px 0;">
        <svg viewBox="0 0 800 320" style="width: 95%; max-width: 950px; background: rgba(0,0,0,0.2); border-radius: 8px;">
            <!-- The Problem -->
            <text x="400" y="30" fill="#ff6b6b" font-size="18" text-anchor="middle" font-weight="bold">The Problem with One-Hot Encoding</text>

            <!-- One-hot example -->
            <rect x="50" y="50" width="300" height="100" rx="8" fill="rgba(255,107,107,0.15)" stroke="#ff6b6b"/>
            <text x="200" y="75" fill="#ff6b6b" font-size="14" text-anchor="middle" font-weight="bold">One-Hot Vectors</text>
            <text x="200" y="100" fill="white" font-size="13" text-anchor="middle">"cat" = [1, 0, 0, 0, ...]</text>
            <text x="200" y="120" fill="white" font-size="13" text-anchor="middle">"dog" = [0, 1, 0, 0, ...]</text>
            <text x="200" y="140" fill="white" font-size="13" text-anchor="middle">"car" = [0, 0, 1, 0, ...]</text>

            <!-- Problems -->
            <rect x="400" y="50" width="350" height="100" rx="8" fill="rgba(255,107,107,0.1)" stroke="#ff6b6b"/>
            <text x="575" y="75" fill="#ff6b6b" font-size="14" text-anchor="middle" font-weight="bold">Problems</text>
            <text x="575" y="100" fill="white" font-size="12" text-anchor="middle">❌ cat · dog = 0 (no similarity!)</text>
            <text x="575" y="118" fill="white" font-size="12" text-anchor="middle">❌ cat · car = 0 (same as cat-dog!)</text>
            <text x="575" y="136" fill="rgba(255,255,255,0.7)" font-size="11" text-anchor="middle">But cats and dogs are BOTH animals - they should be similar!</text>

            <!-- The Solution -->
            <text x="400" y="180" fill="#51cf66" font-size="18" text-anchor="middle" font-weight="bold">The Solution: Word2Vec (Word Embeddings)</text>

            <!-- Word2Vec explanation -->
            <rect x="50" y="200" width="340" height="105" rx="8" fill="rgba(81,207,102,0.15)" stroke="#51cf66"/>
            <text x="220" y="225" fill="#51cf66" font-size="14" text-anchor="middle" font-weight="bold">What Word2Vec Does</text>
            <text x="220" y="248" fill="white" font-size="12" text-anchor="middle">• Learns from context: "cat sat on the mat"</text>
            <text x="220" y="268" fill="white" font-size="12" text-anchor="middle">• Words in similar contexts → similar vectors</text>
            <text x="220" y="288" fill="white" font-size="12" text-anchor="middle">• Dense vectors (300 dims vs 100,000+ for one-hot)</text>

            <!-- Result -->
            <rect x="420" y="200" width="330" height="105" rx="8" fill="rgba(81,207,102,0.15)" stroke="#51cf66"/>
            <text x="585" y="225" fill="#51cf66" font-size="14" text-anchor="middle" font-weight="bold">The Result</text>
            <text x="585" y="248" fill="white" font-size="12" text-anchor="middle">✓ cat · dog = 0.76 (high - both animals!)</text>
            <text x="585" y="268" fill="white" font-size="12" text-anchor="middle">✓ cat · car = 0.21 (low - unrelated)</text>
            <text x="585" y="288" fill="#ffd700" font-size="12" text-anchor="middle">✓ king - man + woman ≈ queen</text>
        </svg>
    </div>
</div>

<!-- Slide: Word Embeddings -->
<div class="slide" id="slide-nlp-embeddings">
    <span class="slide-number">NLP-12b</span>
    <h2>Word Embeddings: Dense Semantic Vectors</h2>
    <p>Learn vector representations where similar words are close together</p>
    <div class="two-column">
        <div class="card">
            <h4>Word2Vec / GloVe</h4>
            <p style="font-size: 0.9em;">Instead of sparse one-hot vectors, learn <strong>dense</strong> vectors (50-300 dimensions) from text:</p>
            <ul style="font-size: 0.85em;">
                <li>"king" - "man" + "woman" ≈ "queen"</li>
                <li>"Paris" - "France" + "Italy" ≈ "Rome"</li>
                <li>Similar words have similar vectors</li>
            </ul>
            <div class="code-table" style="margin-top: 15px;">
                <div class="code-table-header">Python: Using Word Embeddings</div>
                <div class="code-table-content">
                    <code>import gensim.downloader as api

# Load pre-trained Word2Vec
model = api.load("word2vec-google-news-300")

# Find similar words
model.most_similar("king")
# [('kings', 0.71), ('queen', 0.65), ...]

# Vector arithmetic!
result = model.most_similar(
    positive=['king', 'woman'],
    negative=['man']
)
# [('queen', 0.71), ...]</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>Visual: Word Embedding Space</h4>
            <svg viewBox="0 0 320 220" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Title -->
                <text x="160" y="20" fill="#c5d45a" font-size="12" text-anchor="middle" font-weight="bold">2D Projection of Word Vectors</text>

                <!-- Axes -->
                <line x1="30" y1="190" x2="300" y2="190" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <line x1="30" y1="190" x2="30" y2="40" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>

                <!-- Animals cluster - ANIMATED with floating effect -->
                <ellipse cx="80" cy="70" rx="45" ry="35" fill="rgba(81,207,102,0.15)" stroke="#51cf66" stroke-dasharray="4,2">
                    <animate attributeName="rx" values="45;48;45" dur="3s" repeatCount="indefinite"/>
                    <animate attributeName="ry" values="35;38;35" dur="3s" repeatCount="indefinite"/>
                </ellipse>
                <g>
                    <circle cx="65" cy="60" r="5" fill="#51cf66">
                        <animate attributeName="cx" values="65;62;68;65" dur="4s" repeatCount="indefinite"/>
                        <animate attributeName="cy" values="60;58;62;60" dur="4s" repeatCount="indefinite"/>
                    </circle>
                    <text x="65" y="50" fill="#51cf66" font-size="12" text-anchor="middle">
                        cat
                        <animate attributeName="x" values="65;62;68;65" dur="4s" repeatCount="indefinite"/>
                    </text>
                </g>
                <g>
                    <circle cx="90" cy="70" r="5" fill="#51cf66">
                        <animate attributeName="cx" values="90;93;87;90" dur="4.5s" repeatCount="indefinite"/>
                        <animate attributeName="cy" values="70;68;72;70" dur="4.5s" repeatCount="indefinite"/>
                    </circle>
                    <text x="90" y="60" fill="#51cf66" font-size="12" text-anchor="middle">
                        dog
                        <animate attributeName="x" values="90;93;87;90" dur="4.5s" repeatCount="indefinite"/>
                    </text>
                </g>
                <g>
                    <circle cx="75" cy="85" r="5" fill="#51cf66">
                        <animate attributeName="cx" values="75;78;72;75" dur="3.5s" repeatCount="indefinite"/>
                        <animate attributeName="cy" values="85;82;88;85" dur="3.5s" repeatCount="indefinite"/>
                    </circle>
                    <text x="75" y="100" fill="#51cf66" font-size="12" text-anchor="middle">
                        pet
                        <animate attributeName="x" values="75;78;72;75" dur="3.5s" repeatCount="indefinite"/>
                    </text>
                </g>
                <text x="80" y="115" fill="#51cf66" font-size="7" text-anchor="middle">Animals</text>

                <!-- Royalty cluster - ANIMATED -->
                <ellipse cx="240" cy="80" rx="50" ry="40" fill="rgba(255,215,0,0.15)" stroke="#ffd700" stroke-dasharray="4,2">
                    <animate attributeName="rx" values="50;53;50" dur="3.5s" repeatCount="indefinite"/>
                    <animate attributeName="ry" values="40;43;40" dur="3.5s" repeatCount="indefinite"/>
                </ellipse>
                <g>
                    <circle cx="220" cy="65" r="5" fill="#ffd700">
                        <animate attributeName="cx" values="220;217;223;220" dur="4s" repeatCount="indefinite"/>
                        <animate attributeName="cy" values="65;63;67;65" dur="4s" repeatCount="indefinite"/>
                    </circle>
                    <text x="220" y="55" fill="#ffd700" font-size="12" text-anchor="middle">
                        king
                        <animate attributeName="x" values="220;217;223;220" dur="4s" repeatCount="indefinite"/>
                    </text>
                </g>
                <g>
                    <circle cx="260" cy="70" r="5" fill="#ffd700">
                        <animate attributeName="cx" values="260;263;257;260" dur="4.2s" repeatCount="indefinite"/>
                        <animate attributeName="cy" values="70;67;73;70" dur="4.2s" repeatCount="indefinite"/>
                    </circle>
                    <text x="260" y="60" fill="#ffd700" font-size="12" text-anchor="middle">
                        queen
                        <animate attributeName="x" values="260;263;257;260" dur="4.2s" repeatCount="indefinite"/>
                    </text>
                </g>
                <g>
                    <circle cx="240" cy="95" r="5" fill="#ffd700">
                        <animate attributeName="cx" values="240;237;243;240" dur="3.8s" repeatCount="indefinite"/>
                        <animate attributeName="cy" values="95;92;98;95" dur="3.8s" repeatCount="indefinite"/>
                    </circle>
                    <text x="240" y="110" fill="#ffd700" font-size="12" text-anchor="middle">
                        royal
                        <animate attributeName="x" values="240;237;243;240" dur="3.8s" repeatCount="indefinite"/>
                    </text>
                </g>
                <text x="240" y="125" fill="#ffd700" font-size="7" text-anchor="middle">Royalty</text>

                <!-- Countries cluster - ANIMATED -->
                <ellipse cx="160" cy="160" rx="55" ry="30" fill="rgba(74,144,217,0.15)" stroke="#4a90d9" stroke-dasharray="4,2">
                    <animate attributeName="rx" values="55;58;55" dur="4s" repeatCount="indefinite"/>
                    <animate attributeName="ry" values="30;33;30" dur="4s" repeatCount="indefinite"/>
                </ellipse>
                <g>
                    <circle cx="130" cy="155" r="5" fill="#4a90d9">
                        <animate attributeName="cx" values="130;127;133;130" dur="4.3s" repeatCount="indefinite"/>
                        <animate attributeName="cy" values="155;153;157;155" dur="4.3s" repeatCount="indefinite"/>
                    </circle>
                    <text x="130" y="145" fill="#4a90d9" font-size="12" text-anchor="middle">
                        France
                        <animate attributeName="x" values="130;127;133;130" dur="4.3s" repeatCount="indefinite"/>
                    </text>
                </g>
                <g>
                    <circle cx="160" cy="165" r="5" fill="#4a90d9">
                        <animate attributeName="cx" values="160;163;157;160" dur="3.7s" repeatCount="indefinite"/>
                        <animate attributeName="cy" values="165;162;168;165" dur="3.7s" repeatCount="indefinite"/>
                    </circle>
                    <text x="160" y="155" fill="#4a90d9" font-size="12" text-anchor="middle">
                        Italy
                        <animate attributeName="x" values="160;163;157;160" dur="3.7s" repeatCount="indefinite"/>
                    </text>
                </g>
                <g>
                    <circle cx="190" cy="155" r="5" fill="#4a90d9">
                        <animate attributeName="cx" values="190;193;187;190" dur="4.1s" repeatCount="indefinite"/>
                        <animate attributeName="cy" values="155;152;158;155" dur="4.1s" repeatCount="indefinite"/>
                    </circle>
                    <text x="190" y="145" fill="#4a90d9" font-size="12" text-anchor="middle">
                        Spain
                        <animate attributeName="x" values="190;193;187;190" dur="4.1s" repeatCount="indefinite"/>
                    </text>
                </g>

                <!-- Vector arithmetic illustration - ANIMATED pulsing arrow -->
                <path d="M 220 65 L 260 70" stroke="#ff6b6b" stroke-width="1.5" marker-end="url(#arrowNLP)">
                    <animate attributeName="stroke-opacity" values="0.5;1;0.5" dur="2s" repeatCount="indefinite"/>
                </path>
                <text x="245" y="58" fill="#ff6b6b" font-size="7">
                    king→queen
                    <animate attributeName="opacity" values="0.5;1;0.5" dur="2s" repeatCount="indefinite"/>
                </text>

                <!-- Key insight -->
                <text x="160" y="205" fill="white" font-size="12" text-anchor="middle">Similar meaning = Close in vector space</text>
            </svg>
        </div>
    </div>
</div>

<!-- Slide: Word Similarity and Cosine Distance -->
<div class="slide" id="slide-nlp-similarity">
    <span class="slide-number">NLP-12b</span>
    <h2>Measuring Word Similarity: Cosine Distance</h2>
    <p>How similar are two word vectors? Measure the angle between them!</p>
    <div class="formula">
        $\cos(\theta) = \frac{\mathbf{A} \cdot \mathbf{B}}{||\mathbf{A}|| \times ||\mathbf{B}||} \quad \text{where: } \cos=1 \text{ (identical)}, \cos=0 \text{ (unrelated)}, \cos=-1 \text{ (opposite)}$
    </div>
    <div style="display: flex; justify-content: center; margin: 20px 0;">
        <svg viewBox="0 0 700 300" style="width: 95%; max-width: 900px; background: rgba(0,0,0,0.2); border-radius: 8px;">
            <!-- Axes -->
            <line x1="80" y1="250" x2="380" y2="250" stroke="rgba(255,255,255,0.5)" stroke-width="2"/>
            <line x1="80" y1="250" x2="80" y2="50" stroke="rgba(255,255,255,0.5)" stroke-width="2"/>
            <text x="230" y="280" fill="rgba(255,255,255,0.7)" font-size="14" text-anchor="middle">Dimension 1</text>
            <text x="40" y="150" fill="rgba(255,255,255,0.7)" font-size="14" text-anchor="middle" transform="rotate(-90, 40, 150)">Dimension 2</text>

            <!-- Origin -->
            <circle cx="80" cy="250" r="5" fill="white"/>
            <text x="70" y="270" fill="white" font-size="12">Origin</text>

            <!-- Vector A (king) - static reference -->
            <line x1="80" y1="250" x2="320" y2="80" stroke="#51cf66" stroke-width="4"/>
            <circle cx="320" cy="80" r="10" fill="#51cf66"/>
            <text x="340" y="75" fill="#51cf66" font-size="16" font-weight="bold">king</text>

            <!-- Vector B (comparison) - ANIMATED rotating vector -->
            <g transform-origin="80 250">
                <animateTransform attributeName="transform" type="rotate"
                    values="0 80 250; -10 80 250; 0 80 250; 25 80 250; 0 80 250"
                    dur="6s" repeatCount="indefinite" keyTimes="0;0.25;0.5;0.75;1"/>
                <line x1="80" y1="250" x2="280" y2="100" stroke="#4a90d9" stroke-width="4"/>
                <circle cx="280" cy="100" r="10" fill="#4a90d9">
                    <animate attributeName="fill" values="#51cf66;#51cf66;#4a90d9;#ff6b6b;#4a90d9" dur="6s" repeatCount="indefinite"/>
                </circle>
                <text x="300" y="95" fill="#4a90d9" font-size="14" font-weight="bold">
                    <animate attributeName="fill" values="#51cf66;#51cf66;#4a90d9;#ff6b6b;#4a90d9" dur="6s" repeatCount="indefinite"/>
                    word
                </text>
            </g>

            <!-- Animated angle arc -->
            <path d="M 140 200 A 80 80 0 0 1 130 180" stroke="#ffd700" stroke-width="3" fill="none">
                <animate attributeName="d"
                    values="M 140 200 A 80 80 0 0 1 145 175;M 140 200 A 80 80 0 0 1 150 165;M 140 200 A 80 80 0 0 1 145 175;M 140 200 A 80 80 0 0 1 180 195;M 140 200 A 80 80 0 0 1 145 175"
                    dur="6s" repeatCount="indefinite"/>
            </path>

            <!-- Animated similarity score -->
            <g>
                <rect x="150" y="120" width="100" height="35" rx="6" fill="rgba(0,0,0,0.5)" stroke="#ffd700" stroke-width="2"/>
                <text x="200" y="135" fill="#ffd700" font-size="12" text-anchor="middle" font-weight="bold">Similarity:</text>
                <text x="200" y="150" fill="white" font-size="14" text-anchor="middle" font-weight="bold">
                    <animate attributeName="fill" values="#51cf66;#51cf66;#4a90d9;#ff6b6b;#4a90d9" dur="6s" repeatCount="indefinite"/>
                    cos =
                    <tspan>
                        <animate attributeName="textContent" values="0.99;0.99;0.85;0.35;0.85" dur="6s" repeatCount="indefinite"/>
                    </tspan>
                </text>
                <!-- Workaround: multiple text elements that fade in/out -->
                <text x="200" y="150" fill="white" font-size="14" text-anchor="middle" font-weight="bold" opacity="0">
                    <animate attributeName="opacity" values="1;1;0;0;0" dur="6s" repeatCount="indefinite" keyTimes="0;0.2;0.25;0.5;1"/>
                    cos = 0.99
                </text>
                <text x="200" y="150" fill="white" font-size="14" text-anchor="middle" font-weight="bold" opacity="0">
                    <animate attributeName="opacity" values="0;0;1;0;0" dur="6s" repeatCount="indefinite" keyTimes="0;0.2;0.5;0.55;1"/>
                    cos = 0.85
                </text>
                <text x="200" y="150" fill="white" font-size="14" text-anchor="middle" font-weight="bold" opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;0" dur="6s" repeatCount="indefinite" keyTimes="0;0.5;0.7;0.8;1"/>
                    cos = 0.35
                </text>
            </g>

            <!-- State labels that appear -->
            <text x="200" y="105" fill="#51cf66" font-size="12" text-anchor="middle" font-weight="bold" opacity="0">
                <animate attributeName="opacity" values="1;1;0;0;0" dur="6s" repeatCount="indefinite" keyTimes="0;0.2;0.25;0.5;1"/>
                Very Similar!
            </text>
            <text x="200" y="105" fill="#4a90d9" font-size="12" text-anchor="middle" font-weight="bold" opacity="0">
                <animate attributeName="opacity" values="0;0;1;0;0" dur="6s" repeatCount="indefinite" keyTimes="0;0.2;0.5;0.55;1"/>
                Similar
            </text>
            <text x="200" y="105" fill="#ff6b6b" font-size="12" text-anchor="middle" font-weight="bold" opacity="0">
                <animate attributeName="opacity" values="0;0;0;1;0" dur="6s" repeatCount="indefinite" keyTimes="0;0.5;0.7;0.8;1"/>
                Different!
            </text>

            <!-- Legend box -->
            <rect x="450" y="60" width="220" height="180" rx="8" fill="rgba(0,0,0,0.3)" stroke="rgba(255,255,255,0.2)"/>
            <text x="560" y="90" fill="white" font-size="16" text-anchor="middle" font-weight="bold">Similarity Scale</text>

            <rect x="470" y="110" width="30" height="20" fill="#51cf66"/>
            <text x="510" y="125" fill="white" font-size="14">cos ≈ 1.0 (Very Similar)</text>

            <rect x="470" y="145" width="30" height="20" fill="#ffd700"/>
            <text x="510" y="160" fill="white" font-size="14">cos ≈ 0.5 (Somewhat)</text>

            <rect x="470" y="180" width="30" height="20" fill="#ff6b6b"/>
            <text x="510" y="195" fill="white" font-size="14">cos ≈ 0.0 (Different)</text>

            <text x="560" y="225" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">Smaller angle = Higher similarity</text>
            <text x="560" y="240" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">Watch the vector rotate!</text>
        </svg>
    </div>
</div>

<!-- Slide: Sentiment Analysis Visualization -->
<div class="slide" id="slide-nlp-sentiment">
    <span class="slide-number">NLP-12c</span>
    <h2>Sentiment Analysis: Understanding Emotion in Text</h2>
    <p>Classifying text as positive, negative, or neutral</p>
    <div style="display: flex; justify-content: center; margin: 20px 0;">
        <svg viewBox="0 0 750 280" style="width: 95%; max-width: 950px;">
            <!-- Title -->
            <text x="375" y="25" fill="#c5d45a" font-size="12" text-anchor="middle" font-weight="bold">Sentiment Analysis Pipeline</text>

            <!-- Input texts - with highlight animation -->
            <g transform="translate(30, 45)">
                <rect x="0" y="0" width="180" height="90" rx="8" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)">
                    <animate attributeName="stroke-opacity" values="0.3;0.8;0.3" dur="6s" repeatCount="indefinite" keyTimes="0;0.1;0.3"/>
                </rect>
                <text x="90" y="25" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Input Reviews</text>
                <text x="90" y="50" fill="#51cf66" font-size="12" text-anchor="middle">
                    "This product is amazing!"
                    <animate attributeName="opacity" values="0.5;1;0.5" dur="6s" repeatCount="indefinite" keyTimes="0;0.08;0.2"/>
                </text>
                <text x="90" y="68" fill="#ff6b6b" font-size="12" text-anchor="middle">"Terrible experience, waste of money"</text>
                <text x="90" y="86" fill="#ffd700" font-size="12" text-anchor="middle">"It's okay, nothing special"</text>
            </g>

            <!-- Animated arrow 1 - data flowing -->
            <path d="M 220 90 L 260 90" stroke="#ffd700" stroke-width="2" opacity="0.3"/>
            <circle r="5" fill="#51cf66">
                <animate attributeName="cx" values="220;260" dur="0.5s" begin="0.5s;6.5s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="90;90" dur="0.5s" begin="0.5s;6.5s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.5s" begin="0.5s;6.5s" repeatCount="indefinite"/>
            </circle>

            <!-- Processing - with step highlighting -->
            <g transform="translate(270, 45)">
                <rect x="0" y="0" width="150" height="90" rx="8" fill="rgba(74,144,217,0.2)" stroke="#4a90d9">
                    <animate attributeName="stroke-opacity" values="0.5;1;0.5" dur="6s" repeatCount="indefinite" keyTimes="0;0.25;0.5"/>
                </rect>
                <text x="75" y="25" fill="#4a90d9" font-size="12" text-anchor="middle" font-weight="bold">NLP Pipeline</text>
                <!-- Animated step highlights -->
                <text x="75" y="45" fill="white" font-size="12" text-anchor="middle">
                    1. Tokenize
                    <animate attributeName="fill" values="white;#4a90d9;white" dur="6s" repeatCount="indefinite" keyTimes="0;0.18;0.25"/>
                </text>
                <text x="75" y="60" fill="white" font-size="12" text-anchor="middle">
                    2. Vectorize (TF-IDF)
                    <animate attributeName="fill" values="white;white;#4a90d9;white" dur="6s" repeatCount="indefinite" keyTimes="0;0.18;0.28;0.35"/>
                </text>
                <text x="75" y="75" fill="white" font-size="12" text-anchor="middle">
                    3. Classify
                    <animate attributeName="fill" values="white;white;#4a90d9;white" dur="6s" repeatCount="indefinite" keyTimes="0;0.28;0.38;0.45"/>
                </text>
            </g>

            <!-- Animated arrow 2 -->
            <path d="M 430 90 L 470 90" stroke="#ffd700" stroke-width="2" opacity="0.3"/>
            <circle r="5" fill="#4a90d9">
                <animate attributeName="cx" values="430;470" dur="0.5s" begin="2s;8s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="90;90" dur="0.5s" begin="2s;8s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.5s" begin="2s;8s" repeatCount="indefinite"/>
            </circle>

            <!-- Output - with animated bars filling -->
            <g transform="translate(480, 45)">
                <rect x="0" y="0" width="230" height="90" rx="8" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)">
                    <animate attributeName="stroke-opacity" values="0.3;0.3;1;0.3" dur="6s" repeatCount="indefinite" keyTimes="0;0.4;0.6;0.8"/>
                </rect>
                <text x="115" y="25" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Sentiment Scores</text>

                <!-- Positive bar - animated fill -->
                <rect x="15" y="38" width="140" height="14" rx="3" fill="rgba(81,207,102,0.4)" stroke="#51cf66"/>
                <rect x="15" y="38" height="14" rx="3" fill="#51cf66">
                    <animate attributeName="width" values="0;0;126;126" dur="6s" repeatCount="indefinite" keyTimes="0;0.45;0.6;1"/>
                </rect>
                <text x="165" y="50" fill="#51cf66" font-size="12" opacity="0">
                    0.92 Positive
                    <animate attributeName="opacity" values="0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.55;0.65;1"/>
                </text>

                <!-- Negative bar - animated fill -->
                <rect x="15" y="56" width="140" height="14" rx="3" fill="rgba(255,107,107,0.4)" stroke="#ff6b6b"/>
                <rect x="15" y="56" height="14" rx="3" fill="#ff6b6b">
                    <animate attributeName="width" values="0;0;119;119" dur="6s" repeatCount="indefinite" keyTimes="0;0.5;0.65;1"/>
                </rect>
                <text x="165" y="68" fill="#ff6b6b" font-size="12" opacity="0">
                    0.88 Negative
                    <animate attributeName="opacity" values="0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.6;0.7;1"/>
                </text>

                <!-- Neutral bar - animated fill -->
                <rect x="15" y="74" width="140" height="14" rx="3" fill="rgba(255,215,0,0.4)" stroke="#ffd700"/>
                <rect x="15" y="74" height="14" rx="3" fill="#ffd700">
                    <animate attributeName="width" values="0;0;70;70" dur="6s" repeatCount="indefinite" keyTimes="0;0.55;0.7;1"/>
                </rect>
                <text x="165" y="86" fill="#ffd700" font-size="12" opacity="0">
                    0.65 Neutral
                    <animate attributeName="opacity" values="0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.65;0.75;1"/>
                </text>
            </g>

            <!-- Detailed example -->
            <text x="375" y="160" fill="white" font-size="14" text-anchor="middle" font-weight="bold">How Sentiment Words Contribute</text>

            <!-- Sentiment word highlights with sequential animation -->
            <g transform="translate(75, 175)">
                <text x="0" y="15" fill="white" font-size="12">"The food was</text>
                <rect x="85" y="2" width="70" height="18" rx="4" fill="rgba(81,207,102,0.4)" stroke="#51cf66">
                    <animate attributeName="stroke-width" values="1;3;1" dur="3s" repeatCount="indefinite" keyTimes="0;0.15;0.3"/>
                </rect>
                <text x="120" y="15" fill="#51cf66" font-size="12" text-anchor="middle" font-weight="bold">delicious</text>
                <text x="160" y="15" fill="white" font-size="12">but the</text>
                <rect x="225" y="2" width="60" height="18" rx="4" fill="rgba(255,107,107,0.4)" stroke="#ff6b6b">
                    <animate attributeName="stroke-width" values="1;1;3;1" dur="3s" repeatCount="indefinite" keyTimes="0;0.3;0.45;0.6"/>
                </rect>
                <text x="255" y="15" fill="#ff6b6b" font-size="12" text-anchor="middle" font-weight="bold">service</text>
                <text x="290" y="15" fill="white" font-size="12">was</text>
                <rect x="315" y="2" width="50" height="18" rx="4" fill="rgba(255,107,107,0.4)" stroke="#ff6b6b">
                    <animate attributeName="stroke-width" values="1;1;3;1" dur="3s" repeatCount="indefinite" keyTimes="0;0.55;0.7;0.85"/>
                </rect>
                <text x="340" y="15" fill="#ff6b6b" font-size="12" text-anchor="middle" font-weight="bold">slow</text>
                <text x="370" y="15" fill="white" font-size="12">"</text>
            </g>

            <!-- Word contributions with pulse -->
            <g transform="translate(75, 210)">
                <text x="120" y="15" fill="#51cf66" font-size="12" text-anchor="middle">
                    +0.8
                    <animate attributeName="font-size" values="12;14;12" dur="3s" repeatCount="indefinite" keyTimes="0;0.15;0.3"/>
                </text>
                <text x="255" y="15" fill="#ff6b6b" font-size="12" text-anchor="middle">
                    -0.2
                    <animate attributeName="font-size" values="12;12;14;12" dur="3s" repeatCount="indefinite" keyTimes="0;0.3;0.45;0.6"/>
                </text>
                <text x="340" y="15" fill="#ff6b6b" font-size="12" text-anchor="middle">
                    -0.5
                    <animate attributeName="font-size" values="12;12;14;12" dur="3s" repeatCount="indefinite" keyTimes="0;0.55;0.7;0.85"/>
                </text>
            </g>

            <!-- Result with pulse -->
            <g transform="translate(480, 190)">
                <rect x="0" y="0" width="200" height="70" rx="8" fill="rgba(255,215,0,0.15)" stroke="#ffd700">
                    <animate attributeName="stroke-opacity" values="0.5;1;0.5" dur="2s" repeatCount="indefinite"/>
                </rect>
                <text x="100" y="25" fill="#ffd700" font-size="12" text-anchor="middle" font-weight="bold">Final Sentiment</text>
                <text x="100" y="45" fill="white" font-size="12" text-anchor="middle">+0.8 - 0.2 - 0.5 = +0.1</text>
                <text x="100" y="62" fill="#ffd700" font-size="12" text-anchor="middle">Slightly Positive (Mixed)</text>
            </g>
        </svg>
    </div>
</div>

<!-- Slide: Text Classification Comparison -->
<div class="slide" id="slide-nlp-classification-compare">
    <span class="slide-number">NLP-12d</span>
    <h2>Text Classification Methods Compared</h2>
    <p>Different approaches for categorizing text documents</p>
    <div style="display: flex; justify-content: center; margin: 15px 0;">
        <svg viewBox="0 0 750 320" style="width: 95%; max-width: 950px;">
            <!-- Naive Bayes -->
            <g transform="translate(30, 20)">
                <rect x="0" y="0" width="160" height="140" rx="10" fill="rgba(81,207,102,0.15)" stroke="#51cf66" stroke-width="2"/>
                <text x="80" y="25" fill="#51cf66" font-size="14" text-anchor="middle" font-weight="bold">Naive Bayes</text>
                <text x="80" y="50" fill="white" font-size="12" text-anchor="middle">P(class|words)</text>

                <!-- Simple probability bars -->
                <rect x="20" y="65" width="120" height="15" rx="3" fill="rgba(255,255,255,0.1)"/>
                <rect x="20" y="65" width="84" height="15" rx="3" fill="#51cf66"/>
                <text x="20" y="95" fill="white" font-size="12">spam: 70%</text>
                <rect x="20" y="100" width="120" height="15" rx="3" fill="rgba(255,255,255,0.1)"/>
                <rect x="20" y="100" width="36" height="15" rx="3" fill="#4a90d9"/>
                <text x="20" y="128" fill="white" font-size="12">ham: 30%</text>
            </g>

            <!-- SVM -->
            <g transform="translate(210, 20)">
                <rect x="0" y="0" width="160" height="140" rx="10" fill="rgba(74,144,217,0.15)" stroke="#4a90d9" stroke-width="2"/>
                <text x="80" y="25" fill="#4a90d9" font-size="14" text-anchor="middle" font-weight="bold">SVM</text>
                <text x="80" y="50" fill="white" font-size="12" text-anchor="middle">Maximum margin</text>

                <!-- SVM visualization -->
                <line x1="20" y1="130" x2="140" y2="60" stroke="#ffd700" stroke-width="2"/>
                <circle cx="45" cy="85" r="5" fill="#51cf66"/>
                <circle cx="60" cy="100" r="5" fill="#51cf66"/>
                <circle cx="40" cy="110" r="5" fill="#51cf66"/>
                <circle cx="100" cy="75" r="5" fill="#ff6b6b"/>
                <circle cx="120" cy="90" r="5" fill="#ff6b6b"/>
                <circle cx="130" cy="70" r="5" fill="#ff6b6b"/>
            </g>

            <!-- Logistic Regression -->
            <g transform="translate(390, 20)">
                <rect x="0" y="0" width="160" height="140" rx="10" fill="rgba(255,215,0,0.15)" stroke="#ffd700" stroke-width="2"/>
                <text x="80" y="25" fill="#ffd700" font-size="14" text-anchor="middle" font-weight="bold">Logistic Regression</text>
                <text x="80" y="50" fill="white" font-size="12" text-anchor="middle">Sigmoid probability</text>

                <!-- Sigmoid curve -->
                <path d="M 20 120 Q 50 120 80 75 Q 110 30 140 30" stroke="#ffd700" stroke-width="2" fill="none"/>
                <line x1="80" y1="30" x2="80" y2="130" stroke="rgba(255,255,255,0.3)" stroke-dasharray="3,3"/>
                <text x="80" y="138" fill="white" font-size="12" text-anchor="middle">threshold</text>
            </g>

            <!-- Neural Network -->
            <g transform="translate(570, 20)">
                <rect x="0" y="0" width="160" height="140" rx="10" fill="rgba(255,107,107,0.15)" stroke="#ff6b6b" stroke-width="2"/>
                <text x="80" y="25" fill="#ff6b6b" font-size="14" text-anchor="middle" font-weight="bold">Neural Network</text>
                <text x="80" y="50" fill="white" font-size="12" text-anchor="middle">Deep learning</text>

                <!-- Simple NN diagram -->
                <circle cx="30" cy="75" r="6" fill="#4a90d9"/>
                <circle cx="30" cy="95" r="6" fill="#4a90d9"/>
                <circle cx="30" cy="115" r="6" fill="#4a90d9"/>
                <circle cx="80" cy="80" r="6" fill="#ffd700"/>
                <circle cx="80" cy="105" r="6" fill="#ffd700"/>
                <circle cx="130" cy="92" r="6" fill="#51cf66"/>
                <!-- Connections -->
                <line x1="36" y1="75" x2="74" y2="80" stroke="rgba(255,255,255,0.3)"/>
                <line x1="36" y1="95" x2="74" y2="80" stroke="rgba(255,255,255,0.3)"/>
                <line x1="36" y1="95" x2="74" y2="105" stroke="rgba(255,255,255,0.3)"/>
                <line x1="36" y1="115" x2="74" y2="105" stroke="rgba(255,255,255,0.3)"/>
                <line x1="86" y1="80" x2="124" y2="92" stroke="rgba(255,255,255,0.3)"/>
                <line x1="86" y1="105" x2="124" y2="92" stroke="rgba(255,255,255,0.3)"/>
            </g>

            <!-- Comparison table -->
            <g transform="translate(30, 175)">
                <rect x="0" y="0" width="690" height="130" rx="8" fill="rgba(0,0,0,0.2)"/>

                <!-- Headers -->
                <text x="80" y="25" fill="#c5d45a" font-size="12" text-anchor="middle" font-weight="bold">Criteria</text>
                <text x="220" y="25" fill="#51cf66" font-size="12" text-anchor="middle" font-weight="bold">Naive Bayes</text>
                <text x="360" y="25" fill="#4a90d9" font-size="12" text-anchor="middle" font-weight="bold">SVM</text>
                <text x="500" y="25" fill="#ffd700" font-size="12" text-anchor="middle" font-weight="bold">Log. Reg.</text>
                <text x="630" y="25" fill="#ff6b6b" font-size="12" text-anchor="middle" font-weight="bold">Neural Net</text>

                <line x1="10" y1="35" x2="680" y2="35" stroke="rgba(255,255,255,0.2)"/>

                <!-- Speed -->
                <text x="80" y="55" fill="white" font-size="12" text-anchor="middle">Speed</text>
                <text x="220" y="55" fill="#51cf66" font-size="12" text-anchor="middle">Very Fast</text>
                <text x="360" y="55" fill="#ffd700" font-size="12" text-anchor="middle">Medium</text>
                <text x="500" y="55" fill="#51cf66" font-size="12" text-anchor="middle">Fast</text>
                <text x="630" y="55" fill="#ff6b6b" font-size="12" text-anchor="middle">Slow</text>

                <!-- Data needed -->
                <text x="80" y="75" fill="white" font-size="12" text-anchor="middle">Data Needed</text>
                <text x="220" y="75" fill="#51cf66" font-size="12" text-anchor="middle">Small</text>
                <text x="360" y="75" fill="#ffd700" font-size="12" text-anchor="middle">Medium</text>
                <text x="500" y="75" fill="#ffd700" font-size="12" text-anchor="middle">Medium</text>
                <text x="630" y="75" fill="#ff6b6b" font-size="12" text-anchor="middle">Large</text>

                <!-- Accuracy -->
                <text x="80" y="95" fill="white" font-size="12" text-anchor="middle">Accuracy</text>
                <text x="220" y="95" fill="#ffd700" font-size="12" text-anchor="middle">Good</text>
                <text x="360" y="95" fill="#51cf66" font-size="12" text-anchor="middle">Very Good</text>
                <text x="500" y="95" fill="#51cf66" font-size="12" text-anchor="middle">Good</text>
                <text x="630" y="95" fill="#51cf66" font-size="12" text-anchor="middle">Best</text>

                <!-- Interpretable -->
                <text x="80" y="115" fill="white" font-size="12" text-anchor="middle">Interpretable</text>
                <text x="220" y="115" fill="#51cf66" font-size="12" text-anchor="middle">Yes</text>
                <text x="360" y="115" fill="#ffd700" font-size="12" text-anchor="middle">Somewhat</text>
                <text x="500" y="115" fill="#51cf66" font-size="12" text-anchor="middle">Yes</text>
                <text x="630" y="115" fill="#ff6b6b" font-size="12" text-anchor="middle">No (black box)</text>
            </g>
        </svg>
    </div>
</div>

<!-- Slide: Naive Bayes Introduction -->
<div class="slide" id="slide-nlp-bayes-intro">
    <span class="slide-number">NLP-13</span>
    <h2>Bayesian Methods: Naive Bayes Classifier</h2>
    <p>A probabilistic approach to text classification</p>
    <div class="two-column">
        <div class="card">
            <h4>Bayes' Theorem</h4>
            <div class="formula">
                $P(class|text) = \frac{P(text|class) \times P(class)}{P(text)}$
            </div>
            <p style="font-size: 0.85em; margin-top: 15px;"><strong>In words:</strong></p>
            <ul style="font-size: 0.85em;">
                <li><strong>P(class|text)</strong> = probability of class given the text (what we want)</li>
                <li><strong>P(text|class)</strong> = probability of text given the class</li>
                <li><strong>P(class)</strong> = prior probability of class</li>
                <li><strong>P(text)</strong> = probability of text (normalizer)</li>
            </ul>

            <h4 style="margin-top: 15px;">The "Naive" Assumption</h4>
            <p style="font-size: 0.85em;">Words are <strong>conditionally independent</strong> given the class:</p>
            <div class="formula" style="font-size: 0.85em;">
                $P(text|class) = P(w_1|c) \times P(w_2|c) \times ... \times P(w_n|c)$
            </div>
        </div>
        <div class="card">
            <h4>Visual: Bayes' Theorem</h4>
            <svg viewBox="0 0 320 220" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Title -->
                <text x="160" y="25" fill="#c5d45a" font-size="12" text-anchor="middle" font-weight="bold">Spam Classification Example</text>

                <!-- Prior probabilities -->
                <rect x="20" y="40" width="130" height="60" rx="5" fill="rgba(81,207,102,0.2)" stroke="#51cf66"/>
                <text x="85" y="60" fill="#51cf66" font-size="12" text-anchor="middle" font-weight="bold">P(spam) = 0.3</text>
                <text x="85" y="80" fill="white" font-size="12" text-anchor="middle">30% of emails are spam</text>

                <rect x="170" y="40" width="130" height="60" rx="5" fill="rgba(74,144,217,0.2)" stroke="#4a90d9"/>
                <text x="235" y="60" fill="#4a90d9" font-size="12" text-anchor="middle" font-weight="bold">P(ham) = 0.7</text>
                <text x="235" y="80" fill="white" font-size="12" text-anchor="middle">70% are legitimate</text>

                <!-- Word probabilities -->
                <text x="160" y="120" fill="white" font-size="12" text-anchor="middle">Email: "Free money now!"</text>

                <rect x="20" y="135" width="130" height="70" rx="5" fill="rgba(255,107,107,0.2)" stroke="#ff6b6b"/>
                <text x="85" y="155" fill="#ff6b6b" font-size="12" text-anchor="middle" font-weight="bold">Given SPAM:</text>
                <text x="85" y="170" fill="white" font-size="12" text-anchor="middle">P("free"|spam) = 0.8</text>
                <text x="85" y="183" fill="white" font-size="12" text-anchor="middle">P("money"|spam) = 0.7</text>
                <text x="85" y="196" fill="white" font-size="12" text-anchor="middle">P("now"|spam) = 0.5</text>

                <rect x="170" y="135" width="130" height="70" rx="5" fill="rgba(74,144,217,0.2)" stroke="#4a90d9"/>
                <text x="235" y="155" fill="#4a90d9" font-size="12" text-anchor="middle" font-weight="bold">Given HAM:</text>
                <text x="235" y="170" fill="white" font-size="12" text-anchor="middle">P("free"|ham) = 0.1</text>
                <text x="235" y="183" fill="white" font-size="12" text-anchor="middle">P("money"|ham) = 0.2</text>
                <text x="235" y="196" fill="white" font-size="12" text-anchor="middle">P("now"|ham) = 0.3</text>

                <!-- Result hint -->
                <text x="160" y="215" fill="#ffd700" font-size="12" text-anchor="middle">Classify by comparing: P(spam|text) vs P(ham|text)</text>
            </svg>
        </div>
    </div>
</div>

<!-- Slide: Naive Bayes Calculation -->
<div class="slide" id="slide-nlp-bayes-calc">
    <span class="slide-number">NLP-14</span>
    <h2>Naive Bayes: Step-by-Step Calculation</h2>
    <p>Calculating spam probability for "Free money now!"</p>
    <div style="display: flex; justify-content: center; margin: 15px 0;">
        <svg viewBox="0 0 700 200" style="width: 95%; max-width: 900px;">
            <!-- Step 1: Calculate P(text|spam) -->
            <rect x="10" y="20" width="160" height="160" rx="8" fill="rgba(255,107,107,0.15)" stroke="#ff6b6b" stroke-width="2"/>
            <text x="90" y="45" fill="#ff6b6b" font-size="12" text-anchor="middle" font-weight="bold">Step 1: P(text|spam)</text>
            <text x="90" y="70" fill="white" font-size="12" text-anchor="middle">P("free"|spam) = 0.8</text>
            <text x="90" y="85" fill="white" font-size="12" text-anchor="middle">P("money"|spam) = 0.7</text>
            <text x="90" y="100" fill="white" font-size="12" text-anchor="middle">P("now"|spam) = 0.5</text>
            <line x1="30" y1="110" x2="150" y2="110" stroke="rgba(255,255,255,0.3)"/>
            <text x="90" y="130" fill="#c5d45a" font-size="12" text-anchor="middle">0.8 × 0.7 × 0.5</text>
            <text x="90" y="150" fill="#c5d45a" font-size="12" text-anchor="middle" font-weight="bold">= 0.28</text>
            <text x="90" y="170" fill="white" font-size="12" text-anchor="middle">× P(spam) = × 0.3</text>

            <!-- Arrow -->
            <path d="M 175 100 L 195 100" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>

            <!-- Step 2: Calculate P(text|ham) -->
            <rect x="200" y="20" width="160" height="160" rx="8" fill="rgba(74,144,217,0.15)" stroke="#4a90d9" stroke-width="2"/>
            <text x="280" y="45" fill="#4a90d9" font-size="12" text-anchor="middle" font-weight="bold">Step 2: P(text|ham)</text>
            <text x="280" y="70" fill="white" font-size="12" text-anchor="middle">P("free"|ham) = 0.1</text>
            <text x="280" y="85" fill="white" font-size="12" text-anchor="middle">P("money"|ham) = 0.2</text>
            <text x="280" y="100" fill="white" font-size="12" text-anchor="middle">P("now"|ham) = 0.3</text>
            <line x1="220" y1="110" x2="340" y2="110" stroke="rgba(255,255,255,0.3)"/>
            <text x="280" y="130" fill="#c5d45a" font-size="12" text-anchor="middle">0.1 × 0.2 × 0.3</text>
            <text x="280" y="150" fill="#c5d45a" font-size="12" text-anchor="middle" font-weight="bold">= 0.006</text>
            <text x="280" y="170" fill="white" font-size="12" text-anchor="middle">× P(ham) = × 0.7</text>

            <!-- Arrow -->
            <path d="M 365 100 L 385 100" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>

            <!-- Step 3: Compare -->
            <rect x="390" y="20" width="160" height="160" rx="8" fill="rgba(255,215,0,0.15)" stroke="#ffd700" stroke-width="2"/>
            <text x="470" y="45" fill="#ffd700" font-size="12" text-anchor="middle" font-weight="bold">Step 3: Compare</text>
            <text x="470" y="75" fill="#ff6b6b" font-size="12" text-anchor="middle">Spam score:</text>
            <text x="470" y="92" fill="white" font-size="12" text-anchor="middle">0.28 × 0.3 = 0.084</text>
            <text x="470" y="115" fill="#4a90d9" font-size="12" text-anchor="middle">Ham score:</text>
            <text x="470" y="132" fill="white" font-size="12" text-anchor="middle">0.006 × 0.7 = 0.0042</text>
            <line x1="410" y1="145" x2="530" y2="145" stroke="rgba(255,255,255,0.3)"/>
            <text x="470" y="165" fill="#51cf66" font-size="12" text-anchor="middle" font-weight="bold">0.084 >> 0.0042</text>

            <!-- Arrow -->
            <path d="M 555 100 L 575 100" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>

            <!-- Result -->
            <rect x="580" y="40" width="110" height="120" rx="8" fill="rgba(81,207,102,0.2)" stroke="#51cf66" stroke-width="2"/>
            <text x="635" y="70" fill="#51cf66" font-size="14" text-anchor="middle" font-weight="bold">Result</text>
            <text x="635" y="100" fill="white" font-size="12" text-anchor="middle">🚫 SPAM</text>
            <text x="635" y="125" fill="white" font-size="12" text-anchor="middle">P(spam|text)</text>
            <text x="635" y="142" fill="#51cf66" font-size="12" text-anchor="middle">≈ 95%</text>
        </svg>
    </div>
    <div class="two-column">
        <div class="card">
            <h4>Code: Naive Bayes in sklearn</h4>
            <div class="code-table">
                <div class="code-table-content">
                    <code>from sklearn.naive_bayes import MultinomialNB
from sklearn.feature_extraction.text import CountVectorizer

texts = ["free money", "meeting tomorrow", ...]
labels = ["spam", "ham", ...]

vec = CountVectorizer()
X = vec.fit_transform(texts)
clf = MultinomialNB()
clf.fit(X, labels)
clf.predict(vec.transform(["free cash now"]))</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>Why Naive Bayes Works</h4>
            <ul style="font-size: 0.9em;">
                <li><strong>Fast:</strong> Simple probability calculations</li>
                <li><strong>Works with small data:</strong> Needs less training data</li>
                <li><strong>Handles high dimensions:</strong> Large vocabularies OK</li>
                <li><strong>Interpretable:</strong> Can see which words matter</li>
            </ul>
        </div>
    </div>
</div>

<!-- Slide: NLP Pipeline Summary -->
<div class="slide" id="slide-nlp-summary">
    <span class="slide-number">NLP-15</span>
    <h2>Complete NLP Pipeline</h2>
    <p>From raw text to model predictions</p>
    <div style="display: flex; justify-content: center; margin: 20px 0;">
        <svg viewBox="0 0 750 220" style="width: 95%; max-width: 950px;">
            <!-- Raw Text -->
            <rect x="10" y="50" width="100" height="120" rx="8" fill="rgba(255,107,107,0.2)" stroke="#ff6b6b" stroke-width="2"/>
            <text x="60" y="75" fill="#ff6b6b" font-size="12" text-anchor="middle" font-weight="bold">Raw Text</text>
            <text x="60" y="95" fill="white" font-size="12" text-anchor="middle">"The QUICK</text>
            <text x="60" y="108" fill="white" font-size="12" text-anchor="middle">brown Fox</text>
            <text x="60" y="121" fill="white" font-size="12" text-anchor="middle">is running</text>
            <text x="60" y="134" fill="white" font-size="12" text-anchor="middle">FAST!!!"</text>

            <path d="M 115 110 L 135 110" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>

            <!-- Preprocessing -->
            <rect x="140" y="50" width="100" height="120" rx="8" fill="rgba(255,215,0,0.2)" stroke="#ffd700" stroke-width="2"/>
            <text x="190" y="75" fill="#ffd700" font-size="12" text-anchor="middle" font-weight="bold">Preprocess</text>
            <text x="190" y="95" fill="white" font-size="12" text-anchor="middle">• Lowercase</text>
            <text x="190" y="110" fill="white" font-size="12" text-anchor="middle">• Remove punct</text>
            <text x="190" y="125" fill="white" font-size="12" text-anchor="middle">• Tokenize</text>
            <text x="190" y="140" fill="white" font-size="12" text-anchor="middle">• Stem/Lemma</text>
            <text x="190" y="155" fill="white" font-size="12" text-anchor="middle">→ [quick,brown,</text>
            <text x="190" y="167" fill="white" font-size="12" text-anchor="middle">fox,run,fast]</text>

            <path d="M 245 110 L 265 110" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>

            <!-- Vectorize -->
            <rect x="270" y="50" width="100" height="120" rx="8" fill="rgba(81,207,102,0.2)" stroke="#51cf66" stroke-width="2"/>
            <text x="320" y="75" fill="#51cf66" font-size="12" text-anchor="middle" font-weight="bold">Vectorize</text>
            <text x="320" y="95" fill="white" font-size="12" text-anchor="middle">Bag of Words</text>
            <text x="320" y="108" fill="white" font-size="12" text-anchor="middle">or TF-IDF</text>
            <text x="320" y="121" fill="white" font-size="12" text-anchor="middle">or Embeddings</text>
            <text x="320" y="145" fill="white" font-size="12" text-anchor="middle">→ [0.2, 0.5,</text>
            <text x="320" y="158" fill="white" font-size="12" text-anchor="middle">0.1, 0.8, ...]</text>

            <path d="M 375 110 L 395 110" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>

            <!-- Feature Engineering (optional) -->
            <rect x="400" y="50" width="100" height="120" rx="8" fill="rgba(74,144,217,0.2)" stroke="#4a90d9" stroke-width="2"/>
            <text x="450" y="70" fill="#4a90d9" font-size="12" text-anchor="middle" font-weight="bold">Linguistic</text>
            <text x="450" y="85" fill="#4a90d9" font-size="12" text-anchor="middle" font-weight="bold">Features</text>
            <text x="450" y="105" fill="white" font-size="12" text-anchor="middle">• POS tags</text>
            <text x="450" y="118" fill="white" font-size="12" text-anchor="middle">• NER entities</text>
            <text x="450" y="131" fill="white" font-size="12" text-anchor="middle">• Chunks</text>
            <text x="450" y="144" fill="white" font-size="12" text-anchor="middle">• Sentiment</text>
            <text x="450" y="157" fill="rgba(255,255,255,0.6)" font-size="7" text-anchor="middle">(optional)</text>

            <path d="M 505 110 L 525 110" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>

            <!-- Model -->
            <rect x="530" y="50" width="100" height="120" rx="8" fill="rgba(197,212,90,0.2)" stroke="#c5d45a" stroke-width="2"/>
            <text x="580" y="75" fill="#c5d45a" font-size="12" text-anchor="middle" font-weight="bold">ML Model</text>
            <text x="580" y="100" fill="white" font-size="12" text-anchor="middle">• Naive Bayes</text>
            <text x="580" y="113" fill="white" font-size="12" text-anchor="middle">• SVM</text>
            <text x="580" y="126" fill="white" font-size="12" text-anchor="middle">• Log. Regression</text>
            <text x="580" y="139" fill="white" font-size="12" text-anchor="middle">• Neural Net</text>
            <text x="580" y="152" fill="white" font-size="12" text-anchor="middle">• Transformer</text>

            <path d="M 635 110 L 655 110" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowNLP)"/>

            <!-- Prediction -->
            <rect x="660" y="50" width="80" height="120" rx="8" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="2"/>
            <text x="700" y="75" fill="#51cf66" font-size="12" text-anchor="middle" font-weight="bold">Output</text>
            <text x="700" y="100" fill="white" font-size="12" text-anchor="middle">Class:</text>
            <text x="700" y="115" fill="#51cf66" font-size="12" text-anchor="middle">"positive"</text>
            <text x="700" y="135" fill="white" font-size="12" text-anchor="middle">or</text>
            <text x="700" y="150" fill="white" font-size="12" text-anchor="middle">Probability:</text>
            <text x="700" y="165" fill="#51cf66" font-size="12" text-anchor="middle">0.87</text>

            <!-- Labels below -->
            <text x="375" y="195" fill="#c5d45a" font-size="12" text-anchor="middle" font-weight="bold">Traditional NLP Pipeline for Text Classification</text>
            <text x="375" y="210" fill="rgba(255,255,255,0.6)" font-size="12" text-anchor="middle">Modern transformers (BERT, GPT) learn many of these steps automatically!</text>
        </svg>
    </div>
    <div class="highlight">
        <p><strong>Key Takeaway:</strong> Before neural networks, NLP required careful feature engineering. Today's LLMs handle much of this automatically, but understanding these fundamentals helps you debug and improve NLP systems.</p>
    </div>
</div>

<!-- DAY 2 HEADER -->
<div class="slide" id="slide39">
    <span class="slide-number">39</span>
    <div class="day-header">DAY 2</div>
    <h1>Neural Networks & Deep Learning</h1>
    <div style="margin-top: 40px;">
        <p><strong>Module 4:</strong> Neural Network Fundamentals</p>
        <p><strong>Module 5:</strong> Training Neural Networks</p>
        <p><strong>Module 6:</strong> Deep Learning with PyTorch</p>
    </div>
</div>

<!-- Slide 23: What is a Neural Network? -->
<div class="slide" id="slide40">
    <span class="slide-number">40</span>
    <h2>Module 4: What is a Neural Network?</h2>
    <p>Inspired by biological neurons, but really just math!</p>

    <!-- Single Neuron Visualization - ANIMATED -->
    <div style="display: flex; justify-content: center; margin: 20px 0;">
        <svg viewBox="0 0 800 240" style="width: 100%; max-width: 950px; min-width: 600px;">
            <!-- Background -->
            <rect width="800" height="240" fill="#1e1e2e" rx="8"/>

            <!-- Weights on connections (static) -->
            <line x1="105" y1="50" x2="270" y2="110" stroke="#ff6b6b" stroke-width="2" opacity="0.4"/>
            <text x="180" y="65" fill="#ff6b6b" font-size="11" font-weight="bold">w₁ = 0.4</text>
            <line x1="105" y1="120" x2="270" y2="120" stroke="#ff6b6b" stroke-width="2" opacity="0.4"/>
            <text x="180" y="110" fill="#ff6b6b" font-size="11" font-weight="bold">w₂ = 0.6</text>
            <line x1="105" y1="190" x2="270" y2="130" stroke="#ff6b6b" stroke-width="2" opacity="0.4"/>
            <text x="180" y="175" fill="#ff6b6b" font-size="11" font-weight="bold">w₃ = 0.8</text>

            <!-- Arrow to activation (static) -->
            <line x1="335" y1="120" x2="400" y2="120" stroke="white" stroke-width="2" opacity="0.4"/>
            <text x="370" y="105" fill="#aaa" font-size="10" text-anchor="middle">z = 0.54</text>

            <!-- Arrow to output (static) -->
            <line x1="530" y1="120" x2="600" y2="120" stroke="white" stroke-width="2" opacity="0.4"/>

            <!-- Input nodes with pulse animation -->
            <circle cx="80" cy="50" r="25" fill="#4ecdc4" stroke="#ffffff" stroke-width="2">
                <animate attributeName="r" values="25;28;25" dur="4s" begin="0s" repeatCount="indefinite"/>
            </circle>
            <text x="80" y="55" fill="white" font-size="12" text-anchor="middle" font-weight="bold">x₁</text>
            <text x="80" y="85" fill="#aaa" font-size="10" text-anchor="middle">0.5</text>

            <circle cx="80" cy="120" r="25" fill="#4ecdc4" stroke="#ffffff" stroke-width="2">
                <animate attributeName="r" values="25;28;25" dur="4s" begin="0.1s" repeatCount="indefinite"/>
            </circle>
            <text x="80" y="125" fill="white" font-size="12" text-anchor="middle" font-weight="bold">x₂</text>
            <text x="80" y="155" fill="#aaa" font-size="10" text-anchor="middle">0.3</text>

            <circle cx="80" cy="190" r="25" fill="#4ecdc4" stroke="#ffffff" stroke-width="2">
                <animate attributeName="r" values="25;28;25" dur="4s" begin="0.2s" repeatCount="indefinite"/>
            </circle>
            <text x="80" y="195" fill="white" font-size="12" text-anchor="middle" font-weight="bold">x₃</text>
            <text x="80" y="225" fill="#aaa" font-size="10" text-anchor="middle">0.2</text>

            <!-- Animated pulses from inputs to neuron -->
            <circle r="5" fill="#4ecdc4">
                <animate attributeName="cx" values="105;270" dur="0.6s" begin="0s;4s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="50;110" dur="0.6s" begin="0s;4s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.6s" begin="0s;4s" repeatCount="indefinite"/>
            </circle>
            <circle r="5" fill="#4ecdc4">
                <animate attributeName="cx" values="105;270" dur="0.6s" begin="0.15s;4.15s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="120;120" dur="0.6s" begin="0.15s;4.15s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.6s" begin="0.15s;4.15s" repeatCount="indefinite"/>
            </circle>
            <circle r="5" fill="#4ecdc4">
                <animate attributeName="cx" values="105;270" dur="0.6s" begin="0.3s;4.3s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="190;130" dur="0.6s" begin="0.3s;4.3s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.6s" begin="0.3s;4.3s" repeatCount="indefinite"/>
            </circle>

            <!-- Neuron body (summation) with pulse when receiving data -->
            <circle cx="300" cy="120" r="35" fill="#667eea" stroke="#ffffff" stroke-width="2">
                <animate attributeName="r" values="35;35;40;35" dur="4s" begin="0s" repeatCount="indefinite" keyTimes="0;0.15;0.25;0.35"/>
            </circle>
            <text x="300" y="115" fill="white" font-size="16" text-anchor="middle" font-weight="bold">Σ</text>
            <text x="300" y="135" fill="#ddd" font-size="10" text-anchor="middle">+ bias</text>

            <!-- Bias arrow -->
            <line x1="300" y1="170" x2="300" y2="155" stroke="#ffd93d" stroke-width="2"/>
            <text x="300" y="195" fill="#ffd93d" font-size="11" text-anchor="middle" font-weight="bold">b = 0.1</text>
            <!-- Animated bias contribution -->
            <circle r="4" fill="#ffd93d">
                <animate attributeName="cx" values="300;300" dur="0.3s" begin="0.7s;4.7s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="170;155" dur="0.3s" begin="0.7s;4.7s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.3s" begin="0.7s;4.7s" repeatCount="indefinite"/>
            </circle>

            <!-- Animated pulse from neuron to activation -->
            <circle r="6" fill="#667eea">
                <animate attributeName="cx" values="335;400" dur="0.4s" begin="1.2s;5.2s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="120;120" dur="0.4s" begin="1.2s;5.2s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.4s" begin="1.2s;5.2s" repeatCount="indefinite"/>
            </circle>

            <!-- Activation function box with pulse -->
            <rect x="410" y="85" width="120" height="70" fill="#764ba2" stroke="#ffffff" stroke-width="2" rx="10">
                <animate attributeName="opacity" values="0.7;0.7;1;0.7" dur="4s" begin="0s" repeatCount="indefinite" keyTimes="0;0.35;0.45;0.55"/>
            </rect>
            <text x="470" y="115" fill="white" font-size="11" text-anchor="middle" font-weight="bold">Activation</text>
            <text x="470" y="135" fill="#ddd" font-size="10" text-anchor="middle">σ(z) = 1/(1+e⁻ᶻ)</text>

            <!-- Animated pulse from activation to output -->
            <circle r="6" fill="#764ba2">
                <animate attributeName="cx" values="530;600" dur="0.4s" begin="1.8s;5.8s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="120;120" dur="0.4s" begin="1.8s;5.8s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.4s" begin="1.8s;5.8s" repeatCount="indefinite"/>
            </circle>

            <!-- Output node with final pulse -->
            <circle cx="640" cy="120" r="30" fill="#2ecc71" stroke="#ffffff" stroke-width="2">
                <animate attributeName="r" values="30;30;35;30" dur="4s" begin="0s" repeatCount="indefinite" keyTimes="0;0.5;0.6;0.7"/>
                <animate attributeName="opacity" values="0.7;0.7;1;0.7" dur="4s" begin="0s" repeatCount="indefinite" keyTimes="0;0.5;0.6;0.7"/>
            </circle>
            <text x="640" y="115" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Output</text>
            <text x="640" y="135" fill="white" font-size="11" text-anchor="middle">0.63</text>

            <!-- Labels -->
            <text x="80" y="25" fill="#4ecdc4" font-size="12" text-anchor="middle" font-weight="bold">Inputs</text>
            <text x="300" y="55" fill="#667eea" font-size="11" text-anchor="middle">Weighted Sum</text>
            <text x="640" y="170" fill="#2ecc71" font-size="11" text-anchor="middle">Prediction</text>

            <!-- Formula at bottom -->
            <text x="400" y="225" fill="white" font-size="12" text-anchor="middle">z = (0.5×0.4) + (0.3×0.6) + (0.2×0.8) + 0.1 = 0.54 → σ(0.54) = 0.63</text>
        </svg>
    </div>
    <div class="code-table">
        <div class="code-table-header">Python: A Single Neuron</div>
        <div class="code-table-content">
            <code>import numpy as np

def neuron(inputs, weights, bias):
    # Weighted sum
    z = np.dot(inputs, weights) + bias

    # Activation function (sigmoid)
    output = 1 / (1 + np.exp(-z))
    return output

# Example
inputs = np.array([0.5, 0.3, 0.2])
weights = np.array([0.4, 0.6, 0.8])
bias = 0.1

result = neuron(inputs, weights, bias)  # 0.64...</code>
        </div>
    </div>
</div>

<!-- Slide 24: Activation Functions -->
<div class="slide" id="slide41">
    <span class="slide-number">41</span>
    <h2>Activation Functions</h2>
    <p>Non-linear functions that allow neural networks to learn complex patterns</p>

    <!-- Activation Function Graphs -->
    <div style="display: flex; justify-content: center; margin: 15px 0;">
        <svg viewBox="0 0 800 200" style="width: 100%; max-width: 950px; min-width: 600px;">
            <!-- Background -->
            <rect width="800" height="200" fill="#1e1e2e" rx="8"/>

            <!-- Sigmoid Graph -->
            <g transform="translate(30, 20)">
                <text x="90" y="10" fill="#ff6b6b" font-size="13" text-anchor="middle" font-weight="bold">Sigmoid</text>
                <!-- Axes -->
                <line x1="10" y1="80" x2="170" y2="80" stroke="#666" stroke-width="1"/>
                <line x1="90" y1="10" x2="90" y2="150" stroke="#666" stroke-width="1"/>
                <!-- Axis labels -->
                <text x="170" y="95" fill="#888" font-size="9">x</text>
                <text x="100" y="20" fill="#888" font-size="9">y</text>
                <text x="78" y="25" fill="#888" font-size="8">1</text>
                <text x="78" y="140" fill="#888" font-size="8">0</text>
                <!-- Sigmoid curve (S-shape from 0 to 1) -->
                <path d="M 10 135 Q 30 135 45 130 Q 60 120 75 100 Q 90 80 105 60 Q 120 40 135 30 Q 150 25 170 25" fill="none" stroke="#ff6b6b" stroke-width="3"/>
                <!-- Asymptote lines -->
                <line x1="10" y1="25" x2="50" y2="25" stroke="#ff6b6b" stroke-width="1" stroke-dasharray="3,3" opacity="0.5"/>
                <line x1="10" y1="135" x2="50" y2="135" stroke="#ff6b6b" stroke-width="1" stroke-dasharray="3,3" opacity="0.5"/>
                <text x="90" y="170" fill="#aaa" font-size="9" text-anchor="middle">Output: 0 to 1</text>
            </g>

            <!-- ReLU Graph -->
            <g transform="translate(290, 20)">
                <text x="90" y="10" fill="#4ecdc4" font-size="13" text-anchor="middle" font-weight="bold">ReLU</text>
                <!-- Axes -->
                <line x1="10" y1="80" x2="170" y2="80" stroke="#666" stroke-width="1"/>
                <line x1="90" y1="10" x2="90" y2="150" stroke="#666" stroke-width="1"/>
                <!-- Axis labels -->
                <text x="170" y="95" fill="#888" font-size="9">x</text>
                <text x="100" y="20" fill="#888" font-size="9">y</text>
                <!-- ReLU curve (flat then linear) -->
                <line x1="10" y1="80" x2="90" y2="80" stroke="#4ecdc4" stroke-width="3"/>
                <line x1="90" y1="80" x2="160" y2="10" stroke="#4ecdc4" stroke-width="3"/>
                <text x="90" y="170" fill="#aaa" font-size="9" text-anchor="middle">Output: 0 to ∞</text>
            </g>

            <!-- Tanh Graph -->
            <g transform="translate(550, 20)">
                <text x="90" y="10" fill="#667eea" font-size="13" text-anchor="middle" font-weight="bold">Tanh</text>
                <!-- Axes -->
                <line x1="10" y1="80" x2="170" y2="80" stroke="#666" stroke-width="1"/>
                <line x1="90" y1="10" x2="90" y2="150" stroke="#666" stroke-width="1"/>
                <!-- Axis labels -->
                <text x="170" y="95" fill="#888" font-size="9">x</text>
                <text x="100" y="20" fill="#888" font-size="9">y</text>
                <text x="78" y="25" fill="#888" font-size="8">1</text>
                <text x="75" y="140" fill="#888" font-size="8">-1</text>
                <!-- Tanh curve (S-shape from -1 to 1, centered at 0) -->
                <path d="M 10 140 Q 30 138 45 130 Q 60 115 75 95 Q 90 80 105 65 Q 120 45 135 32 Q 150 22 170 20" fill="none" stroke="#667eea" stroke-width="3"/>
                <!-- Asymptote lines -->
                <line x1="10" y1="20" x2="50" y2="20" stroke="#667eea" stroke-width="1" stroke-dasharray="3,3" opacity="0.5"/>
                <line x1="10" y1="140" x2="50" y2="140" stroke="#667eea" stroke-width="1" stroke-dasharray="3,3" opacity="0.5"/>
                <text x="90" y="170" fill="#aaa" font-size="9" text-anchor="middle">Output: -1 to 1</text>
            </g>
        </svg>
    </div>

    <div class="highlight" style="margin-top: 10px;">
        <p><strong>Why non-linear?</strong> Without activation functions, stacking layers would just be linear algebra. Non-linearity enables learning complex patterns!</p>
    </div>
</div>

<!-- Slide 25: Network Architecture -->
<div class="slide" id="slide42">
    <span class="slide-number">42</span>
    <h2>Network Architecture</h2>

    <!-- Neural Network Architecture Visualization - ANIMATED -->
    <div style="display: flex; justify-content: center; margin: 15px 0;">
        <svg viewBox="0 0 800 280" style="width: 100%; max-width: 950px; min-width: 600px;">
            <!-- Background -->
            <rect width="800" height="280" fill="#1e1e2e" rx="8"/>

            <!-- Static Connections (dimmed) -->
            <!-- Input to Hidden 1 -->
            <line x1="120" y1="80" x2="282" y2="60" stroke="#ff6b6b" stroke-width="1" opacity="0.2"/>
            <line x1="120" y1="80" x2="282" y2="110" stroke="#ff6b6b" stroke-width="2" opacity="0.3"/>
            <line x1="120" y1="80" x2="282" y2="160" stroke="#ff6b6b" stroke-width="1" opacity="0.2"/>
            <line x1="120" y1="140" x2="282" y2="110" stroke="#ff6b6b" stroke-width="1" opacity="0.2"/>
            <line x1="120" y1="140" x2="282" y2="160" stroke="#ff6b6b" stroke-width="2" opacity="0.3"/>
            <line x1="120" y1="200" x2="282" y2="160" stroke="#ff6b6b" stroke-width="1" opacity="0.2"/>
            <line x1="120" y1="200" x2="282" y2="210" stroke="#ff6b6b" stroke-width="2" opacity="0.3"/>
            <!-- Hidden 1 to Hidden 2 -->
            <line x1="318" y1="60" x2="462" y2="85" stroke="#ff6b6b" stroke-width="2" opacity="0.3"/>
            <line x1="318" y1="110" x2="462" y2="140" stroke="#ff6b6b" stroke-width="2" opacity="0.3"/>
            <line x1="318" y1="160" x2="462" y2="140" stroke="#ff6b6b" stroke-width="1" opacity="0.2"/>
            <line x1="318" y1="160" x2="462" y2="195" stroke="#ff6b6b" stroke-width="2" opacity="0.3"/>
            <line x1="318" y1="210" x2="462" y2="195" stroke="#ff6b6b" stroke-width="1" opacity="0.2"/>
            <!-- Hidden 2 to Output -->
            <line x1="498" y1="85" x2="638" y2="110" stroke="#ff6b6b" stroke-width="2" opacity="0.3"/>
            <line x1="498" y1="140" x2="638" y2="110" stroke="#ff6b6b" stroke-width="1" opacity="0.2"/>
            <line x1="498" y1="140" x2="638" y2="170" stroke="#ff6b6b" stroke-width="2" opacity="0.3"/>
            <line x1="498" y1="195" x2="638" y2="170" stroke="#ff6b6b" stroke-width="2" opacity="0.3"/>

            <!-- Input Layer -->
            <text x="100" y="25" fill="#4ecdc4" font-size="13" text-anchor="middle" font-weight="bold">Input Layer</text>
            <text x="100" y="42" fill="#888" font-size="10" text-anchor="middle">(Features)</text>
            <circle cx="100" cy="80" r="20" fill="#4ecdc4" stroke="#fff" stroke-width="2">
                <animate attributeName="opacity" values="1;0.6;1" dur="3s" begin="0s" repeatCount="indefinite"/>
            </circle>
            <text x="100" y="85" fill="white" font-size="10" text-anchor="middle">x₁</text>
            <circle cx="100" cy="140" r="20" fill="#4ecdc4" stroke="#fff" stroke-width="2">
                <animate attributeName="opacity" values="1;0.6;1" dur="3s" begin="0.1s" repeatCount="indefinite"/>
            </circle>
            <text x="100" y="145" fill="white" font-size="10" text-anchor="middle">x₂</text>
            <circle cx="100" cy="200" r="20" fill="#4ecdc4" stroke="#fff" stroke-width="2">
                <animate attributeName="opacity" values="1;0.6;1" dur="3s" begin="0.2s" repeatCount="indefinite"/>
            </circle>
            <text x="100" y="205" fill="white" font-size="10" text-anchor="middle">x₃</text>

            <!-- Animated pulses: Input to Hidden 1 -->
            <circle r="4" fill="#4ecdc4">
                <animate attributeName="cx" values="120;282" dur="0.6s" begin="0s;3s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="80;110" dur="0.6s" begin="0s;3s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.6s" begin="0s;3s" repeatCount="indefinite"/>
            </circle>
            <circle r="4" fill="#4ecdc4">
                <animate attributeName="cx" values="120;282" dur="0.6s" begin="0.15s;3.15s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="140;160" dur="0.6s" begin="0.15s;3.15s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.6s" begin="0.15s;3.15s" repeatCount="indefinite"/>
            </circle>
            <circle r="4" fill="#4ecdc4">
                <animate attributeName="cx" values="120;282" dur="0.6s" begin="0.3s;3.3s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="200;210" dur="0.6s" begin="0.3s;3.3s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.6s" begin="0.3s;3.3s" repeatCount="indefinite"/>
            </circle>

            <!-- Hidden Layer 1 -->
            <text x="300" y="25" fill="#667eea" font-size="13" text-anchor="middle" font-weight="bold">Hidden Layer 1</text>
            <text x="300" y="42" fill="#888" font-size="10" text-anchor="middle">(Learn patterns)</text>
            <circle cx="300" cy="60" r="18" fill="#667eea" stroke="#fff" stroke-width="2">
                <animate attributeName="r" values="18;20;18" dur="3s" begin="0.6s" repeatCount="indefinite"/>
            </circle>
            <circle cx="300" cy="110" r="18" fill="#667eea" stroke="#fff" stroke-width="2">
                <animate attributeName="r" values="18;20;18" dur="3s" begin="0.7s" repeatCount="indefinite"/>
            </circle>
            <circle cx="300" cy="160" r="18" fill="#667eea" stroke="#fff" stroke-width="2">
                <animate attributeName="r" values="18;20;18" dur="3s" begin="0.8s" repeatCount="indefinite"/>
            </circle>
            <circle cx="300" cy="210" r="18" fill="#667eea" stroke="#fff" stroke-width="2">
                <animate attributeName="r" values="18;20;18" dur="3s" begin="0.9s" repeatCount="indefinite"/>
            </circle>

            <!-- Animated pulses: Hidden 1 to Hidden 2 -->
            <circle r="4" fill="#667eea">
                <animate attributeName="cx" values="318;462" dur="0.6s" begin="1s;4s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="60;85" dur="0.6s" begin="1s;4s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.6s" begin="1s;4s" repeatCount="indefinite"/>
            </circle>
            <circle r="4" fill="#667eea">
                <animate attributeName="cx" values="318;462" dur="0.6s" begin="1.1s;4.1s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="110;140" dur="0.6s" begin="1.1s;4.1s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.6s" begin="1.1s;4.1s" repeatCount="indefinite"/>
            </circle>
            <circle r="4" fill="#667eea">
                <animate attributeName="cx" values="318;462" dur="0.6s" begin="1.2s;4.2s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="160;195" dur="0.6s" begin="1.2s;4.2s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.6s" begin="1.2s;4.2s" repeatCount="indefinite"/>
            </circle>

            <!-- Hidden Layer 2 -->
            <text x="480" y="25" fill="#764ba2" font-size="13" text-anchor="middle" font-weight="bold">Hidden Layer 2</text>
            <text x="480" y="42" fill="#888" font-size="10" text-anchor="middle">(Complex features)</text>
            <circle cx="480" cy="85" r="18" fill="#764ba2" stroke="#fff" stroke-width="2">
                <animate attributeName="r" values="18;20;18" dur="3s" begin="1.6s" repeatCount="indefinite"/>
            </circle>
            <circle cx="480" cy="140" r="18" fill="#764ba2" stroke="#fff" stroke-width="2">
                <animate attributeName="r" values="18;20;18" dur="3s" begin="1.7s" repeatCount="indefinite"/>
            </circle>
            <circle cx="480" cy="195" r="18" fill="#764ba2" stroke="#fff" stroke-width="2">
                <animate attributeName="r" values="18;20;18" dur="3s" begin="1.8s" repeatCount="indefinite"/>
            </circle>

            <!-- Animated pulses: Hidden 2 to Output -->
            <circle r="4" fill="#764ba2">
                <animate attributeName="cx" values="498;638" dur="0.6s" begin="2s;5s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="85;110" dur="0.6s" begin="2s;5s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.6s" begin="2s;5s" repeatCount="indefinite"/>
            </circle>
            <circle r="4" fill="#764ba2">
                <animate attributeName="cx" values="498;638" dur="0.6s" begin="2.1s;5.1s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="140;170" dur="0.6s" begin="2.1s;5.1s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.6s" begin="2.1s;5.1s" repeatCount="indefinite"/>
            </circle>

            <!-- Output Layer -->
            <text x="660" y="25" fill="#2ecc71" font-size="13" text-anchor="middle" font-weight="bold">Output Layer</text>
            <text x="660" y="42" fill="#888" font-size="10" text-anchor="middle">(Predictions)</text>
            <circle cx="660" cy="110" r="22" fill="#2ecc71" stroke="#fff" stroke-width="2">
                <animate attributeName="r" values="22;25;22" dur="3s" begin="2.6s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="0.7;1;0.7" dur="3s" begin="2.6s" repeatCount="indefinite"/>
            </circle>
            <text x="660" y="115" fill="white" font-size="10" text-anchor="middle">ŷ₁</text>
            <circle cx="660" cy="170" r="22" fill="#2ecc71" stroke="#fff" stroke-width="2">
                <animate attributeName="r" values="22;25;22" dur="3s" begin="2.7s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="0.7;1;0.7" dur="3s" begin="2.7s" repeatCount="indefinite"/>
            </circle>
            <text x="660" y="175" fill="white" font-size="10" text-anchor="middle">ŷ₂</text>

            <!-- Legend -->
            <text x="400" y="255" fill="#888" font-size="11" text-anchor="middle">Data flows through layers | Each connection has a learnable weight</text>
            <text x="400" y="270" fill="#ff6b6b" font-size="10" text-anchor="middle">This 3-4-3-2 network has 12 + 12 + 6 = 30 weight parameters + biases</text>
        </svg>
    </div>

    <div class="highlight" style="margin-top: 10px;">
        <p><strong>Why "Deep"?</strong> Multiple hidden layers let the network learn hierarchical features: edges → shapes → objects</p>
    </div>
</div>

<!-- Slide 26: Training - Loss Functions -->
<div class="slide" id="slide43">
    <span class="slide-number">43</span>
    <h2>Module 5: Training - Loss Functions</h2>
    <p>Loss measures how wrong our predictions are</p>
    <div class="two-column">
        <div class="card">
            <h4>Regression: Mean Squared Error</h4>
            <div class="formula" style="font-size: 1em;">$$\text{MSE} = \frac{1}{n}\sum_{i=1}^{n}(y_i - \hat{y}_i)^2$$</div>
            <p>Penalizes large errors more</p>
        </div>
        <div class="card">
            <h4>Classification: Cross-Entropy</h4>
            <div class="formula" style="font-size: 1em;">$$\text{CE} = -\sum_{i} y_i \log(\hat{y}_i)$$</div>
            <p>Measures probability difference</p>
        </div>
    </div>
    <div class="code-table" style="margin-top: 20px;">
        <div class="code-table-header">Python: Loss Functions</div>
        <div class="code-table-content">
            <code>import torch.nn as nn

# For regression
mse_loss = nn.MSELoss()

# For classification
ce_loss = nn.CrossEntropyLoss()

# Calculate loss
loss = mse_loss(predictions, targets)</code>
        </div>
    </div>
</div>

<!-- Slide 27: Gradient Descent -->
<div class="slide" id="slide44">
    <span class="slide-number">44</span>
    <h2>Gradient Descent</h2>
    <p>How we minimize loss by adjusting weights</p>

    <!-- Gradient Descent Visualization - ANIMATED -->
    <div style="display: flex; justify-content: center; margin: 15px 0;">
        <svg viewBox="0 0 800 240" style="width: 100%; max-width: 950px; min-width: 600px;">
            <!-- Background -->
            <rect width="800" height="240" fill="#1e1e2e" rx="8"/>

            <!-- Loss Landscape (Bowl Shape) -->
            <text x="200" y="25" fill="white" font-size="13" text-anchor="middle" font-weight="bold">Loss Landscape</text>

            <!-- Bowl curve -->
            <path d="M 50 180 Q 100 60 200 40 Q 300 60 350 180" fill="none" stroke="#667eea" stroke-width="3"/>

            <!-- Y-axis -->
            <line x1="50" y1="200" x2="50" y2="30" stroke="#666" stroke-width="1"/>
            <text x="45" y="25" fill="#888" font-size="10" text-anchor="end">Loss</text>

            <!-- X-axis -->
            <line x1="40" y1="200" x2="360" y2="200" stroke="#666" stroke-width="1"/>
            <text x="360" y="215" fill="#888" font-size="10" text-anchor="end">Weight</text>

            <!-- Animated ball rolling down -->
            <circle r="10" fill="#ff6b6b">
                <animate attributeName="cx" values="90;130;165;200;200" dur="4s" repeatCount="indefinite" keyTimes="0;0.25;0.5;0.75;1" calcMode="spline" keySplines="0.4 0 0.2 1; 0.4 0 0.2 1; 0.4 0 0.2 1; 0 0 1 1"/>
                <animate attributeName="cy" values="140;85;55;42;42" dur="4s" repeatCount="indefinite" keyTimes="0;0.25;0.5;0.75;1" calcMode="spline" keySplines="0.4 0 0.2 1; 0.4 0 0.2 1; 0.4 0 0.2 1; 0 0 1 1"/>
                <animate attributeName="fill" values="#ff6b6b;#ff9f43;#ffd93d;#2ecc71;#2ecc71" dur="4s" repeatCount="indefinite"/>
                <animate attributeName="r" values="10;8;7;9;9" dur="4s" repeatCount="indefinite"/>
            </circle>

            <!-- Trail dots that appear -->
            <circle cx="90" cy="140" r="4" fill="#ff6b6b" opacity="0.3"/>
            <circle cx="130" cy="85" r="4" fill="#ff9f43" opacity="0.3"/>
            <circle cx="165" cy="55" r="4" fill="#ffd93d" opacity="0.3"/>

            <!-- Minimum label with pulse -->
            <text x="200" y="65" fill="#2ecc71" font-size="10" text-anchor="middle">
                Minimum!
                <animate attributeName="opacity" values="0.5;1;0.5" dur="2s" repeatCount="indefinite"/>
            </text>

            <!-- Labels -->
            <text x="90" y="165" fill="#ff6b6b" font-size="10" text-anchor="middle">Start</text>

            <!-- Right side: Learning Rate Comparison -->
            <text x="600" y="25" fill="white" font-size="13" text-anchor="middle" font-weight="bold">Learning Rate Effect</text>

            <!-- Small learning rate curve with animated ball -->
            <g transform="translate(430, 50)">
                <path d="M 20 100 Q 60 30 100 20 Q 140 30 180 100" fill="none" stroke="#667eea" stroke-width="2" opacity="0.6"/>
                <!-- Animated ball - small learning rate (smooth descent) -->
                <circle r="5" fill="#4ecdc4">
                    <animate attributeName="cx" values="40;55;70;85;100;100" dur="5s" repeatCount="indefinite" keyTimes="0;0.2;0.4;0.6;0.8;1"/>
                    <animate attributeName="cy" values="75;50;35;25;22;22" dur="5s" repeatCount="indefinite" keyTimes="0;0.2;0.4;0.6;0.8;1"/>
                </circle>
                <!-- Trail -->
                <circle cx="40" cy="75" r="3" fill="#4ecdc4" opacity="0.2"/>
                <circle cx="55" cy="50" r="3" fill="#4ecdc4" opacity="0.2"/>
                <circle cx="70" cy="35" r="3" fill="#4ecdc4" opacity="0.2"/>
                <circle cx="85" cy="25" r="3" fill="#4ecdc4" opacity="0.2"/>
                <text x="100" y="130" fill="#4ecdc4" font-size="10" text-anchor="middle">Small η: Slow but stable</text>
            </g>

            <!-- Large learning rate curve with animated ball -->
            <g transform="translate(430, 120)">
                <path d="M 20 60 Q 60 10 100 5 Q 140 10 180 60" fill="none" stroke="#667eea" stroke-width="2" opacity="0.6"/>
                <!-- Animated ball - large learning rate (oscillating) -->
                <circle r="5" fill="#ff6b6b">
                    <animate attributeName="cx" values="35;150;60;130;95;95" dur="3s" repeatCount="indefinite" keyTimes="0;0.2;0.4;0.6;0.85;1"/>
                    <animate attributeName="cy" values="50;30;20;15;8;8" dur="3s" repeatCount="indefinite" keyTimes="0;0.2;0.4;0.6;0.85;1"/>
                </circle>
                <!-- Oscillation path indicator -->
                <path d="M 35 50 Q 90 -10 150 30" fill="none" stroke="#ff6b6b" stroke-width="1" stroke-dasharray="3,3" opacity="0.4"/>
                <path d="M 150 30 Q 105 -5 60 20" fill="none" stroke="#ff6b6b" stroke-width="1" stroke-dasharray="3,3" opacity="0.4"/>
                <text x="100" y="85" fill="#ff6b6b" font-size="10" text-anchor="middle">Large η: Fast but unstable</text>
            </g>

            <!-- Formula -->
            <text x="600" y="225" fill="white" font-size="11" text-anchor="middle">w_new = w_old − η × gradient</text>
        </svg>
    </div>

    <div class="highlight" style="margin-top: 10px;">
        <p><strong>Key Insight:</strong> The gradient tells us which direction increases loss, so we go the opposite way (hence the minus sign)</p>
    </div>
</div>

<!-- Slide 28: Backpropagation -->
<div class="slide" id="slide45">
    <span class="slide-number">45</span>
    <h2>Backpropagation</h2>
    <p>Algorithm to compute gradients efficiently through the network</p>

    <!-- Backpropagation Visualization - ANIMATED -->
    <div style="display: flex; justify-content: center; margin: 15px 0;">
        <svg viewBox="0 0 800 200" style="width: 100%; max-width: 950px; min-width: 600px;">
            <!-- Background -->
            <rect width="800" height="200" fill="#1e1e2e" rx="8"/>

            <!-- Forward Pass Label with pulse -->
            <text x="400" y="25" fill="#4ecdc4" font-size="14" text-anchor="middle" font-weight="bold">
                Forward Pass →
                <animate attributeName="opacity" values="1;0.5;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.5;1"/>
            </text>

            <!-- Input -->
            <rect x="30" y="60" width="80" height="50" fill="#4ecdc4" stroke="#fff" stroke-width="2" rx="8">
                <animate attributeName="opacity" values="0.6;1;0.6" dur="6s" repeatCount="indefinite" keyTimes="0;0.08;0.5"/>
            </rect>
            <text x="70" y="90" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Input</text>
            <text x="70" y="130" fill="#4ecdc4" font-size="10" text-anchor="middle">x</text>

            <!-- Forward arrows (static) -->
            <line x1="110" y1="85" x2="155" y2="85" stroke="#4ecdc4" stroke-width="2" opacity="0.3"/>
            <line x1="260" y1="85" x2="305" y2="85" stroke="#4ecdc4" stroke-width="2" opacity="0.3"/>
            <line x1="410" y1="85" x2="455" y2="85" stroke="#4ecdc4" stroke-width="2" opacity="0.3"/>
            <line x1="540" y1="85" x2="585" y2="85" stroke="#4ecdc4" stroke-width="2" opacity="0.3"/>

            <!-- Animated forward pulse 1: Input to Layer 1 -->
            <circle r="6" fill="#4ecdc4">
                <animate attributeName="cx" values="110;155" dur="0.4s" begin="0s;6s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="85;85" dur="0.4s" begin="0s;6s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.4s" begin="0s;6s" repeatCount="indefinite"/>
            </circle>

            <!-- Layer 1 -->
            <rect x="160" y="50" width="100" height="70" fill="#667eea" stroke="#fff" stroke-width="2" rx="8">
                <animate attributeName="opacity" values="0.6;0.6;1;0.6" dur="6s" repeatCount="indefinite" keyTimes="0;0.08;0.17;0.5"/>
            </rect>
            <text x="210" y="80" fill="white" font-size="11" text-anchor="middle" font-weight="bold">Layer 1</text>
            <text x="210" y="100" fill="#ddd" font-size="9" text-anchor="middle">z₁ = W₁x + b₁</text>

            <!-- Animated forward pulse 2: Layer 1 to Layer 2 -->
            <circle r="6" fill="#667eea">
                <animate attributeName="cx" values="260;305" dur="0.4s" begin="0.5s;6.5s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="85;85" dur="0.4s" begin="0.5s;6.5s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.4s" begin="0.5s;6.5s" repeatCount="indefinite"/>
            </circle>

            <!-- Layer 2 -->
            <rect x="310" y="50" width="100" height="70" fill="#764ba2" stroke="#fff" stroke-width="2" rx="8">
                <animate attributeName="opacity" values="0.6;0.6;1;0.6" dur="6s" repeatCount="indefinite" keyTimes="0;0.17;0.25;0.5"/>
            </rect>
            <text x="360" y="80" fill="white" font-size="11" text-anchor="middle" font-weight="bold">Layer 2</text>
            <text x="360" y="100" fill="#ddd" font-size="9" text-anchor="middle">z₂ = W₂a₁ + b₂</text>

            <!-- Animated forward pulse 3: Layer 2 to Output -->
            <circle r="6" fill="#764ba2">
                <animate attributeName="cx" values="410;455" dur="0.4s" begin="1s;7s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="85;85" dur="0.4s" begin="1s;7s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.4s" begin="1s;7s" repeatCount="indefinite"/>
            </circle>

            <!-- Output -->
            <rect x="460" y="60" width="80" height="50" fill="#2ecc71" stroke="#fff" stroke-width="2" rx="8">
                <animate attributeName="opacity" values="0.6;0.6;1;0.6" dur="6s" repeatCount="indefinite" keyTimes="0;0.25;0.33;0.5"/>
            </rect>
            <text x="500" y="90" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Output</text>
            <text x="500" y="130" fill="#2ecc71" font-size="10" text-anchor="middle">ŷ</text>

            <!-- Animated forward pulse 4: Output to Loss -->
            <circle r="6" fill="#2ecc71">
                <animate attributeName="cx" values="540;585" dur="0.4s" begin="1.5s;7.5s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="85;85" dur="0.4s" begin="1.5s;7.5s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.4s" begin="1.5s;7.5s" repeatCount="indefinite"/>
            </circle>

            <!-- Loss -->
            <rect x="590" y="55" width="90" height="60" fill="#ff6b6b" stroke="#fff" stroke-width="2" rx="8">
                <animate attributeName="opacity" values="0.6;0.6;1;1;0.6" dur="6s" repeatCount="indefinite" keyTimes="0;0.33;0.42;0.5;0.55"/>
            </rect>
            <text x="635" y="82" fill="white" font-size="11" text-anchor="middle" font-weight="bold">Loss</text>
            <text x="635" y="100" fill="#ddd" font-size="9" text-anchor="middle">L(ŷ, y)</text>

            <!-- Target -->
            <rect x="725" y="65" width="60" height="40" fill="#ffd93d" stroke="#fff" stroke-width="2" rx="6"/>
            <text x="755" y="90" fill="#333" font-size="10" text-anchor="middle" font-weight="bold">Target y</text>
            <line x1="720" y1="85" x2="680" y2="85" stroke="#ffd93d" stroke-width="2" opacity="0.5"/>

            <!-- Backward Pass Label with pulse (appears in second half) -->
            <text x="400" y="175" fill="#ff6b6b" font-size="14" text-anchor="middle" font-weight="bold">
                ← Backward Pass (Gradients)
                <animate attributeName="opacity" values="0.3;0.3;1;0.3" dur="6s" repeatCount="indefinite" keyTimes="0;0.5;0.55;1"/>
            </text>

            <!-- Backward arrows (static) -->
            <line x1="590" y1="155" x2="550" y2="155" stroke="#ff6b6b" stroke-width="2" opacity="0.3"/>
            <line x1="460" y1="155" x2="420" y2="155" stroke="#ff6b6b" stroke-width="2" opacity="0.3"/>
            <line x1="310" y1="155" x2="270" y2="155" stroke="#ff6b6b" stroke-width="2" opacity="0.3"/>
            <line x1="160" y1="155" x2="120" y2="155" stroke="#ff6b6b" stroke-width="2" opacity="0.3"/>

            <!-- Animated backward pulse 1: Loss to Output -->
            <circle r="6" fill="#ff6b6b">
                <animate attributeName="cx" values="590;540" dur="0.4s" begin="3s;9s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="155;155" dur="0.4s" begin="3s;9s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.4s" begin="3s;9s" repeatCount="indefinite"/>
            </circle>

            <!-- Animated backward pulse 2: Output to Layer 2 -->
            <circle r="6" fill="#ff6b6b">
                <animate attributeName="cx" values="460;410" dur="0.4s" begin="3.5s;9.5s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="155;155" dur="0.4s" begin="3.5s;9.5s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.4s" begin="3.5s;9.5s" repeatCount="indefinite"/>
            </circle>

            <!-- Animated backward pulse 3: Layer 2 to Layer 1 -->
            <circle r="6" fill="#ff6b6b">
                <animate attributeName="cx" values="310;260" dur="0.4s" begin="4s;10s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="155;155" dur="0.4s" begin="4s;10s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.4s" begin="4s;10s" repeatCount="indefinite"/>
            </circle>

            <!-- Animated backward pulse 4: Layer 1 to Input -->
            <circle r="6" fill="#ff6b6b">
                <animate attributeName="cx" values="160;110" dur="0.4s" begin="4.5s;10.5s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="155;155" dur="0.4s" begin="4.5s;10.5s" repeatCount="indefinite"/>
                <animate attributeName="opacity" values="1;0" dur="0.4s" begin="4.5s;10.5s" repeatCount="indefinite"/>
            </circle>

            <!-- Gradient labels -->
            <text x="570" y="145" fill="#ff6b6b" font-size="8" text-anchor="middle" opacity="0.7">∂L/∂ŷ</text>
            <text x="440" y="145" fill="#ff6b6b" font-size="8" text-anchor="middle" opacity="0.7">∂L/∂W₂</text>
            <text x="290" y="145" fill="#ff6b6b" font-size="8" text-anchor="middle" opacity="0.7">∂L/∂W₁</text>
            <text x="140" y="145" fill="#ff6b6b" font-size="8" text-anchor="middle" opacity="0.7">∂L/∂x</text>
        </svg>
    </div>

    <div class="code-table" style="margin-top: 10px;">
        <div class="code-table-header">Python: Training Loop</div>
        <div class="code-table-content">
            <code>for epoch in range(num_epochs):
    predictions = model(inputs)          # Forward pass
    loss = loss_function(predictions, targets)
    optimizer.zero_grad()                # Clear old gradients
    loss.backward()                      # Backward pass (compute gradients)
    optimizer.step()                     # Update weights</code>
        </div>
    </div>
</div>

<!-- Slide 29: PyTorch Introduction -->
<div class="slide" id="slide46">
    <span class="slide-number">46</span>
    <h2>Module 6: PyTorch Basics</h2>
    <p>PyTorch is the leading deep learning framework (used by OpenAI, Meta, Tesla...)</p>
    <div class="code-table">
        <div class="code-table-header">Python: PyTorch Tensors</div>
        <div class="code-table-content">
            <code>import torch

# Create tensors (like NumPy arrays, but GPU-capable)
x = torch.tensor([1.0, 2.0, 3.0])
y = torch.randn(3, 3)  # Random 3x3 matrix

# Operations
z = x + y[0]
product = torch.matmul(y, x)

# Move to GPU (if available)
if torch.cuda.is_available():
    x = x.cuda()

# Automatic differentiation!
x = torch.tensor([2.0], requires_grad=True)
y = x ** 2
y.backward()
print(x.grad)  # dy/dx = 2x = 4.0</code>
        </div>
    </div>
</div>

<!-- Slide 30: Building a Neural Network in PyTorch -->
<div class="slide" id="slide47">
    <span class="slide-number">47</span>
    <h2>Building Networks in PyTorch</h2>
    <div class="code-table">
        <div class="code-table-header">Python: Neural Network Class</div>
        <div class="code-table-content">
            <code>import torch.nn as nn

class SimpleNetwork(nn.Module):
    def __init__(self, input_size, hidden_size, output_size):
        super().__init__()
        self.layer1 = nn.Linear(input_size, hidden_size)
        self.relu = nn.ReLU()
        self.layer2 = nn.Linear(hidden_size, output_size)

    def forward(self, x):
        x = self.layer1(x)
        x = self.relu(x)
        x = self.layer2(x)
        return x

# Create model
model = SimpleNetwork(input_size=10, hidden_size=64, output_size=2)

# Create optimizer
optimizer = torch.optim.Adam(model.parameters(), lr=0.001)</code>
        </div>
    </div>
</div>

<!-- Slide 31: Complete Training Example -->
<div class="slide" id="slide48">
    <span class="slide-number">48</span>
    <h2>Complete Training Example</h2>
    <div class="code-table">
        <div class="code-table-header">Python: Full Training Loop</div>
        <div class="code-table-content">
            <code>model = SimpleNetwork(10, 64, 2)
criterion = nn.CrossEntropyLoss()
optimizer = torch.optim.Adam(model.parameters(), lr=0.001)

# Training
for epoch in range(100):
    for batch_x, batch_y in dataloader:
        # Forward
        outputs = model(batch_x)
        loss = criterion(outputs, batch_y)

        # Backward
        optimizer.zero_grad()
        loss.backward()
        optimizer.step()

    if epoch % 10 == 0:
        print(f'Epoch {epoch}, Loss: {loss.item():.4f}')</code>
        </div>
    </div>
</div>

<!-- DAY 3 HEADER -->
<div class="slide" id="slide49">
    <span class="slide-number">49</span>
    <div class="day-header">DAY 3</div>
    <h1>From Deep Learning to LLMs</h1>
    <div style="margin-top: 40px;">
        <p><strong>Module 7:</strong> Natural Language Processing Basics</p>
        <p><strong>Module 8:</strong> Attention & Transformers</p>
        <p><strong>Module 9:</strong> Introduction to LLMs</p>
    </div>
</div>

<!-- Slide 32: NLP Basics -->
<div class="slide" id="slide50">
    <span class="slide-number">50</span>
    <h2>Module 7: NLP Fundamentals</h2>
    <p>How do we convert text to numbers that neural networks can process?</p>
    <div class="two-column">
        <div class="card">
            <h4>Text Processing Pipeline</h4>
            <ol style="margin-left: 20px;">
                <li>Tokenization (split into words/pieces)</li>
                <li>Vocabulary mapping (word → number)</li>
                <li>Embedding (number → vector)</li>
            </ol>
        </div>
        <div class="card">
            <h4>Example</h4>
            <p style="font-size: 0.9em;">"Hello world" →</p>
            <p style="font-size: 0.9em;">["Hello", "world"] →</p>
            <p style="font-size: 0.9em;">[42, 156] →</p>
            <p style="font-size: 0.9em;">[[0.2, 0.8, ...], [0.5, 0.3, ...]]</p>
        </div>
    </div>
</div>

<!-- Slide 33: Word Embeddings -->
<div class="slide" id="slide51">
    <span class="slide-number">51</span>
    <h2>Word Embeddings</h2>
    <p>Dense vector representations that capture meaning</p>
    <div class="highlight">
        <p><strong>Key Insight:</strong> Similar words have similar vectors!</p>
        <p style="margin-top: 10px;">King - Man + Woman ≈ Queen</p>
    </div>
    <div class="code-table" style="margin-top: 20px;">
        <div class="code-table-header">Python: Using Embeddings</div>
        <div class="code-table-content">
            <code>import torch.nn as nn

# Create embedding layer
# 10000 words in vocabulary, 256-dimensional vectors
embedding = nn.Embedding(num_embeddings=10000, embedding_dim=256)

# Convert word indices to vectors
word_indices = torch.tensor([42, 156, 789])  # "Hello world !"
word_vectors = embedding(word_indices)  # Shape: (3, 256)</code>
        </div>
    </div>
</div>

<!-- Slide 34: The Attention Mechanism -->
<div class="slide" id="slide52">
    <span class="slide-number">52</span>
    <h2>Module 8: The Attention Mechanism</h2>
    <p>The breakthrough that enabled modern LLMs</p>
    <div class="highlight">
        <p><strong>Problem:</strong> In the sentence "The cat sat on the mat because it was tired", what does "it" refer to?</p>
        <p style="margin-top: 10px;"><strong>Solution:</strong> Attention lets the model look at all words and decide which are relevant.</p>
    </div>
    <div class="formula" style="margin-top: 20px;">
        $$\text{Attention}(Q, K, V) = \text{softmax}\left(\frac{QK^T}{\sqrt{d_k}}\right)V$$
    </div>
    <ul style="margin-top: 20px;">
        <li><strong>Query:</strong> What am I looking for?</li>
        <li><strong>Key:</strong> What do I contain?</li>
        <li><strong>Value:</strong> What information do I provide?</li>
    </ul>
</div>

<!-- Slide 34b: Computing Q, K, V Matrices -->
<div class="slide" id="slide52b">
    <span class="slide-number">52b</span>
    <h2>Computing Query, Key, Value</h2>
    <p>How inputs become Q, K, V matrices</p>
    <div style="display: flex; justify-content: center;">
        <div class="card" style="text-align: center; width: 95%; max-width: 1200px;">
            <svg viewBox="0 0 900 380" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Input Embeddings -->
                <g>
                    <text x="100" y="25" fill="white" font-size="14" text-anchor="middle" font-weight="bold">Input Embeddings (X)</text>
                    <text x="100" y="45" fill="rgba(255,255,255,0.6)" font-size="10" text-anchor="middle">Each word → vector</text>

                    <!-- Token boxes -->
                    <rect x="20" y="60" width="60" height="120" rx="6" fill="rgba(74,144,217,0.5)" stroke="#4a90d9" stroke-width="2">
                        <animate attributeName="opacity" values="0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.08;1"/>
                    </rect>
                    <text x="50" y="100" fill="white" font-size="10" text-anchor="middle">"The"</text>
                    <text x="50" y="115" fill="rgba(255,255,255,0.5)" font-size="8" text-anchor="middle">x₁</text>
                    <text x="50" y="165" fill="rgba(255,255,255,0.4)" font-size="7" text-anchor="middle">[0.2, -0.5</text>
                    <text x="50" y="175" fill="rgba(255,255,255,0.4)" font-size="7" text-anchor="middle">0.8, ...]</text>

                    <rect x="85" y="60" width="60" height="120" rx="6" fill="rgba(81,207,102,0.5)" stroke="#51cf66" stroke-width="2">
                        <animate attributeName="opacity" values="0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.05;0.12;1"/>
                    </rect>
                    <text x="115" y="100" fill="white" font-size="10" text-anchor="middle">"cat"</text>
                    <text x="115" y="115" fill="rgba(255,255,255,0.5)" font-size="8" text-anchor="middle">x₂</text>

                    <rect x="150" y="60" width="60" height="120" rx="6" fill="rgba(255,107,107,0.5)" stroke="#ff6b6b" stroke-width="2">
                        <animate attributeName="opacity" values="0;0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.08;0.12;0.18;1"/>
                    </rect>
                    <text x="180" y="100" fill="white" font-size="10" text-anchor="middle">"sat"</text>
                    <text x="180" y="115" fill="rgba(255,255,255,0.5)" font-size="8" text-anchor="middle">x₃</text>
                </g>

                <!-- Arrows to weight matrices -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.15;0.18;0.2;0.25;1"/>
                    <line x1="215" y1="100" x2="260" y2="70" stroke="#4a90d9" stroke-width="2"/>
                    <line x1="215" y1="120" x2="260" y2="140" stroke="#51cf66" stroke-width="2"/>
                    <line x1="215" y1="140" x2="260" y2="210" stroke="#ff6b6b" stroke-width="2"/>
                </g>

                <!-- Weight Matrices -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.2;0.22;0.24;0.26;0.32;1"/>

                    <!-- Wq -->
                    <rect x="265" y="40" width="80" height="60" rx="6" fill="rgba(74,144,217,0.4)" stroke="#4a90d9" stroke-width="3">
                        <animate attributeName="fill" values="rgba(74,144,217,0.4);rgba(74,144,217,0.7);rgba(74,144,217,0.4)" dur="2s" repeatCount="indefinite"/>
                    </rect>
                    <text x="305" y="65" fill="white" font-size="14" text-anchor="middle" font-weight="bold">Wq</text>
                    <text x="305" y="82" fill="rgba(255,255,255,0.6)" font-size="9" text-anchor="middle">d × d_k</text>

                    <!-- Wk -->
                    <rect x="265" y="110" width="80" height="60" rx="6" fill="rgba(81,207,102,0.4)" stroke="#51cf66" stroke-width="3">
                        <animate attributeName="fill" values="rgba(81,207,102,0.4);rgba(81,207,102,0.7);rgba(81,207,102,0.4)" dur="2s" begin="0.3s" repeatCount="indefinite"/>
                    </rect>
                    <text x="305" y="135" fill="white" font-size="14" text-anchor="middle" font-weight="bold">Wk</text>
                    <text x="305" y="152" fill="rgba(255,255,255,0.6)" font-size="9" text-anchor="middle">d × d_k</text>

                    <!-- Wv -->
                    <rect x="265" y="180" width="80" height="60" rx="6" fill="rgba(255,107,107,0.4)" stroke="#ff6b6b" stroke-width="3">
                        <animate attributeName="fill" values="rgba(255,107,107,0.4);rgba(255,107,107,0.7);rgba(255,107,107,0.4)" dur="2s" begin="0.6s" repeatCount="indefinite"/>
                    </rect>
                    <text x="305" y="205" fill="white" font-size="14" text-anchor="middle" font-weight="bold">Wv</text>
                    <text x="305" y="222" fill="rgba(255,255,255,0.6)" font-size="9" text-anchor="middle">d × d_v</text>

                    <text x="305" y="260" fill="rgba(255,255,255,0.5)" font-size="9" text-anchor="middle">Learned parameters!</text>
                </g>

                <!-- Multiplication signs and arrows -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.3;0.32;0.34;0.36;0.38;0.42;1"/>
                    <text x="370" y="75" fill="white" font-size="16" text-anchor="middle">×</text>
                    <text x="370" y="145" fill="white" font-size="16" text-anchor="middle">×</text>
                    <text x="370" y="215" fill="white" font-size="16" text-anchor="middle">×</text>
                    <line x1="385" y1="70" x2="420" y2="70" stroke="#4a90d9" stroke-width="2" marker-end="url(#arrowBlueQKV)"/>
                    <line x1="385" y1="140" x2="420" y2="140" stroke="#51cf66" stroke-width="2" marker-end="url(#arrowGreenQKV)"/>
                    <line x1="385" y1="210" x2="420" y2="210" stroke="#ff6b6b" stroke-width="2" marker-end="url(#arrowRedQKV)"/>
                </g>

                <!-- Q, K, V matrices -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.38;0.4;0.42;0.44;0.46;0.48;0.55;1"/>

                    <!-- Q matrix -->
                    <rect x="430" y="40" width="120" height="60" rx="6" fill="rgba(74,144,217,0.6)" stroke="#4a90d9" stroke-width="3">
                        <animate attributeName="stroke-width" values="3;5;3" dur="2s" repeatCount="indefinite"/>
                    </rect>
                    <text x="490" y="65" fill="white" font-size="16" text-anchor="middle" font-weight="bold">Q</text>
                    <text x="490" y="82" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="middle">= X · Wq</text>
                    <text x="490" y="95" fill="#4a90d9" font-size="8" text-anchor="middle">"What am I looking for?"</text>

                    <!-- K matrix -->
                    <rect x="430" y="110" width="120" height="60" rx="6" fill="rgba(81,207,102,0.6)" stroke="#51cf66" stroke-width="3">
                        <animate attributeName="stroke-width" values="3;5;3" dur="2s" begin="0.3s" repeatCount="indefinite"/>
                    </rect>
                    <text x="490" y="135" fill="white" font-size="16" text-anchor="middle" font-weight="bold">K</text>
                    <text x="490" y="152" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="middle">= X · Wk</text>
                    <text x="490" y="165" fill="#51cf66" font-size="8" text-anchor="middle">"What do I contain?"</text>

                    <!-- V matrix -->
                    <rect x="430" y="180" width="120" height="60" rx="6" fill="rgba(255,107,107,0.6)" stroke="#ff6b6b" stroke-width="3">
                        <animate attributeName="stroke-width" values="3;5;3" dur="2s" begin="0.6s" repeatCount="indefinite"/>
                    </rect>
                    <text x="490" y="205" fill="white" font-size="16" text-anchor="middle" font-weight="bold">V</text>
                    <text x="490" y="222" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="middle">= X · Wv</text>
                    <text x="490" y="235" fill="#ff6b6b" font-size="8" text-anchor="middle">"What info do I provide?"</text>
                </g>

                <!-- Arrow to attention -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.5;0.52;0.54;0.56;0.58;0.6;0.62;0.68;1"/>
                    <line x1="555" y1="140" x2="600" y2="140" stroke="#ffd700" stroke-width="3" marker-end="url(#arrowYellowQKV)"/>
                </g>

                <!-- Attention computation -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.58;0.6;0.62;0.64;0.66;0.68;0.7;0.72;0.78;1"/>

                    <rect x="610" y="60" width="270" height="160" rx="8" fill="rgba(255,215,0,0.2)" stroke="#ffd700" stroke-width="2"/>
                    <text x="745" y="90" fill="#ffd700" font-size="14" text-anchor="middle" font-weight="bold">Attention Computation</text>

                    <!-- Step 1 -->
                    <text x="630" y="120" fill="white" font-size="11" text-anchor="start">1. Scores = Q × K^T</text>
                    <text x="650" y="135" fill="rgba(255,255,255,0.6)" font-size="9" text-anchor="start">(how much each word attends to others)</text>

                    <!-- Step 2 -->
                    <text x="630" y="160" fill="white" font-size="11" text-anchor="start">2. Scale by √d_k</text>
                    <text x="650" y="175" fill="rgba(255,255,255,0.6)" font-size="9" text-anchor="start">(prevents vanishing gradients)</text>

                    <!-- Step 3 -->
                    <text x="630" y="200" fill="white" font-size="11" text-anchor="start">3. Softmax → Weights (0-1)</text>
                    <text x="650" y="215" fill="rgba(255,255,255,0.6)" font-size="9" text-anchor="start">(probabilities sum to 1)</text>
                </g>

                <!-- Final output -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.72;0.74;0.76;0.78;0.8;0.82;0.84;0.86;0.88;0.92;1"/>

                    <rect x="610" y="235" width="270" height="55" rx="8" fill="rgba(78,205,196,0.4)" stroke="#4ecdc4" stroke-width="3">
                        <animate attributeName="fill" values="rgba(78,205,196,0.4);rgba(78,205,196,0.6);rgba(78,205,196,0.4)" dur="2s" repeatCount="indefinite"/>
                    </rect>
                    <text x="745" y="260" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Output = Weights × V</text>
                    <text x="745" y="280" fill="rgba(255,255,255,0.7)" font-size="10" text-anchor="middle">Weighted combination of values</text>
                </g>

                <!-- Key dimensions box -->
                <rect x="20" y="285" width="200" height="85" rx="6" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>
                <text x="120" y="305" fill="white" font-size="11" text-anchor="middle" font-weight="bold">Key Dimensions</text>
                <text x="30" y="325" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="start">• d = embedding dim (512, 768, ...)</text>
                <text x="30" y="340" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="start">• d_k = key/query dim (64 typical)</text>
                <text x="30" y="355" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="start">• d_v = value dim (64 typical)</text>
                <text x="30" y="370" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="start">• n = sequence length</text>

                <!-- Arrow definitions -->
                <defs>
                    <marker id="arrowBlueQKV" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L8,3 z" fill="#4a90d9"/>
                    </marker>
                    <marker id="arrowGreenQKV" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L8,3 z" fill="#51cf66"/>
                    </marker>
                    <marker id="arrowRedQKV" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L8,3 z" fill="#ff6b6b"/>
                    </marker>
                    <marker id="arrowYellowQKV" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L8,3 z" fill="#ffd700"/>
                    </marker>
                </defs>
            </svg>
        </div>
    </div>
</div>

<!-- Slide 34c: Attention Score Computation -->
<div class="slide" id="slide52c">
    <span class="slide-number">52c</span>
    <h2>Attention Scores in Action</h2>
    <p>Visualizing how attention weights are computed</p>
    <div style="display: flex; justify-content: center;">
        <div class="card" style="text-align: center; width: 95%; max-width: 1200px;">
            <svg viewBox="0 0 900 360" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Query vectors -->
                <g>
                    <text x="80" y="25" fill="#4a90d9" font-size="13" text-anchor="middle" font-weight="bold">Query (Q)</text>
                    <text x="80" y="42" fill="rgba(255,255,255,0.5)" font-size="9" text-anchor="middle">"it" is asking: what should I attend to?</text>

                    <rect x="30" y="55" width="100" height="50" rx="6" fill="rgba(74,144,217,0.5)" stroke="#4a90d9" stroke-width="2">
                        <animate attributeName="fill" values="rgba(74,144,217,0.5);rgba(74,144,217,0.8);rgba(74,144,217,0.5)" dur="3s" repeatCount="indefinite"/>
                    </rect>
                    <text x="80" y="80" fill="white" font-size="12" text-anchor="middle" font-weight="bold">q_"it"</text>
                    <text x="80" y="95" fill="rgba(255,255,255,0.6)" font-size="8" text-anchor="middle">[0.3, -0.2, 0.8, ...]</text>
                </g>

                <!-- Multiply symbol -->
                <text x="160" y="85" fill="white" font-size="24" text-anchor="middle">×</text>

                <!-- Key vectors -->
                <g>
                    <text x="320" y="25" fill="#51cf66" font-size="13" text-anchor="middle" font-weight="bold">Keys (K^T)</text>
                    <text x="320" y="42" fill="rgba(255,255,255,0.5)" font-size="9" text-anchor="middle">Each word offers: "here's what I contain"</text>

                    <rect x="190" y="55" width="65" height="50" rx="4" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="1"/>
                    <text x="222" y="80" fill="white" font-size="9" text-anchor="middle">k_"The"</text>

                    <rect x="260" y="55" width="65" height="50" rx="4" fill="rgba(81,207,102,0.5)" stroke="#51cf66" stroke-width="2">
                        <animate attributeName="fill" values="rgba(81,207,102,0.5);rgba(81,207,102,0.9);rgba(81,207,102,0.5)" dur="3s" begin="1s" repeatCount="indefinite"/>
                    </rect>
                    <text x="292" y="80" fill="white" font-size="9" text-anchor="middle" font-weight="bold">k_"cat"</text>

                    <rect x="330" y="55" width="65" height="50" rx="4" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="1"/>
                    <text x="362" y="80" fill="white" font-size="9" text-anchor="middle">k_"sat"</text>

                    <rect x="400" y="55" width="65" height="50" rx="4" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="1"/>
                    <text x="432" y="80" fill="white" font-size="9" text-anchor="middle">k_"on"</text>
                </g>

                <!-- Equals -->
                <text x="495" y="85" fill="white" font-size="24" text-anchor="middle">=</text>

                <!-- Raw scores -->
                <g>
                    <text x="610" y="25" fill="#ffd700" font-size="13" text-anchor="middle" font-weight="bold">Raw Scores</text>
                    <text x="610" y="42" fill="rgba(255,255,255,0.5)" font-size="9" text-anchor="middle">Dot product = similarity</text>

                    <rect x="520" y="55" width="45" height="50" rx="4" fill="rgba(255,215,0,0.2)" stroke="#ffd700" stroke-width="1"/>
                    <text x="542" y="85" fill="white" font-size="10" text-anchor="middle">0.5</text>

                    <rect x="570" y="55" width="45" height="50" rx="4" fill="rgba(255,215,0,0.6)" stroke="#ffd700" stroke-width="2">
                        <animate attributeName="fill" values="rgba(255,215,0,0.6);rgba(255,215,0,1);rgba(255,215,0,0.6)" dur="3s" begin="1s" repeatCount="indefinite"/>
                    </rect>
                    <text x="592" y="85" fill="white" font-size="10" text-anchor="middle" font-weight="bold">2.1</text>

                    <rect x="620" y="55" width="45" height="50" rx="4" fill="rgba(255,215,0,0.15)" stroke="#ffd700" stroke-width="1"/>
                    <text x="642" y="85" fill="white" font-size="10" text-anchor="middle">0.3</text>

                    <rect x="670" y="55" width="45" height="50" rx="4" fill="rgba(255,215,0,0.1)" stroke="#ffd700" stroke-width="1"/>
                    <text x="692" y="85" fill="white" font-size="10" text-anchor="middle">0.1</text>
                </g>

                <!-- Division by sqrt(d_k) -->
                <g>
                    <line x1="450" y1="130" x2="450" y2="160" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowDownY)"/>
                    <rect x="350" y="165" width="200" height="35" rx="6" fill="rgba(255,215,0,0.15)" stroke="#ffd700" stroke-width="1"/>
                    <text x="450" y="188" fill="#ffd700" font-size="11" text-anchor="middle">÷ √d_k (e.g., √64 = 8)</text>
                </g>

                <!-- Softmax -->
                <g>
                    <line x1="450" y1="200" x2="450" y2="230" stroke="#e040fb" stroke-width="2" marker-end="url(#arrowDownP)"/>
                    <rect x="350" y="235" width="200" height="35" rx="6" fill="rgba(224,64,251,0.2)" stroke="#e040fb" stroke-width="2"/>
                    <text x="450" y="258" fill="#e040fb" font-size="11" text-anchor="middle" font-weight="bold">Softmax (normalize to 0-1)</text>
                </g>

                <!-- Attention weights -->
                <g>
                    <line x1="450" y1="270" x2="450" y2="295" stroke="#4ecdc4" stroke-width="2" marker-end="url(#arrowDownT)"/>
                    <text x="450" y="315" fill="#4ecdc4" font-size="13" text-anchor="middle" font-weight="bold">Attention Weights</text>

                    <!-- Weight bars -->
                    <rect x="280" y="325" width="30" height="25" rx="3" fill="rgba(78,205,196,0.3)" stroke="#4ecdc4" stroke-width="1"/>
                    <text x="295" y="342" fill="white" font-size="9" text-anchor="middle">0.12</text>
                    <text x="295" y="360" fill="rgba(255,255,255,0.5)" font-size="8" text-anchor="middle">"The"</text>

                    <rect x="360" y="325" width="80" height="25" rx="3" fill="rgba(78,205,196,0.8)" stroke="#4ecdc4" stroke-width="2">
                        <animate attributeName="fill" values="rgba(78,205,196,0.8);rgba(78,205,196,1);rgba(78,205,196,0.8)" dur="2s" repeatCount="indefinite"/>
                    </rect>
                    <text x="400" y="342" fill="white" font-size="9" text-anchor="middle" font-weight="bold">0.71</text>
                    <text x="400" y="360" fill="rgba(255,255,255,0.8)" font-size="8" text-anchor="middle" font-weight="bold">"cat" ✓</text>

                    <rect x="490" y="325" width="25" height="25" rx="3" fill="rgba(78,205,196,0.2)" stroke="#4ecdc4" stroke-width="1"/>
                    <text x="502" y="342" fill="white" font-size="9" text-anchor="middle">0.10</text>
                    <text x="502" y="360" fill="rgba(255,255,255,0.5)" font-size="8" text-anchor="middle">"sat"</text>

                    <rect x="565" y="325" width="20" height="25" rx="3" fill="rgba(78,205,196,0.15)" stroke="#4ecdc4" stroke-width="1"/>
                    <text x="575" y="342" fill="white" font-size="9" text-anchor="middle">0.07</text>
                    <text x="575" y="360" fill="rgba(255,255,255,0.5)" font-size="8" text-anchor="middle">"on"</text>
                </g>

                <!-- Explanation box -->
                <rect x="700" y="130" width="180" height="180" rx="8" fill="rgba(78,205,196,0.1)" stroke="#4ecdc4" stroke-width="2"/>
                <text x="790" y="155" fill="#4ecdc4" font-size="12" text-anchor="middle" font-weight="bold">Result</text>
                <text x="710" y="180" fill="rgba(255,255,255,0.8)" font-size="10" text-anchor="start">"it" attends mostly</text>
                <text x="710" y="195" fill="rgba(255,255,255,0.8)" font-size="10" text-anchor="start">to "cat" (71%)</text>
                <text x="710" y="220" fill="rgba(255,255,255,0.6)" font-size="9" text-anchor="start">The model learns:</text>
                <text x="710" y="235" fill="rgba(255,255,255,0.6)" font-size="9" text-anchor="start">"it" refers to "cat"!</text>
                <text x="710" y="260" fill="rgba(255,255,255,0.5)" font-size="8" text-anchor="start">This is how attention</text>
                <text x="710" y="275" fill="rgba(255,255,255,0.5)" font-size="8" text-anchor="start">resolves pronouns</text>
                <text x="710" y="290" fill="rgba(255,255,255,0.5)" font-size="8" text-anchor="start">and dependencies.</text>

                <!-- Arrow definitions -->
                <defs>
                    <marker id="arrowDownY" markerWidth="8" markerHeight="8" refX="3" refY="7" orient="auto">
                        <path d="M0,0 L6,0 L3,8 z" fill="#ffd700"/>
                    </marker>
                    <marker id="arrowDownP" markerWidth="8" markerHeight="8" refX="3" refY="7" orient="auto">
                        <path d="M0,0 L6,0 L3,8 z" fill="#e040fb"/>
                    </marker>
                    <marker id="arrowDownT" markerWidth="8" markerHeight="8" refX="3" refY="7" orient="auto">
                        <path d="M0,0 L6,0 L3,8 z" fill="#4ecdc4"/>
                    </marker>
                </defs>
            </svg>
        </div>
    </div>
</div>

<!-- Slide 34d: Multi-Head Attention -->
<div class="slide" id="slide52d">
    <span class="slide-number">52d</span>
    <h2>Multi-Head Attention</h2>
    <p>Multiple attention patterns in parallel</p>
    <div class="two-column">
        <div class="card" style="text-align: center;">
            <svg viewBox="0 0 400 280" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Input -->
                <rect x="150" y="10" width="100" height="40" rx="6" fill="rgba(74,144,217,0.5)" stroke="#4a90d9" stroke-width="2"/>
                <text x="200" y="35" fill="white" font-size="11" text-anchor="middle" font-weight="bold">Input X</text>

                <!-- Split arrows -->
                <line x1="170" y1="50" x2="70" y2="80" stroke="rgba(255,255,255,0.5)" stroke-width="1"/>
                <line x1="185" y1="50" x2="145" y2="80" stroke="rgba(255,255,255,0.5)" stroke-width="1"/>
                <line x1="200" y1="50" x2="200" y2="80" stroke="rgba(255,255,255,0.5)" stroke-width="1"/>
                <line x1="215" y1="50" x2="255" y2="80" stroke="rgba(255,255,255,0.5)" stroke-width="1"/>
                <line x1="230" y1="50" x2="330" y2="80" stroke="rgba(255,255,255,0.5)" stroke-width="1"/>

                <!-- Attention heads -->
                <g>
                    <rect x="30" y="85" width="70" height="60" rx="6" fill="rgba(255,107,107,0.4)" stroke="#ff6b6b" stroke-width="2">
                        <animate attributeName="fill" values="rgba(255,107,107,0.4);rgba(255,107,107,0.7);rgba(255,107,107,0.4)" dur="2s" repeatCount="indefinite"/>
                    </rect>
                    <text x="65" y="110" fill="white" font-size="10" text-anchor="middle" font-weight="bold">Head 1</text>
                    <text x="65" y="125" fill="rgba(255,255,255,0.6)" font-size="7" text-anchor="middle">Syntax</text>
                    <text x="65" y="138" fill="rgba(255,255,255,0.5)" font-size="6" text-anchor="middle">subject-verb</text>
                </g>

                <g>
                    <rect x="110" y="85" width="70" height="60" rx="6" fill="rgba(255,215,0,0.4)" stroke="#ffd700" stroke-width="2">
                        <animate attributeName="fill" values="rgba(255,215,0,0.4);rgba(255,215,0,0.7);rgba(255,215,0,0.4)" dur="2s" begin="0.4s" repeatCount="indefinite"/>
                    </rect>
                    <text x="145" y="110" fill="white" font-size="10" text-anchor="middle" font-weight="bold">Head 2</text>
                    <text x="145" y="125" fill="rgba(255,255,255,0.6)" font-size="7" text-anchor="middle">Coreference</text>
                    <text x="145" y="138" fill="rgba(255,255,255,0.5)" font-size="6" text-anchor="middle">it→cat</text>
                </g>

                <g>
                    <rect x="190" y="85" width="70" height="60" rx="6" fill="rgba(81,207,102,0.4)" stroke="#51cf66" stroke-width="2">
                        <animate attributeName="fill" values="rgba(81,207,102,0.4);rgba(81,207,102,0.7);rgba(81,207,102,0.4)" dur="2s" begin="0.8s" repeatCount="indefinite"/>
                    </rect>
                    <text x="225" y="110" fill="white" font-size="10" text-anchor="middle" font-weight="bold">Head 3</text>
                    <text x="225" y="125" fill="rgba(255,255,255,0.6)" font-size="7" text-anchor="middle">Position</text>
                    <text x="225" y="138" fill="rgba(255,255,255,0.5)" font-size="6" text-anchor="middle">nearby</text>
                </g>

                <g>
                    <rect x="270" y="85" width="70" height="60" rx="6" fill="rgba(224,64,251,0.4)" stroke="#e040fb" stroke-width="2">
                        <animate attributeName="fill" values="rgba(224,64,251,0.4);rgba(224,64,251,0.7);rgba(224,64,251,0.4)" dur="2s" begin="1.2s" repeatCount="indefinite"/>
                    </rect>
                    <text x="305" y="110" fill="white" font-size="10" text-anchor="middle" font-weight="bold">Head 4</text>
                    <text x="305" y="125" fill="rgba(255,255,255,0.6)" font-size="7" text-anchor="middle">Semantic</text>
                    <text x="305" y="138" fill="rgba(255,255,255,0.5)" font-size="6" text-anchor="middle">meaning</text>
                </g>

                <!-- Concat -->
                <line x1="65" y1="145" x2="65" y2="175" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <line x1="145" y1="145" x2="145" y2="175" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <line x1="225" y1="145" x2="225" y2="175" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <line x1="305" y1="145" x2="305" y2="175" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>

                <rect x="50" y="175" width="270" height="35" rx="6" fill="rgba(78,205,196,0.3)" stroke="#4ecdc4" stroke-width="2"/>
                <text x="185" y="197" fill="#4ecdc4" font-size="11" text-anchor="middle" font-weight="bold">Concat(head1, head2, head3, head4)</text>

                <!-- Final projection -->
                <line x1="185" y1="210" x2="185" y2="235" stroke="#4ecdc4" stroke-width="2"/>
                <rect x="120" y="235" width="130" height="35" rx="6" fill="rgba(78,205,196,0.5)" stroke="#4ecdc4" stroke-width="3">
                    <animate attributeName="stroke-width" values="3;5;3" dur="2s" repeatCount="indefinite"/>
                </rect>
                <text x="185" y="258" fill="white" font-size="11" text-anchor="middle" font-weight="bold">× W_O → Output</text>
            </svg>
        </div>
        <div class="card">
            <h4>Why Multiple Heads?</h4>
            <ul>
                <li><strong>Different patterns:</strong> Each head learns different relationships</li>
                <li><strong>Parallel computation:</strong> All heads run simultaneously</li>
                <li><strong>Richer representation:</strong> Combine multiple perspectives</li>
            </ul>

            <h4 style="margin-top: 20px;">Typical Configurations</h4>
            <table style="width: 100%; font-size: 0.85em; margin: 10px 0;">
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td>BERT-base</td>
                    <td style="text-align: right;">12 heads</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td>GPT-2</td>
                    <td style="text-align: right;">12 heads</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td>GPT-3</td>
                    <td style="text-align: right;">96 heads</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td>LLaMA 70B</td>
                    <td style="text-align: right;">64 heads</td>
                </tr>
            </table>

            <div class="highlight" style="margin-top: 15px;">
                <p style="font-size: 0.85em;"><strong>Formula:</strong></p>
                <p style="font-size: 0.8em; font-family: monospace;">MultiHead(Q,K,V) = Concat(head₁,...,headₕ)W^O</p>
                <p style="font-size: 0.8em; font-family: monospace;">where headᵢ = Attention(QWᵢᵠ, KWᵢᵏ, VWᵢᵛ)</p>
            </div>
        </div>
    </div>
</div>

<!-- Slide 34e: Masked Self-Attention (Decoder) -->
<div class="slide" id="slide52e">
    <span class="slide-number">52e</span>
    <h2>Masked Self-Attention (Decoder)</h2>
    <p>How LLMs generate text one token at a time</p>
    <div style="display: flex; justify-content: center;">
        <div class="card" style="text-align: center; width: 95%; max-width: 1100px;">
            <svg viewBox="0 0 800 340" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Title -->
                <text x="400" y="25" fill="white" font-size="14" text-anchor="middle" font-weight="bold">Generating: "The cat sat"</text>

                <!-- Attention matrix visualization -->
                <g transform="translate(50, 50)">
                    <text x="150" y="0" fill="#ffd700" font-size="12" text-anchor="middle" font-weight="bold">Attention Matrix (with Mask)</text>

                    <!-- Column headers (Keys) -->
                    <text x="90" y="35" fill="#51cf66" font-size="10" text-anchor="middle">K: "The"</text>
                    <text x="150" y="35" fill="#51cf66" font-size="10" text-anchor="middle">K: "cat"</text>
                    <text x="210" y="35" fill="#51cf66" font-size="10" text-anchor="middle">K: "sat"</text>

                    <!-- Row labels (Queries) -->
                    <text x="25" y="75" fill="#4a90d9" font-size="10" text-anchor="middle">Q: "The"</text>
                    <text x="25" y="135" fill="#4a90d9" font-size="10" text-anchor="middle">Q: "cat"</text>
                    <text x="25" y="195" fill="#4a90d9" font-size="10" text-anchor="middle">Q: "sat"</text>

                    <!-- Matrix cells -->
                    <!-- Row 1: "The" can only see itself -->
                    <rect x="60" y="50" width="55" height="50" rx="4" fill="rgba(78,205,196,0.6)" stroke="#4ecdc4" stroke-width="2">
                        <animate attributeName="fill" values="rgba(78,205,196,0.6);rgba(78,205,196,0.9);rgba(78,205,196,0.6)" dur="3s" repeatCount="indefinite"/>
                    </rect>
                    <text x="87" y="80" fill="white" font-size="12" text-anchor="middle" font-weight="bold">1.0</text>

                    <rect x="120" y="50" width="55" height="50" rx="4" fill="rgba(255,107,107,0.3)" stroke="#ff6b6b" stroke-width="2"/>
                    <text x="147" y="75" fill="#ff6b6b" font-size="16" text-anchor="middle">✗</text>
                    <text x="147" y="92" fill="rgba(255,255,255,0.4)" font-size="8" text-anchor="middle">-∞</text>

                    <rect x="180" y="50" width="55" height="50" rx="4" fill="rgba(255,107,107,0.3)" stroke="#ff6b6b" stroke-width="2"/>
                    <text x="207" y="75" fill="#ff6b6b" font-size="16" text-anchor="middle">✗</text>
                    <text x="207" y="92" fill="rgba(255,255,255,0.4)" font-size="8" text-anchor="middle">-∞</text>

                    <!-- Row 2: "cat" can see "The" and itself -->
                    <rect x="60" y="110" width="55" height="50" rx="4" fill="rgba(78,205,196,0.4)" stroke="#4ecdc4" stroke-width="1"/>
                    <text x="87" y="140" fill="white" font-size="12" text-anchor="middle">0.3</text>

                    <rect x="120" y="110" width="55" height="50" rx="4" fill="rgba(78,205,196,0.7)" stroke="#4ecdc4" stroke-width="2">
                        <animate attributeName="fill" values="rgba(78,205,196,0.7);rgba(78,205,196,1);rgba(78,205,196,0.7)" dur="3s" begin="1s" repeatCount="indefinite"/>
                    </rect>
                    <text x="147" y="140" fill="white" font-size="12" text-anchor="middle" font-weight="bold">0.7</text>

                    <rect x="180" y="110" width="55" height="50" rx="4" fill="rgba(255,107,107,0.3)" stroke="#ff6b6b" stroke-width="2"/>
                    <text x="207" y="135" fill="#ff6b6b" font-size="16" text-anchor="middle">✗</text>
                    <text x="207" y="152" fill="rgba(255,255,255,0.4)" font-size="8" text-anchor="middle">-∞</text>

                    <!-- Row 3: "sat" can see all previous -->
                    <rect x="60" y="170" width="55" height="50" rx="4" fill="rgba(78,205,196,0.25)" stroke="#4ecdc4" stroke-width="1"/>
                    <text x="87" y="200" fill="white" font-size="12" text-anchor="middle">0.15</text>

                    <rect x="120" y="170" width="55" height="50" rx="4" fill="rgba(78,205,196,0.5)" stroke="#4ecdc4" stroke-width="1"/>
                    <text x="147" y="200" fill="white" font-size="12" text-anchor="middle">0.35</text>

                    <rect x="180" y="170" width="55" height="50" rx="4" fill="rgba(78,205,196,0.65)" stroke="#4ecdc4" stroke-width="2">
                        <animate attributeName="fill" values="rgba(78,205,196,0.65);rgba(78,205,196,0.95);rgba(78,205,196,0.65)" dur="3s" begin="2s" repeatCount="indefinite"/>
                    </rect>
                    <text x="207" y="200" fill="white" font-size="12" text-anchor="middle" font-weight="bold">0.50</text>

                    <!-- Mask indicator -->
                    <line x1="55" y1="45" x2="240" y2="225" stroke="#ff6b6b" stroke-width="3" stroke-dasharray="8,4" opacity="0.7"/>
                    <text x="260" y="130" fill="#ff6b6b" font-size="10" text-anchor="start">← Mask</text>
                    <text x="260" y="145" fill="rgba(255,255,255,0.5)" font-size="8" text-anchor="start">(future tokens)</text>
                </g>

                <!-- Explanation -->
                <g transform="translate(400, 50)">
                    <text x="180" y="20" fill="white" font-size="13" text-anchor="middle" font-weight="bold">Why Masking?</text>

                    <rect x="20" y="35" width="320" height="80" rx="6" fill="rgba(255,107,107,0.15)" stroke="#ff6b6b" stroke-width="2"/>
                    <text x="180" y="60" fill="#ff6b6b" font-size="11" text-anchor="middle" font-weight="bold">Prevents "Cheating"</text>
                    <text x="30" y="80" fill="rgba(255,255,255,0.8)" font-size="10" text-anchor="start">During training, the model sees the full sequence.</text>
                    <text x="30" y="95" fill="rgba(255,255,255,0.8)" font-size="10" text-anchor="start">Masking ensures it can only use past tokens</text>
                    <text x="30" y="110" fill="rgba(255,255,255,0.8)" font-size="10" text-anchor="start">to predict the next one (like during inference).</text>

                    <rect x="20" y="125" width="320" height="70" rx="6" fill="rgba(78,205,196,0.15)" stroke="#4ecdc4" stroke-width="2"/>
                    <text x="180" y="150" fill="#4ecdc4" font-size="11" text-anchor="middle" font-weight="bold">Autoregressive Generation</text>
                    <text x="30" y="170" fill="rgba(255,255,255,0.8)" font-size="10" text-anchor="start">1. Generate token 1 (only sees: &lt;start&gt;)</text>
                    <text x="30" y="185" fill="rgba(255,255,255,0.8)" font-size="10" text-anchor="start">2. Generate token 2 (sees: &lt;start&gt;, token 1)</text>

                    <rect x="20" y="205" width="320" height="55" rx="6" fill="rgba(255,215,0,0.15)" stroke="#ffd700" stroke-width="2"/>
                    <text x="180" y="230" fill="#ffd700" font-size="11" text-anchor="middle" font-weight="bold">Implementation</text>
                    <text x="30" y="250" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="start">mask = torch.triu(torch.ones(n, n), diagonal=1)</text>
                    <text x="30" y="262" fill="rgba(255,255,255,0.5)" font-size="8" text-anchor="start">scores.masked_fill(mask == 1, float('-inf'))</text>
                </g>

                <!-- Encoder vs Decoder comparison -->
                <g transform="translate(50, 275)">
                    <rect x="0" y="0" width="170" height="55" rx="6" fill="rgba(81,207,102,0.2)" stroke="#51cf66" stroke-width="2"/>
                    <text x="85" y="20" fill="#51cf66" font-size="11" text-anchor="middle" font-weight="bold">Encoder (BERT)</text>
                    <text x="85" y="38" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="middle">Bidirectional - sees all</text>
                    <text x="85" y="50" fill="rgba(255,255,255,0.5)" font-size="8" text-anchor="middle">Good for: classification, NER</text>

                    <rect x="190" y="0" width="170" height="55" rx="6" fill="rgba(224,64,251,0.2)" stroke="#e040fb" stroke-width="2"/>
                    <text x="275" y="20" fill="#e040fb" font-size="11" text-anchor="middle" font-weight="bold">Decoder (GPT)</text>
                    <text x="275" y="38" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="middle">Causal - sees only past</text>
                    <text x="275" y="50" fill="rgba(255,255,255,0.5)" font-size="8" text-anchor="middle">Good for: generation, chat</text>

                    <rect x="380" y="0" width="170" height="55" rx="6" fill="rgba(78,205,196,0.2)" stroke="#4ecdc4" stroke-width="2"/>
                    <text x="465" y="20" fill="#4ecdc4" font-size="11" text-anchor="middle" font-weight="bold">Encoder-Decoder (T5)</text>
                    <text x="465" y="38" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="middle">Both patterns combined</text>
                    <text x="465" y="50" fill="rgba(255,255,255,0.5)" font-size="8" text-anchor="middle">Good for: translation, summarization</text>
                </g>
            </svg>
        </div>
    </div>
</div>

<!-- Slide 34f: Encoder-Decoder Cross-Attention -->
<div class="slide" id="slide52f">
    <span class="slide-number">52f</span>
    <h2>Encoder-Decoder Communication</h2>
    <p>How the decoder attends to the encoder's output (Cross-Attention)</p>
    <div style="display: flex; justify-content: center;">
        <div class="card" style="text-align: center; width: 95%; max-width: 1200px;">
            <svg viewBox="0 0 900 400" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Title -->
                <text x="450" y="25" fill="white" font-size="14" text-anchor="middle" font-weight="bold">Translation: "The cat sat" → "Le chat assis"</text>

                <!-- ENCODER SIDE -->
                <g transform="translate(30, 45)">
                    <rect x="0" y="0" width="280" height="300" rx="10" fill="rgba(81,207,102,0.1)" stroke="#51cf66" stroke-width="2"/>
                    <text x="140" y="25" fill="#51cf66" font-size="14" text-anchor="middle" font-weight="bold">ENCODER</text>

                    <!-- Input tokens -->
                    <text x="140" y="50" fill="rgba(255,255,255,0.6)" font-size="10" text-anchor="middle">Input: English</text>
                    <g transform="translate(20, 60)">
                        <rect x="0" y="0" width="70" height="35" rx="4" fill="rgba(74,144,217,0.5)" stroke="#4a90d9" stroke-width="2">
                            <animate attributeName="opacity" values="0;1;1" dur="10s" repeatCount="indefinite" keyTimes="0;0.05;1"/>
                        </rect>
                        <text x="35" y="22" fill="white" font-size="10" text-anchor="middle">"The"</text>

                        <rect x="80" y="0" width="70" height="35" rx="4" fill="rgba(74,144,217,0.5)" stroke="#4a90d9" stroke-width="2">
                            <animate attributeName="opacity" values="0;0;1;1" dur="10s" repeatCount="indefinite" keyTimes="0;0.03;0.08;1"/>
                        </rect>
                        <text x="115" y="22" fill="white" font-size="10" text-anchor="middle">"cat"</text>

                        <rect x="160" y="0" width="70" height="35" rx="4" fill="rgba(74,144,217,0.5)" stroke="#4a90d9" stroke-width="2">
                            <animate attributeName="opacity" values="0;0;0;1;1" dur="10s" repeatCount="indefinite" keyTimes="0;0.06;0.08;0.12;1"/>
                        </rect>
                        <text x="195" y="22" fill="white" font-size="10" text-anchor="middle">"sat"</text>
                    </g>

                    <!-- Encoder self-attention -->
                    <g opacity="0">
                        <animate attributeName="opacity" values="0;0;0;1;1" dur="10s" repeatCount="indefinite" keyTimes="0;0.1;0.12;0.18;1"/>
                        <rect x="40" y="110" width="200" height="50" rx="6" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="2"/>
                        <text x="140" y="135" fill="white" font-size="10" text-anchor="middle" font-weight="bold">Self-Attention</text>
                        <text x="140" y="150" fill="rgba(255,255,255,0.6)" font-size="8" text-anchor="middle">(Bidirectional - sees all)</text>
                    </g>

                    <!-- Encoder FFN -->
                    <g opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;1;1" dur="10s" repeatCount="indefinite" keyTimes="0;0.15;0.18;0.2;0.25;1"/>
                        <rect x="40" y="170" width="200" height="40" rx="6" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="2"/>
                        <text x="140" y="195" fill="white" font-size="10" text-anchor="middle">Feed Forward</text>
                    </g>

                    <!-- Encoder Output (K, V) -->
                    <g opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;0;1;1" dur="10s" repeatCount="indefinite" keyTimes="0;0.22;0.25;0.27;0.3;0.35;1"/>
                        <rect x="20" y="225" width="240" height="65" rx="8" fill="rgba(81,207,102,0.5)" stroke="#51cf66" stroke-width="3">
                            <animate attributeName="fill" values="rgba(81,207,102,0.5);rgba(81,207,102,0.8);rgba(81,207,102,0.5)" dur="2s" repeatCount="indefinite"/>
                        </rect>
                        <text x="140" y="250" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Encoder Output</text>
                        <text x="80" y="275" fill="#ffd700" font-size="11" text-anchor="middle" font-weight="bold">K</text>
                        <text x="140" y="275" fill="rgba(255,255,255,0.5)" font-size="10" text-anchor="middle">&</text>
                        <text x="200" y="275" fill="#ff6b6b" font-size="11" text-anchor="middle" font-weight="bold">V</text>
                    </g>
                </g>

                <!-- DECODER SIDE -->
                <g transform="translate(590, 45)">
                    <rect x="0" y="0" width="280" height="300" rx="10" fill="rgba(224,64,251,0.1)" stroke="#e040fb" stroke-width="2"/>
                    <text x="140" y="25" fill="#e040fb" font-size="14" text-anchor="middle" font-weight="bold">DECODER</text>

                    <!-- Output tokens (so far) -->
                    <text x="140" y="50" fill="rgba(255,255,255,0.6)" font-size="10" text-anchor="middle">Output: French (so far)</text>
                    <g transform="translate(20, 60)">
                        <rect x="0" y="0" width="70" height="35" rx="4" fill="rgba(224,64,251,0.5)" stroke="#e040fb" stroke-width="2">
                            <animate attributeName="opacity" values="0;0;0;0;0;0;1;1" dur="10s" repeatCount="indefinite" keyTimes="0;0.35;0.38;0.4;0.42;0.45;0.5;1"/>
                        </rect>
                        <text x="35" y="22" fill="white" font-size="10" text-anchor="middle">"Le"</text>

                        <rect x="80" y="0" width="70" height="35" rx="4" fill="rgba(224,64,251,0.5)" stroke="#e040fb" stroke-width="2">
                            <animate attributeName="opacity" values="0;0;0;0;0;0;0;1;1" dur="10s" repeatCount="indefinite" keyTimes="0;0.45;0.48;0.5;0.52;0.55;0.58;0.62;1"/>
                        </rect>
                        <text x="115" y="22" fill="white" font-size="10" text-anchor="middle">"chat"</text>

                        <rect x="160" y="0" width="70" height="35" rx="4" fill="rgba(224,64,251,0.3)" stroke="#e040fb" stroke-width="2" stroke-dasharray="4,2">
                            <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;1;1" dur="10s" repeatCount="indefinite" keyTimes="0;0.6;0.62;0.64;0.66;0.68;0.7;0.72;0.78;1"/>
                        </rect>
                        <text x="195" y="22" fill="rgba(255,255,255,0.6)" font-size="10" text-anchor="middle">???</text>
                    </g>

                    <!-- Decoder masked self-attention -->
                    <g opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;0;0;0;1;1" dur="10s" repeatCount="indefinite" keyTimes="0;0.5;0.52;0.54;0.56;0.58;0.6;0.65;1"/>
                        <rect x="40" y="110" width="200" height="50" rx="6" fill="rgba(224,64,251,0.3)" stroke="#e040fb" stroke-width="2"/>
                        <text x="140" y="135" fill="white" font-size="10" text-anchor="middle" font-weight="bold">Masked Self-Attention</text>
                        <text x="140" y="150" fill="rgba(255,255,255,0.6)" font-size="8" text-anchor="middle">(Causal - sees only past)</text>
                    </g>

                    <!-- Decoder Query output -->
                    <g opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;1;1" dur="10s" repeatCount="indefinite" keyTimes="0;0.58;0.6;0.62;0.64;0.66;0.68;0.7;0.75;1"/>
                        <rect x="90" y="170" width="100" height="35" rx="6" fill="rgba(74,144,217,0.5)" stroke="#4a90d9" stroke-width="2">
                            <animate attributeName="fill" values="rgba(74,144,217,0.5);rgba(74,144,217,0.8);rgba(74,144,217,0.5)" dur="1.5s" repeatCount="indefinite"/>
                        </rect>
                        <text x="140" y="192" fill="white" font-size="11" text-anchor="middle" font-weight="bold">Q</text>
                    </g>
                </g>

                <!-- CROSS-ATTENTION (the bridge) -->
                <g transform="translate(320, 120)">
                    <!-- Cross attention box -->
                    <g opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;0;1;1" dur="10s" repeatCount="indefinite" keyTimes="0;0.68;0.7;0.72;0.74;0.76;0.78;0.8;0.82;0.88;1"/>
                        <rect x="0" y="80" width="260" height="100" rx="10" fill="rgba(255,215,0,0.2)" stroke="#ffd700" stroke-width="3">
                            <animate attributeName="stroke-width" values="3;5;3" dur="2s" repeatCount="indefinite"/>
                        </rect>
                        <text x="130" y="110" fill="#ffd700" font-size="13" text-anchor="middle" font-weight="bold">Cross-Attention</text>
                        <text x="130" y="130" fill="rgba(255,255,255,0.8)" font-size="10" text-anchor="middle">Q from Decoder</text>
                        <text x="130" y="145" fill="rgba(255,255,255,0.8)" font-size="10" text-anchor="middle">K, V from Encoder</text>
                        <text x="130" y="165" fill="rgba(255,255,255,0.6)" font-size="9" text-anchor="middle">Attention(Q_dec, K_enc, V_enc)</text>
                    </g>
                </g>

                <!-- Animated arrows from Encoder to Cross-Attention -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;1;1" dur="10s" repeatCount="indefinite" keyTimes="0;0.7;0.72;0.74;0.76;0.78;0.8;0.82;0.88;1"/>
                    <!-- K arrow -->
                    <path d="M 310 315 Q 380 315, 380 240" fill="none" stroke="#ffd700" stroke-width="3" marker-end="url(#arrowYellowCross)">
                        <animate attributeName="stroke-dasharray" values="0,1000;200,0" dur="1s" begin="8s" repeatCount="indefinite"/>
                    </path>
                    <text x="345" y="300" fill="#ffd700" font-size="10" font-weight="bold">K</text>

                    <!-- V arrow -->
                    <path d="M 310 325 Q 400 325, 500 240" fill="none" stroke="#ff6b6b" stroke-width="3" marker-end="url(#arrowRedCross)">
                        <animate attributeName="stroke-dasharray" values="0,1000;250,0" dur="1s" begin="8.2s" repeatCount="indefinite"/>
                    </path>
                    <text x="395" y="320" fill="#ff6b6b" font-size="10" font-weight="bold">V</text>
                </g>

                <!-- Animated arrow from Decoder to Cross-Attention -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;1;1" dur="10s" repeatCount="indefinite" keyTimes="0;0.72;0.74;0.76;0.78;0.8;0.82;0.84;0.9;1"/>
                    <path d="M 590 233 Q 520 233, 520 240" fill="none" stroke="#4a90d9" stroke-width="3" marker-end="url(#arrowBlueCross)">
                        <animate attributeName="stroke-dasharray" values="0,1000;150,0" dur="1s" begin="8.5s" repeatCount="indefinite"/>
                    </path>
                    <text x="545" y="225" fill="#4a90d9" font-size="10" font-weight="bold">Q</text>
                </g>

                <!-- Output from Cross-Attention to FFN -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;0;0;1" dur="10s" repeatCount="indefinite" keyTimes="0;0.8;0.82;0.84;0.86;0.88;0.9;0.92;0.94;0.96;1"/>
                    <line x1="580" y1="280" x2="730" y2="280" stroke="#4ecdc4" stroke-width="3"/>
                    <rect x="630" y="290" width="200" height="40" rx="6" fill="rgba(78,205,196,0.4)" stroke="#4ecdc4" stroke-width="2"/>
                    <text x="730" y="315" fill="white" font-size="10" text-anchor="middle">Feed Forward → Next Token</text>
                </g>

                <!-- Key insight box at bottom -->
                <rect x="150" y="355" width="600" height="40" rx="6" fill="rgba(255,215,0,0.15)" stroke="#ffd700" stroke-width="2"/>
                <text x="450" y="375" fill="#ffd700" font-size="11" text-anchor="middle" font-weight="bold">Cross-Attention: "What in the source sentence should I focus on to generate the next target word?"</text>
                <text x="450" y="390" fill="rgba(255,255,255,0.6)" font-size="9" text-anchor="middle">Decoder asks (Q), Encoder answers (K matches, V provides content)</text>

                <!-- Arrow definitions -->
                <defs>
                    <marker id="arrowYellowCross" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#ffd700"/>
                    </marker>
                    <marker id="arrowRedCross" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#ff6b6b"/>
                    </marker>
                    <marker id="arrowBlueCross" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#4a90d9"/>
                    </marker>
                </defs>
            </svg>
        </div>
    </div>
</div>

<!-- Slide 34g: Residual Connections & Layer Norm -->
<div class="slide" id="slide52g">
    <span class="slide-number">52g</span>
    <h2>Residual Connections & Layer Norm</h2>
    <p>Critical components for training deep transformers</p>
    <div style="display: flex; justify-content: center;">
        <div class="card" style="text-align: center; width: 95%; max-width: 1200px;">
            <svg viewBox="0 0 900 360" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Residual Connection Visualization -->
                <g transform="translate(30, 20)">
                    <text x="150" y="20" fill="white" font-size="14" text-anchor="middle" font-weight="bold">Residual Connection (Skip Connection)</text>

                    <!-- Input -->
                    <rect x="100" y="40" width="100" height="40" rx="6" fill="rgba(74,144,217,0.5)" stroke="#4a90d9" stroke-width="2"/>
                    <text x="150" y="65" fill="white" font-size="11" text-anchor="middle" font-weight="bold">Input x</text>

                    <!-- Main path arrow -->
                    <line x1="150" y1="80" x2="150" y2="115" stroke="#4a90d9" stroke-width="2" marker-end="url(#arrowBlueRes)"/>

                    <!-- Processing block -->
                    <rect x="80" y="120" width="140" height="60" rx="8" fill="rgba(224,64,251,0.4)" stroke="#e040fb" stroke-width="2">
                        <animate attributeName="fill" values="rgba(224,64,251,0.4);rgba(224,64,251,0.6);rgba(224,64,251,0.4)" dur="2s" repeatCount="indefinite"/>
                    </rect>
                    <text x="150" y="145" fill="white" font-size="10" text-anchor="middle" font-weight="bold">Attention or FFN</text>
                    <text x="150" y="160" fill="rgba(255,255,255,0.6)" font-size="9" text-anchor="middle">F(x)</text>

                    <!-- Skip connection (the bypass) -->
                    <path d="M 100 60 L 40 60 L 40 220 L 100 220" fill="none" stroke="#ffd700" stroke-width="3" stroke-dasharray="8,4">
                        <animate attributeName="stroke-dashoffset" values="0;24" dur="1s" repeatCount="indefinite"/>
                    </path>
                    <text x="25" y="145" fill="#ffd700" font-size="9" text-anchor="middle" transform="rotate(-90, 25, 145)">Skip</text>

                    <!-- Output arrow from processing -->
                    <line x1="150" y1="180" x2="150" y2="205" stroke="#e040fb" stroke-width="2"/>

                    <!-- Addition circle -->
                    <circle cx="150" cy="220" r="18" fill="rgba(78,205,196,0.5)" stroke="#4ecdc4" stroke-width="3">
                        <animate attributeName="r" values="18;22;18" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <text x="150" y="226" fill="white" font-size="20" text-anchor="middle" font-weight="bold">+</text>

                    <!-- Output -->
                    <line x1="150" y1="238" x2="150" y2="270" stroke="#4ecdc4" stroke-width="2" marker-end="url(#arrowTealRes)"/>
                    <rect x="80" y="275" width="140" height="40" rx="6" fill="rgba(78,205,196,0.5)" stroke="#4ecdc4" stroke-width="2"/>
                    <text x="150" y="300" fill="white" font-size="11" text-anchor="middle" font-weight="bold">x + F(x)</text>

                    <!-- Formula -->
                    <text x="150" y="340" fill="rgba(255,255,255,0.7)" font-size="10" text-anchor="middle">Output = Input + Transformation</text>
                </g>

                <!-- Why Residuals Matter -->
                <g transform="translate(320, 20)">
                    <text x="130" y="20" fill="#ffd700" font-size="14" text-anchor="middle" font-weight="bold">Why Residual Connections?</text>

                    <rect x="10" y="35" width="240" height="70" rx="6" fill="rgba(255,107,107,0.15)" stroke="#ff6b6b" stroke-width="2"/>
                    <text x="130" y="55" fill="#ff6b6b" font-size="11" text-anchor="middle" font-weight="bold">The Problem: Vanishing Gradients</text>
                    <text x="20" y="75" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="start">In deep networks, gradients shrink</text>
                    <text x="20" y="90" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="start">as they backpropagate → early layers</text>
                    <text x="20" y="105" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="start">don't learn!</text>

                    <rect x="10" y="115" width="240" height="80" rx="6" fill="rgba(81,207,102,0.15)" stroke="#51cf66" stroke-width="2"/>
                    <text x="130" y="135" fill="#51cf66" font-size="11" text-anchor="middle" font-weight="bold">The Solution: Skip Connections</text>
                    <text x="20" y="155" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="start">• Gradients flow directly backward</text>
                    <text x="20" y="170" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="start">• Each layer learns a "delta" (change)</text>
                    <text x="20" y="185" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="start">• Easy to learn identity function</text>

                    <rect x="10" y="205" width="240" height="55" rx="6" fill="rgba(78,205,196,0.15)" stroke="#4ecdc4" stroke-width="2"/>
                    <text x="130" y="225" fill="#4ecdc4" font-size="11" text-anchor="middle" font-weight="bold">Result</text>
                    <text x="20" y="245" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="start">GPT-3: 96 layers deep!</text>
                    <text x="20" y="258" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="start">Without residuals: ~5-6 layers max</text>
                </g>

                <!-- Layer Normalization -->
                <g transform="translate(590, 20)">
                    <text x="140" y="20" fill="#e040fb" font-size="14" text-anchor="middle" font-weight="bold">Layer Normalization</text>

                    <!-- Before normalization -->
                    <text x="140" y="50" fill="rgba(255,255,255,0.6)" font-size="10" text-anchor="middle">Before LayerNorm</text>
                    <rect x="30" y="60" width="220" height="40" rx="4" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                    <!-- Variable activations -->
                    <rect x="40" y="85" width="20" height="12" rx="2" fill="#ff6b6b" transform="rotate(180, 50, 91)"/>
                    <rect x="70" y="75" width="20" height="22" rx="2" fill="#4a90d9"/>
                    <rect x="100" y="95" width="20" height="5" rx="2" fill="#ffd700" transform="rotate(180, 110, 95)"/>
                    <rect x="130" y="68" width="20" height="30" rx="2" fill="#51cf66"/>
                    <rect x="160" y="88" width="20" height="10" rx="2" fill="#e040fb" transform="rotate(180, 170, 93)"/>
                    <rect x="190" y="72" width="20" height="25" rx="2" fill="#4ecdc4"/>
                    <text x="140" y="115" fill="rgba(255,255,255,0.5)" font-size="8" text-anchor="middle">High variance, unstable</text>

                    <!-- Arrow -->
                    <line x1="140" y1="125" x2="140" y2="150" stroke="#e040fb" stroke-width="2" marker-end="url(#arrowPurpleRes)"/>
                    <text x="180" y="142" fill="#e040fb" font-size="9" text-anchor="start">Normalize</text>

                    <!-- After normalization -->
                    <text x="140" y="170" fill="rgba(255,255,255,0.6)" font-size="10" text-anchor="middle">After LayerNorm</text>
                    <rect x="30" y="180" width="220" height="40" rx="4" fill="rgba(81,207,102,0.1)" stroke="#51cf66" stroke-width="1"/>
                    <!-- Normalized activations -->
                    <rect x="40" y="195" width="20" height="15" rx="2" fill="#51cf66"/>
                    <rect x="70" y="192" width="20" height="18" rx="2" fill="#51cf66"/>
                    <rect x="100" y="198" width="20" height="12" rx="2" fill="#51cf66"/>
                    <rect x="130" y="190" width="20" height="20" rx="2" fill="#51cf66"/>
                    <rect x="160" y="196" width="20" height="14" rx="2" fill="#51cf66"/>
                    <rect x="190" y="193" width="20" height="17" rx="2" fill="#51cf66"/>
                    <text x="140" y="235" fill="rgba(255,255,255,0.5)" font-size="8" text-anchor="middle">Mean=0, Var=1 (stable)</text>

                    <!-- Formula -->
                    <rect x="20" y="250" width="240" height="60" rx="6" fill="rgba(224,64,251,0.15)" stroke="#e040fb" stroke-width="1"/>
                    <text x="140" y="275" fill="#e040fb" font-size="10" text-anchor="middle" font-weight="bold">LayerNorm(x) = γ · (x - μ) / σ + β</text>
                    <text x="140" y="295" fill="rgba(255,255,255,0.6)" font-size="8" text-anchor="middle">γ, β are learned scale and shift</text>
                </g>

                <!-- Full transformer block diagram at bottom -->
                <g transform="translate(30, 330)">
                    <rect x="0" y="-10" width="840" height="35" rx="4" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>
                    <text x="30" y="10" fill="white" font-size="10" text-anchor="start" font-weight="bold">Full Block:</text>
                    <text x="100" y="10" fill="#4a90d9" font-size="9" text-anchor="start">x</text>
                    <text x="115" y="10" fill="white" font-size="9" text-anchor="start">→</text>
                    <text x="130" y="10" fill="#e040fb" font-size="9" text-anchor="start">LayerNorm</text>
                    <text x="190" y="10" fill="white" font-size="9" text-anchor="start">→</text>
                    <text x="205" y="10" fill="#ff6b6b" font-size="9" text-anchor="start">Attention</text>
                    <text x="260" y="10" fill="white" font-size="9" text-anchor="start">→</text>
                    <text x="275" y="10" fill="#ffd700" font-size="9" text-anchor="start">+ x (residual)</text>
                    <text x="365" y="10" fill="white" font-size="9" text-anchor="start">→</text>
                    <text x="380" y="10" fill="#e040fb" font-size="9" text-anchor="start">LayerNorm</text>
                    <text x="440" y="10" fill="white" font-size="9" text-anchor="start">→</text>
                    <text x="455" y="10" fill="#51cf66" font-size="9" text-anchor="start">FFN</text>
                    <text x="485" y="10" fill="white" font-size="9" text-anchor="start">→</text>
                    <text x="500" y="10" fill="#ffd700" font-size="9" text-anchor="start">+ x (residual)</text>
                    <text x="590" y="10" fill="white" font-size="9" text-anchor="start">→</text>
                    <text x="605" y="10" fill="#4ecdc4" font-size="9" text-anchor="start">output</text>
                </g>

                <!-- Arrow definitions -->
                <defs>
                    <marker id="arrowBlueRes" markerWidth="8" markerHeight="8" refX="3" refY="7" orient="auto">
                        <path d="M0,0 L6,0 L3,8 z" fill="#4a90d9"/>
                    </marker>
                    <marker id="arrowTealRes" markerWidth="8" markerHeight="8" refX="3" refY="7" orient="auto">
                        <path d="M0,0 L6,0 L3,8 z" fill="#4ecdc4"/>
                    </marker>
                    <marker id="arrowPurpleRes" markerWidth="8" markerHeight="8" refX="3" refY="7" orient="auto">
                        <path d="M0,0 L6,0 L3,8 z" fill="#e040fb"/>
                    </marker>
                </defs>
            </svg>
        </div>
    </div>
</div>

<!-- Slide 52h: Feed-Forward Network in Transformers -->
<div class="slide" id="slide52h">
    <span class="slide-number">52h</span>
    <h2>The Feed-Forward Network (FFN)</h2>
    <p>Where transformers store knowledge and add non-linearity</p>
    <div style="display: flex; justify-content: center;">
        <div class="card" style="text-align: center; width: 95%; max-width: 1300px;">
            <svg viewBox="0 0 1000 420" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- FFN Architecture Visualization -->
                <g transform="translate(20, 15)">
                    <text x="200" y="25" fill="white" font-size="16" text-anchor="middle" font-weight="bold">FFN Architecture</text>

                    <!-- Input from Attention -->
                    <rect x="120" y="45" width="160" height="50" rx="8" fill="rgba(74,144,217,0.5)" stroke="#4a90d9" stroke-width="3">
                        <animate attributeName="opacity" values="0;1;1;1;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.08;0.2;0.4;0.6;1"/>
                    </rect>
                    <text x="200" y="72" fill="white" font-size="13" text-anchor="middle" font-weight="bold">From Attention</text>
                    <text x="200" y="88" fill="rgba(255,255,255,0.7)" font-size="11" text-anchor="middle">dim = 768</text>

                    <!-- Arrow down -->
                    <g opacity="0">
                        <animate attributeName="opacity" values="0;0;1;1;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.1;0.15;0.4;0.6;1"/>
                        <line x1="200" y1="95" x2="200" y2="125" stroke="#4a90d9" stroke-width="3"/>
                        <polygon points="200,135 193,125 207,125" fill="#4a90d9"/>
                    </g>

                    <!-- First Linear Layer (Expansion) -->
                    <g opacity="0">
                        <animate attributeName="opacity" values="0;0;0;1;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.15;0.18;0.25;0.6;1"/>
                        <rect x="80" y="140" width="240" height="55" rx="8" fill="rgba(255,107,107,0.5)" stroke="#ff6b6b" stroke-width="3">
                            <animate attributeName="stroke-width" values="3;5;3" dur="2s" repeatCount="indefinite"/>
                        </rect>
                        <text x="200" y="165" fill="white" font-size="13" text-anchor="middle" font-weight="bold">Linear Layer 1 (W₁)</text>
                        <text x="200" y="185" fill="#ffd700" font-size="12" text-anchor="middle">768 → 3072 (4× expansion!)</text>
                    </g>

                    <!-- Arrow down -->
                    <g opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.25;0.28;0.3;0.35;1"/>
                        <line x1="200" y1="195" x2="200" y2="215" stroke="#ff6b6b" stroke-width="3"/>
                        <polygon points="200,225 193,215 207,215" fill="#ff6b6b"/>
                    </g>

                    <!-- Activation (GELU/ReLU) -->
                    <g opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.3;0.33;0.35;0.38;0.45;1"/>
                        <rect x="100" y="230" width="200" height="50" rx="8" fill="rgba(255,215,0,0.5)" stroke="#ffd700" stroke-width="3">
                            <animate attributeName="fill" values="rgba(255,215,0,0.5);rgba(255,215,0,0.8);rgba(255,215,0,0.5)" dur="1.5s" repeatCount="indefinite"/>
                        </rect>
                        <text x="200" y="255" fill="white" font-size="13" text-anchor="middle" font-weight="bold">GELU Activation</text>
                        <text x="200" y="273" fill="rgba(255,255,255,0.7)" font-size="10" text-anchor="middle">Non-linearity!</text>
                    </g>

                    <!-- Arrow down -->
                    <g opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.45;0.48;0.5;0.52;0.55;0.6;1"/>
                        <line x1="200" y1="280" x2="200" y2="300" stroke="#ffd700" stroke-width="3"/>
                        <polygon points="200,310 193,300 207,300" fill="#ffd700"/>
                    </g>

                    <!-- Second Linear Layer (Projection) -->
                    <g opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;0;0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.55;0.58;0.6;0.62;0.65;0.68;0.75;1"/>
                        <rect x="80" y="315" width="240" height="55" rx="8" fill="rgba(81,207,102,0.5)" stroke="#51cf66" stroke-width="3">
                            <animate attributeName="stroke-width" values="3;5;3" dur="2s" repeatCount="indefinite"/>
                        </rect>
                        <text x="200" y="340" fill="white" font-size="13" text-anchor="middle" font-weight="bold">Linear Layer 2 (W₂)</text>
                        <text x="200" y="360" fill="#ffd700" font-size="12" text-anchor="middle">3072 → 768 (project back)</text>
                    </g>

                    <!-- Output -->
                    <g opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.7;0.73;0.75;0.78;0.8;0.83;0.88;1"/>
                        <line x1="200" y1="370" x2="200" y2="390" stroke="#51cf66" stroke-width="3"/>
                        <polygon points="200,400 193,390 207,390" fill="#51cf66"/>
                        <text x="200" y="415" fill="#51cf66" font-size="12" text-anchor="middle" font-weight="bold">→ Add & Norm → Next Layer</text>
                    </g>

                    <!-- Formula box -->
                    <rect x="50" y="50" width="10" height="320" rx="3" fill="rgba(224,64,251,0.3)" stroke="#e040fb" stroke-width="2" stroke-dasharray="5,3"/>
                    <text x="40" y="210" fill="#e040fb" font-size="11" text-anchor="middle" transform="rotate(-90, 40, 210)">FFN(x) = W₂ · GELU(W₁ · x + b₁) + b₂</text>
                </g>

                <!-- Why FFN? - The Purpose -->
                <g transform="translate(430, 15)">
                    <text x="140" y="25" fill="#ffd700" font-size="16" text-anchor="middle" font-weight="bold">Why Do We Need FFN?</text>

                    <!-- Problem box -->
                    <rect x="0" y="40" width="280" height="85" rx="8" fill="rgba(255,107,107,0.15)" stroke="#ff6b6b" stroke-width="2"/>
                    <text x="140" y="62" fill="#ff6b6b" font-size="13" text-anchor="middle" font-weight="bold">The Problem with Attention Alone</text>
                    <text x="15" y="82" fill="rgba(255,255,255,0.85)" font-size="11" text-anchor="start">• Attention only does weighted averaging</text>
                    <text x="15" y="98" fill="rgba(255,255,255,0.85)" font-size="11" text-anchor="start">• It's a linear operation - can't learn</text>
                    <text x="15" y="114" fill="rgba(255,255,255,0.85)" font-size="11" text-anchor="start">  complex non-linear patterns!</text>

                    <!-- Solution box -->
                    <rect x="0" y="135" width="280" height="115" rx="8" fill="rgba(81,207,102,0.15)" stroke="#51cf66" stroke-width="2"/>
                    <text x="140" y="157" fill="#51cf66" font-size="13" text-anchor="middle" font-weight="bold">FFN Adds Critical Capabilities</text>
                    <text x="15" y="177" fill="rgba(255,255,255,0.85)" font-size="11" text-anchor="start">✓ Non-linearity (GELU activation)</text>
                    <text x="15" y="195" fill="rgba(255,255,255,0.85)" font-size="11" text-anchor="start">✓ Per-position processing</text>
                    <text x="15" y="213" fill="rgba(255,255,255,0.85)" font-size="11" text-anchor="start">✓ 4× expansion = more capacity</text>
                    <text x="15" y="231" fill="rgba(255,255,255,0.85)" font-size="11" text-anchor="start">✓ Where facts & knowledge live!</text>

                    <!-- Knowledge Storage highlight -->
                    <rect x="0" y="260" width="280" height="75" rx="8" fill="rgba(255,215,0,0.15)" stroke="#ffd700" stroke-width="2">
                        <animate attributeName="stroke-width" values="2;4;2" dur="3s" repeatCount="indefinite"/>
                    </rect>
                    <text x="140" y="282" fill="#ffd700" font-size="13" text-anchor="middle" font-weight="bold">🧠 FFN = The Model's Memory</text>
                    <text x="15" y="302" fill="rgba(255,255,255,0.85)" font-size="11" text-anchor="start">Research shows FFN layers store:</text>
                    <text x="15" y="318" fill="rgba(255,255,255,0.85)" font-size="11" text-anchor="start">• Facts ("Paris is capital of France")</text>
                    <text x="15" y="334" fill="rgba(255,255,255,0.85)" font-size="11" text-anchor="start">• Patterns, syntax, relationships</text>

                    <!-- Analogy -->
                    <rect x="0" y="345" width="280" height="60" rx="8" fill="rgba(78,205,196,0.15)" stroke="#4ecdc4" stroke-width="2"/>
                    <text x="140" y="367" fill="#4ecdc4" font-size="12" text-anchor="middle" font-weight="bold">Simple Analogy</text>
                    <text x="15" y="387" fill="rgba(255,255,255,0.85)" font-size="11" text-anchor="start">Attention = "Who should I listen to?"</text>
                    <text x="15" y="403" fill="rgba(255,255,255,0.85)" font-size="11" text-anchor="start">FFN = "What do I know about this?"</text>
                </g>

                <!-- Concrete Example -->
                <g transform="translate(730, 15)">
                    <text x="130" y="25" fill="#e040fb" font-size="16" text-anchor="middle" font-weight="bold">Example in Action</text>

                    <rect x="0" y="40" width="260" height="365" rx="8" fill="rgba(224,64,251,0.1)" stroke="#e040fb" stroke-width="2"/>

                    <!-- Input sentence -->
                    <text x="130" y="65" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Input: "The capital of France is ___"</text>

                    <!-- Step 1: Attention -->
                    <rect x="15" y="80" width="230" height="70" rx="6" fill="rgba(74,144,217,0.2)" stroke="#4a90d9" stroke-width="2">
                        <animate attributeName="opacity" values="0.5;1;0.5" dur="4s" repeatCount="indefinite"/>
                    </rect>
                    <text x="130" y="100" fill="#4a90d9" font-size="11" text-anchor="middle" font-weight="bold">Step 1: Attention</text>
                    <text x="25" y="118" fill="rgba(255,255,255,0.8)" font-size="10" text-anchor="start">"capital" attends to "France"</text>
                    <text x="25" y="133" fill="rgba(255,255,255,0.8)" font-size="10" text-anchor="start">→ Gathers context: this is about</text>
                    <text x="25" y="148" fill="rgba(255,255,255,0.8)" font-size="10" text-anchor="start">   France's capital city</text>

                    <!-- Arrow -->
                    <line x1="130" y1="155" x2="130" y2="175" stroke="white" stroke-width="2"/>
                    <polygon points="130,180 125,172 135,172" fill="white"/>

                    <!-- Step 2: FFN -->
                    <rect x="15" y="185" width="230" height="85" rx="6" fill="rgba(255,215,0,0.2)" stroke="#ffd700" stroke-width="2">
                        <animate attributeName="opacity" values="0.5;1;0.5" dur="4s" repeatCount="indefinite" begin="2s"/>
                    </rect>
                    <text x="130" y="205" fill="#ffd700" font-size="11" text-anchor="middle" font-weight="bold">Step 2: FFN (Knowledge Lookup)</text>
                    <text x="25" y="223" fill="rgba(255,255,255,0.8)" font-size="10" text-anchor="start">FFN neurons activate for:</text>
                    <text x="25" y="238" fill="rgba(255,255,255,0.8)" font-size="10" text-anchor="start">• "France + capital" → "Paris"</text>
                    <text x="25" y="253" fill="rgba(255,255,255,0.8)" font-size="10" text-anchor="start">→ Retrieves stored fact from</text>
                    <text x="25" y="268" fill="rgba(255,255,255,0.8)" font-size="10" text-anchor="start">   training data!</text>

                    <!-- Arrow -->
                    <line x1="130" y1="275" x2="130" y2="295" stroke="white" stroke-width="2"/>
                    <polygon points="130,300 125,292 135,292" fill="white"/>

                    <!-- Output -->
                    <rect x="15" y="305" width="230" height="50" rx="6" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="3">
                        <animate attributeName="stroke-width" values="3;5;3" dur="2s" repeatCount="indefinite"/>
                    </rect>
                    <text x="130" y="325" fill="#51cf66" font-size="11" text-anchor="middle" font-weight="bold">Output Prediction</text>
                    <text x="130" y="345" fill="white" font-size="14" text-anchor="middle" font-weight="bold">"Paris"</text>

                    <!-- Key insight -->
                    <text x="130" y="380" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="middle" font-style="italic">Attention finds what's relevant;</text>
                    <text x="130" y="393" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="middle" font-style="italic">FFN knows the answer!</text>
                </g>
            </svg>
        </div>
    </div>
</div>

<!-- Slide 35: Transformers -->
<div class="slide" id="slide53">
    <span class="slide-number">53</span>
    <h2>The Transformer Architecture</h2>
    <p>"Attention Is All You Need" (2017) - The paper that changed everything</p>
    <div class="two-column">
        <div class="card">
            <h4>Key Innovations</h4>
            <ul>
                <li>Self-attention (each word attends to all others)</li>
                <li>Parallel processing (not sequential)</li>
                <li>Positional encoding (knows word order)</li>
                <li>Multi-head attention (multiple perspectives)</li>
            </ul>
        </div>
        <div class="card">
            <h4>Why It Matters</h4>
            <ul>
                <li>Handles long sequences</li>
                <li>Trains much faster</li>
                <li>Captures complex relationships</li>
                <li>Foundation of ALL modern LLMs</li>
            </ul>
        </div>
    </div>
</div>

<!-- Slide 35b: Positional Encoding -->
<div class="slide" id="slide53b">
    <span class="slide-number">53b</span>
    <h2>Positional Encoding</h2>
    <p>How transformers know word order without recurrence</p>
    <div style="display: flex; justify-content: center;">
        <div class="card" style="text-align: center; width: 95%; max-width: 1200px;">
            <svg viewBox="0 0 800 400" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Left side: Token + PE animation -->
                <g transform="translate(20, 0)">
                    <!-- Title -->
                    <text x="200" y="30" fill="white" font-size="16" text-anchor="middle" font-weight="bold">Input: "The cat sat"</text>

                    <!-- Token Embeddings label -->
                    <text x="100" y="60" fill="#c5d45a" font-size="14" text-anchor="middle" font-weight="bold">Token Embeddings</text>

                    <!-- "The" token -->
                    <rect x="30" y="75" width="140" height="55" rx="6" fill="rgba(74,144,217,0.6)" stroke="#4a90d9" stroke-width="3">
                        <animate attributeName="opacity" values="0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.1;1"/>
                    </rect>
                    <text x="100" y="108" fill="white" font-size="18" text-anchor="middle" font-weight="bold">"The"</text>
                    <text x="100" y="125" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">pos=0</text>

                    <!-- "cat" token -->
                    <rect x="180" y="75" width="140" height="55" rx="6" fill="rgba(81,207,102,0.6)" stroke="#51cf66" stroke-width="3">
                        <animate attributeName="opacity" values="0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.1;0.2;1"/>
                    </rect>
                    <text x="250" y="108" fill="white" font-size="18" text-anchor="middle" font-weight="bold">"cat"</text>
                    <text x="250" y="125" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">pos=1</text>

                    <!-- "sat" token -->
                    <rect x="330" y="75" width="140" height="55" rx="6" fill="rgba(255,107,107,0.6)" stroke="#ff6b6b" stroke-width="3">
                        <animate attributeName="opacity" values="0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.15;0.25;0.3;1"/>
                    </rect>
                    <text x="400" y="108" fill="white" font-size="18" text-anchor="middle" font-weight="bold">"sat"</text>
                    <text x="400" y="125" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">pos=2</text>

                    <!-- Plus signs -->
                    <text x="100" y="155" fill="#ffd700" font-size="28" text-anchor="middle" opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.3;0.35;0.4;0.45;1"/>+</text>
                    <text x="250" y="155" fill="#ffd700" font-size="28" text-anchor="middle" opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.3;0.35;0.4;0.45;1"/>+</text>
                    <text x="400" y="155" fill="#ffd700" font-size="28" text-anchor="middle" opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.3;0.35;0.4;0.45;1"/>+</text>

                    <!-- Positional Encoding label -->
                    <text x="100" y="180" fill="#ffd700" font-size="14" text-anchor="middle" font-weight="bold" opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.3;0.35;0.4;0.45;1"/>Positional Encoding</text>

                    <!-- PE boxes with sine waves -->
                    <!-- PE(0) -->
                    <g opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.35;0.4;0.45;0.5;0.55;1"/>
                        <rect x="30" y="190" width="140" height="55" rx="6" fill="rgba(255,215,0,0.3)" stroke="#ffd700" stroke-width="3"/>
                        <path d="M 40 217 Q 65 195, 100 217 Q 135 239, 160 217" fill="none" stroke="#ffd700" stroke-width="3">
                            <animate attributeName="d" values="M 40 217 Q 65 195, 100 217 Q 135 239, 160 217;M 40 217 Q 65 239, 100 217 Q 135 195, 160 217;M 40 217 Q 65 195, 100 217 Q 135 239, 160 217" dur="2s" repeatCount="indefinite"/>
                        </path>
                        <text x="100" y="238" fill="rgba(255,255,255,0.8)" font-size="11" text-anchor="middle">PE(0)</text>
                    </g>

                    <!-- PE(1) -->
                    <g opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.4;0.45;0.5;0.55;0.58;0.62;1"/>
                        <rect x="180" y="190" width="140" height="55" rx="6" fill="rgba(255,215,0,0.3)" stroke="#ffd700" stroke-width="3"/>
                        <path d="M 190 217 Q 210 200, 230 220 Q 260 240, 290 210 Q 305 195, 310 217" fill="none" stroke="#ffd700" stroke-width="3">
                            <animate attributeName="d" values="M 190 217 Q 210 200, 230 220 Q 260 240, 290 210 Q 305 195, 310 217;M 190 217 Q 210 234, 230 214 Q 260 194, 290 224 Q 305 238, 310 217;M 190 217 Q 210 200, 230 220 Q 260 240, 290 210 Q 305 195, 310 217" dur="2.5s" repeatCount="indefinite"/>
                        </path>
                        <text x="250" y="238" fill="rgba(255,255,255,0.8)" font-size="11" text-anchor="middle">PE(1)</text>
                    </g>

                    <!-- PE(2) -->
                    <g opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.45;0.5;0.55;0.6;0.63;0.66;0.7;1"/>
                        <rect x="330" y="190" width="140" height="55" rx="6" fill="rgba(255,215,0,0.3)" stroke="#ffd700" stroke-width="3"/>
                        <path d="M 340 217 Q 365 190, 400 220 Q 425 245, 460 200" fill="none" stroke="#ffd700" stroke-width="3">
                            <animate attributeName="d" values="M 340 217 Q 365 190, 400 220 Q 425 245, 460 200;M 340 217 Q 365 244, 400 214 Q 425 189, 460 234;M 340 217 Q 365 190, 400 220 Q 425 245, 460 200" dur="3s" repeatCount="indefinite"/>
                        </path>
                        <text x="400" y="238" fill="rgba(255,255,255,0.8)" font-size="11" text-anchor="middle">PE(2)</text>
                    </g>

                    <!-- Equals signs -->
                    <text x="100" y="270" fill="#ffd700" font-size="24" text-anchor="middle" opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.6;0.63;0.66;0.7;0.73;0.76;0.78;0.8;1"/>=</text>
                    <text x="250" y="270" fill="#ffd700" font-size="24" text-anchor="middle" opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.6;0.63;0.66;0.7;0.73;0.76;0.78;0.8;1"/>=</text>
                    <text x="400" y="270" fill="#ffd700" font-size="24" text-anchor="middle" opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.6;0.63;0.66;0.7;0.73;0.76;0.78;0.8;1"/>=</text>

                    <!-- Position-Aware Embeddings label -->
                    <text x="250" y="295" fill="#4ecdc4" font-size="14" text-anchor="middle" font-weight="bold" opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.7;0.73;0.76;0.78;0.8;0.82;0.84;0.88;1"/>Position-Aware Embeddings</text>

                    <!-- Final combined embeddings -->
                    <g opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.7;0.73;0.76;0.78;0.8;0.82;0.84;0.88;0.92;1"/>

                        <rect x="30" y="305" width="140" height="55" rx="6" fill="rgba(74,144,217,0.4)" stroke="#4ecdc4" stroke-width="3">
                            <animate attributeName="fill" values="rgba(74,144,217,0.4);rgba(74,144,217,0.6);rgba(74,144,217,0.4)" dur="2s" repeatCount="indefinite"/>
                        </rect>
                        <text x="100" y="338" fill="white" font-size="16" text-anchor="middle" font-weight="bold">"The" @ 0</text>

                        <rect x="180" y="305" width="140" height="55" rx="6" fill="rgba(81,207,102,0.4)" stroke="#4ecdc4" stroke-width="3">
                            <animate attributeName="fill" values="rgba(81,207,102,0.4);rgba(81,207,102,0.6);rgba(81,207,102,0.4)" dur="2s" begin="0.3s" repeatCount="indefinite"/>
                        </rect>
                        <text x="250" y="338" fill="white" font-size="16" text-anchor="middle" font-weight="bold">"cat" @ 1</text>

                        <rect x="330" y="305" width="140" height="55" rx="6" fill="rgba(255,107,107,0.4)" stroke="#4ecdc4" stroke-width="3">
                            <animate attributeName="fill" values="rgba(255,107,107,0.4);rgba(255,107,107,0.6);rgba(255,107,107,0.4)" dur="2s" begin="0.6s" repeatCount="indefinite"/>
                        </rect>
                        <text x="400" y="338" fill="white" font-size="16" text-anchor="middle" font-weight="bold">"sat" @ 2</text>
                    </g>

                    <!-- Arrow to transformer -->
                    <g opacity="0">
                        <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;0;0;1;1" dur="6s" repeatCount="indefinite" keyTimes="0;0.75;0.78;0.8;0.82;0.84;0.86;0.88;0.9;0.92;0.95;1"/>
                        <line x1="250" y1="365" x2="250" y2="390" stroke="#4ecdc4" stroke-width="3" marker-end="url(#arrowTealLg)"/>
                        <text x="300" y="385" fill="#4ecdc4" font-size="14" text-anchor="start">→ To Transformer</text>
                    </g>
                </g>

                <!-- Right side: Formula and heatmap -->
                <g transform="translate(530, 30)">
                    <text x="120" y="20" fill="white" font-size="16" text-anchor="middle" font-weight="bold">Sinusoidal Formula</text>
                    <text x="120" y="50" fill="#ffd700" font-size="13" text-anchor="middle">PE(pos, 2i) = sin(pos/10000^(2i/d))</text>
                    <text x="120" y="75" fill="#ffd700" font-size="13" text-anchor="middle">PE(pos, 2i+1) = cos(pos/10000^(2i/d))</text>

                    <text x="120" y="115" fill="rgba(255,255,255,0.8)" font-size="14" text-anchor="middle">PE Heatmap (positions × dims)</text>

                    <!-- Heatmap -->
                    <g transform="translate(20, 130)">
                        <text x="-10" y="15" fill="rgba(255,255,255,0.6)" font-size="10" text-anchor="end">pos</text>

                        <!-- Row 0 -->
                        <text x="-10" y="35" fill="rgba(255,255,255,0.6)" font-size="10" text-anchor="end">0</text>
                        <rect x="0" y="22" width="25" height="18" fill="#ff6b6b"><animate attributeName="opacity" values="0.3;1;0.3" dur="3s" repeatCount="indefinite"/></rect>
                        <rect x="28" y="22" width="25" height="18" fill="#ffd700"/>
                        <rect x="56" y="22" width="25" height="18" fill="#51cf66"/>
                        <rect x="84" y="22" width="25" height="18" fill="#4a90d9"/>
                        <rect x="112" y="22" width="25" height="18" fill="#e040fb"/>
                        <rect x="140" y="22" width="25" height="18" fill="#00d4ff"/>
                        <rect x="168" y="22" width="25" height="18" fill="#ff9f43"/>

                        <!-- Row 1 -->
                        <text x="-10" y="58" fill="rgba(255,255,255,0.6)" font-size="10" text-anchor="end">1</text>
                        <rect x="0" y="45" width="25" height="18" fill="#ffd700"/>
                        <rect x="28" y="45" width="25" height="18" fill="#51cf66"><animate attributeName="opacity" values="0.3;1;0.3" dur="3s" begin="0.5s" repeatCount="indefinite"/></rect>
                        <rect x="56" y="45" width="25" height="18" fill="#4a90d9"/>
                        <rect x="84" y="45" width="25" height="18" fill="#e040fb"/>
                        <rect x="112" y="45" width="25" height="18" fill="#00d4ff"/>
                        <rect x="140" y="45" width="25" height="18" fill="#ff6b6b"/>
                        <rect x="168" y="45" width="25" height="18" fill="#c5d45a"/>

                        <!-- Row 2 -->
                        <text x="-10" y="81" fill="rgba(255,255,255,0.6)" font-size="10" text-anchor="end">2</text>
                        <rect x="0" y="68" width="25" height="18" fill="#51cf66"/>
                        <rect x="28" y="68" width="25" height="18" fill="#4a90d9"/>
                        <rect x="56" y="68" width="25" height="18" fill="#e040fb"><animate attributeName="opacity" values="0.3;1;0.3" dur="3s" begin="1s" repeatCount="indefinite"/></rect>
                        <rect x="84" y="68" width="25" height="18" fill="#00d4ff"/>
                        <rect x="112" y="68" width="25" height="18" fill="#ff6b6b"/>
                        <rect x="140" y="68" width="25" height="18" fill="#ffd700"/>
                        <rect x="168" y="68" width="25" height="18" fill="#4ecdc4"/>

                        <!-- Row 3 -->
                        <text x="-10" y="104" fill="rgba(255,255,255,0.6)" font-size="10" text-anchor="end">3</text>
                        <rect x="0" y="91" width="25" height="18" fill="#4a90d9"/>
                        <rect x="28" y="91" width="25" height="18" fill="#e040fb"/>
                        <rect x="56" y="91" width="25" height="18" fill="#00d4ff"/>
                        <rect x="84" y="91" width="25" height="18" fill="#ff6b6b"><animate attributeName="opacity" values="0.3;1;0.3" dur="3s" begin="1.5s" repeatCount="indefinite"/></rect>
                        <rect x="112" y="91" width="25" height="18" fill="#ffd700"/>
                        <rect x="140" y="91" width="25" height="18" fill="#51cf66"/>
                        <rect x="168" y="91" width="25" height="18" fill="#ff9f43"/>

                        <text x="95" y="125" fill="rgba(255,255,255,0.6)" font-size="10" text-anchor="middle">dimensions →</text>
                    </g>

                    <text x="120" y="280" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">Each position gets a</text>
                    <text x="120" y="298" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">unique encoding pattern</text>

                    <!-- Why PE needed -->
                    <rect x="10" y="315" width="220" height="70" rx="6" fill="rgba(78,205,196,0.2)" stroke="#4ecdc4" stroke-width="2"/>
                    <text x="120" y="338" fill="#4ecdc4" font-size="12" text-anchor="middle" font-weight="bold">Without PE:</text>
                    <text x="120" y="358" fill="rgba(255,255,255,0.8)" font-size="11" text-anchor="middle">"cat sat" = "sat cat"</text>
                    <text x="120" y="375" fill="rgba(255,255,255,0.6)" font-size="10" text-anchor="middle">(Same attention weights!)</text>
                </g>

                <!-- Gradient definitions -->
                <defs>
                    <marker id="arrowTealLg" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#4ecdc4"/>
                    </marker>
                </defs>
            </svg>
        </div>
    </div>
</div>

<!-- Slide 36: LLM Overview -->
<div class="slide" id="slide54">
    <span class="slide-number">54</span>
    <h2>Module 9: What are LLMs?</h2>
    <p>Large Language Models are transformers trained on massive text data</p>
    <div class="two-column">
        <div class="card">
            <h4>The Scale</h4>
            <ul>
                <li>GPT-3: 175 billion parameters</li>
                <li>GPT-4: ~1.7 trillion parameters</li>
                <li>Training data: trillions of words</li>
                <li>Training cost: millions of dollars</li>
            </ul>
        </div>
        <div class="card">
            <h4>How They Work</h4>
            <ul>
                <li>Predict the next token</li>
                <li>Learn patterns from text</li>
                <li>Emergent capabilities at scale</li>
                <li>In-context learning</li>
            </ul>
        </div>
    </div>
</div>

<!-- Slide 37: Using LLM APIs -->
<div class="slide" id="slide55">
    <span class="slide-number">55</span>
    <h2>Using LLM APIs</h2>
    <div class="code-table">
        <div class="code-table-header">Python: OpenAI API</div>
        <div class="code-table-content">
            <code>from openai import OpenAI

client = OpenAI(api_key="your-key")

response = client.chat.completions.create(
    model="gpt-4",
    messages=[
        {"role": "system", "content": "You are a helpful assistant."},
        {"role": "user", "content": "Explain neural networks simply."}
    ],
    temperature=0.7,  # Creativity (0=deterministic, 1=creative)
    max_tokens=150    # Response length limit
)

print(response.choices[0].message.content)</code>
        </div>
    </div>
</div>

<!-- Slide 38: Prompt Engineering Basics -->
<div class="slide" id="slide56">
    <span class="slide-number">56</span>
    <h2>Prompt Engineering Basics</h2>
    <p>How you ask matters as much as what you ask</p>
    <div class="two-column">
        <div class="card">
            <h4>Bad Prompt</h4>
            <p style="font-style: italic; font-size: 0.9em;">"Summarize this"</p>
            <p style="font-size: 0.9em;">Vague, no context, unclear format</p>
        </div>
        <div class="card">
            <h4>Good Prompt</h4>
            <p style="font-style: italic; font-size: 0.9em;">"Summarize the following article in 3 bullet points, focusing on key findings for a technical audience:"</p>
            <p style="font-size: 0.9em;">Specific format, clear audience, defined scope</p>
        </div>
    </div>
    <div class="highlight" style="margin-top: 20px;">
        <h4>Prompt Engineering Tips</h4>
        <ul style="font-size: 0.95em;">
            <li>Be specific about format and length</li>
            <li>Provide context and examples</li>
            <li>Use system prompts to set behavior</li>
            <li>Break complex tasks into steps</li>
        </ul>
    </div>
</div>

<!-- Slide 39: RAG Overview -->
<div class="slide" id="slide57">
    <span class="slide-number">57</span>
    <h2>Retrieval-Augmented Generation (RAG)</h2>
    <p>Giving LLMs access to external knowledge</p>
    <div class="two-column">
        <div class="card">
            <h4>The Problem with LLMs</h4>
            <ul>
                <li><strong>Knowledge cutoff:</strong> Training data has a date limit</li>
                <li><strong>Hallucinations:</strong> LLMs can make up facts</li>
                <li><strong>No private data:</strong> Can't access your documents</li>
                <li><strong>Generic answers:</strong> No domain-specific knowledge</li>
            </ul>
        </div>
        <div class="card">
            <h4>RAG Solution</h4>
            <ul>
                <li><strong>Retrieve:</strong> Find relevant documents</li>
                <li><strong>Augment:</strong> Add context to the prompt</li>
                <li><strong>Generate:</strong> LLM answers with evidence</li>
                <li><strong>Result:</strong> Accurate, grounded responses</li>
            </ul>
        </div>
    </div>
    <div class="highlight" style="margin-top: 20px;">
        <p><strong>Key Insight:</strong> Instead of fine-tuning an LLM on your data, RAG retrieves relevant information at query time and includes it in the prompt.</p>
    </div>
</div>

<!-- Slide 40: RAG Architecture -->
<div class="slide" id="slide58">
    <span class="slide-number">58</span>
    <h2>RAG Architecture</h2>
    <p>How retrieval-augmented generation works</p>
    <div style="display: flex; justify-content: center;">
        <div class="card" style="text-align: center; width: 95%; max-width: 1200px;">
            <svg viewBox="0 0 850 380" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- User Query -->
                <g>
                    <rect x="20" y="160" width="120" height="60" rx="8" fill="rgba(74,144,217,0.6)" stroke="#4a90d9" stroke-width="3">
                        <animate attributeName="opacity" values="0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.05;1"/>
                    </rect>
                    <text x="80" y="185" fill="white" font-size="12" text-anchor="middle" font-weight="bold">User Query</text>
                    <text x="80" y="205" fill="rgba(255,255,255,0.7)" font-size="10" text-anchor="middle">"What is X?"</text>
                </g>

                <!-- Arrow from Query to Embedding -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.08;0.12;1"/>
                    <line x1="140" y1="190" x2="180" y2="190" stroke="#4a90d9" stroke-width="3" marker-end="url(#arrowBlue)"/>
                </g>

                <!-- Query Embedding -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.1;0.15;0.2;1"/>
                    <rect x="185" y="160" width="100" height="60" rx="8" fill="rgba(255,215,0,0.5)" stroke="#ffd700" stroke-width="3"/>
                    <text x="235" y="185" fill="white" font-size="11" text-anchor="middle" font-weight="bold">Embed</text>
                    <text x="235" y="200" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="middle">Query → Vector</text>
                </g>

                <!-- Arrow to Vector DB -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.18;0.2;0.22;0.27;1"/>
                    <line x1="285" y1="190" x2="325" y2="190" stroke="#ffd700" stroke-width="3" marker-end="url(#arrowYellow)"/>
                </g>

                <!-- Vector Database -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.22;0.25;0.28;0.3;0.35;1"/>
                    <rect x="330" y="130" width="140" height="120" rx="8" fill="rgba(81,207,102,0.4)" stroke="#51cf66" stroke-width="3"/>
                    <text x="400" y="155" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Vector Database</text>
                    <!-- Mini vectors -->
                    <rect x="345" y="165" width="50" height="20" rx="4" fill="rgba(255,255,255,0.2)" stroke="rgba(255,255,255,0.4)" stroke-width="1">
                        <animate attributeName="fill" values="rgba(255,255,255,0.2);rgba(81,207,102,0.6);rgba(255,255,255,0.2)" dur="1.5s" begin="2.8s" repeatCount="indefinite"/>
                    </rect>
                    <rect x="345" y="190" width="50" height="20" rx="4" fill="rgba(255,255,255,0.2)" stroke="rgba(255,255,255,0.4)" stroke-width="1"/>
                    <rect x="345" y="215" width="50" height="20" rx="4" fill="rgba(255,255,255,0.2)" stroke="rgba(255,255,255,0.4)" stroke-width="1">
                        <animate attributeName="fill" values="rgba(255,255,255,0.2);rgba(81,207,102,0.6);rgba(255,255,255,0.2)" dur="1.5s" begin="3s" repeatCount="indefinite"/>
                    </rect>
                    <rect x="405" y="165" width="50" height="20" rx="4" fill="rgba(255,255,255,0.2)" stroke="rgba(255,255,255,0.4)" stroke-width="1"/>
                    <rect x="405" y="190" width="50" height="20" rx="4" fill="rgba(255,255,255,0.2)" stroke="rgba(255,255,255,0.4)" stroke-width="1">
                        <animate attributeName="fill" values="rgba(255,255,255,0.2);rgba(81,207,102,0.6);rgba(255,255,255,0.2)" dur="1.5s" begin="3.2s" repeatCount="indefinite"/>
                    </rect>
                    <rect x="405" y="215" width="50" height="20" rx="4" fill="rgba(255,255,255,0.2)" stroke="rgba(255,255,255,0.4)" stroke-width="1"/>
                    <text x="400" y="248" fill="rgba(255,255,255,0.6)" font-size="9" text-anchor="middle">Similarity Search</text>
                </g>

                <!-- Arrow from Vector DB to Retrieved Docs -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.35;0.38;0.4;0.42;0.45;0.5;1"/>
                    <line x1="470" y1="190" x2="505" y2="190" stroke="#51cf66" stroke-width="3" marker-end="url(#arrowGreen)"/>
                </g>

                <!-- Retrieved Documents -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.42;0.45;0.48;0.5;0.52;0.55;0.6;1"/>
                    <rect x="510" y="140" width="130" height="100" rx="8" fill="rgba(255,107,107,0.4)" stroke="#ff6b6b" stroke-width="3"/>
                    <text x="575" y="165" fill="white" font-size="11" text-anchor="middle" font-weight="bold">Retrieved Docs</text>
                    <!-- Doc icons -->
                    <rect x="525" y="175" width="45" height="55" rx="4" fill="rgba(255,255,255,0.15)" stroke="rgba(255,255,255,0.4)" stroke-width="1"/>
                    <line x1="532" y1="188" x2="563" y2="188" stroke="rgba(255,255,255,0.5)" stroke-width="2"/>
                    <line x1="532" y1="198" x2="558" y2="198" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
                    <line x1="532" y1="208" x2="560" y2="208" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
                    <rect x="580" y="175" width="45" height="55" rx="4" fill="rgba(255,255,255,0.15)" stroke="rgba(255,255,255,0.4)" stroke-width="1"/>
                    <line x1="587" y1="188" x2="618" y2="188" stroke="rgba(255,255,255,0.5)" stroke-width="2"/>
                    <line x1="587" y1="198" x2="613" y2="198" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
                    <line x1="587" y1="208" x2="615" y2="208" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
                </g>

                <!-- Arrow to LLM -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.55;0.58;0.6;0.62;0.64;0.66;0.68;0.72;1"/>
                    <line x1="640" y1="190" x2="675" y2="190" stroke="#ff6b6b" stroke-width="3" marker-end="url(#arrowRed)"/>
                </g>

                <!-- LLM -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.62;0.65;0.68;0.7;0.72;0.74;0.76;0.78;0.82;1"/>
                    <rect x="680" y="150" width="130" height="80" rx="8" fill="rgba(224,64,251,0.5)" stroke="#e040fb" stroke-width="3">
                        <animate attributeName="fill" values="rgba(224,64,251,0.5);rgba(224,64,251,0.7);rgba(224,64,251,0.5)" dur="2s" begin="6s" repeatCount="indefinite"/>
                    </rect>
                    <text x="745" y="180" fill="white" font-size="14" text-anchor="middle" font-weight="bold">LLM</text>
                    <text x="745" y="200" fill="rgba(255,255,255,0.7)" font-size="10" text-anchor="middle">Query + Context</text>
                    <text x="745" y="215" fill="rgba(255,255,255,0.6)" font-size="9" text-anchor="middle">→ Answer</text>
                </g>

                <!-- Final Response Arrow -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;0;0;1;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.75;0.78;0.8;0.82;0.84;0.86;0.88;0.9;0.92;0.95;1"/>
                    <line x1="745" y1="230" x2="745" y2="280" stroke="#e040fb" stroke-width="3" marker-end="url(#arrowPurple)"/>
                </g>

                <!-- Response Box -->
                <g opacity="0">
                    <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;0;0;0;1" dur="8s" repeatCount="indefinite" keyTimes="0;0.8;0.82;0.84;0.86;0.88;0.9;0.92;0.94;0.95;0.97;1"/>
                    <rect x="660" y="290" width="170" height="60" rx="8" fill="rgba(78,205,196,0.5)" stroke="#4ecdc4" stroke-width="3"/>
                    <text x="745" y="315" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Grounded Response</text>
                    <text x="745" y="335" fill="rgba(255,255,255,0.7)" font-size="10" text-anchor="middle">With citations!</text>
                </g>

                <!-- Labels at top -->
                <text x="80" y="30" fill="#4a90d9" font-size="11" text-anchor="middle" font-weight="bold">1. Query</text>
                <text x="235" y="30" fill="#ffd700" font-size="11" text-anchor="middle" font-weight="bold">2. Embed</text>
                <text x="400" y="30" fill="#51cf66" font-size="11" text-anchor="middle" font-weight="bold">3. Search</text>
                <text x="575" y="30" fill="#ff6b6b" font-size="11" text-anchor="middle" font-weight="bold">4. Retrieve</text>
                <text x="745" y="30" fill="#e040fb" font-size="11" text-anchor="middle" font-weight="bold">5. Generate</text>

                <!-- Document Store (bottom) -->
                <g opacity="0.8">
                    <rect x="280" y="290" width="280" height="70" rx="8" fill="rgba(81,207,102,0.2)" stroke="#51cf66" stroke-width="2" stroke-dasharray="5,5"/>
                    <text x="420" y="315" fill="#51cf66" font-size="11" text-anchor="middle" font-weight="bold">Document Store (Pre-indexed)</text>
                    <text x="420" y="335" fill="rgba(255,255,255,0.6)" font-size="10" text-anchor="middle">PDFs, web pages, databases, internal docs...</text>
                    <text x="420" y="350" fill="rgba(255,255,255,0.5)" font-size="9" text-anchor="middle">Split into chunks → Embedded → Stored as vectors</text>
                </g>

                <!-- Arrow definitions -->
                <defs>
                    <marker id="arrowBlue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#4a90d9"/>
                    </marker>
                    <marker id="arrowYellow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#ffd700"/>
                    </marker>
                    <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#51cf66"/>
                    </marker>
                    <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#ff6b6b"/>
                    </marker>
                    <marker id="arrowPurple" markerWidth="10" markerHeight="10" refX="3" refY="9" orient="auto">
                        <path d="M0,0 L6,0 L3,9 z" fill="#e040fb"/>
                    </marker>
                </defs>
            </svg>
        </div>
    </div>
</div>

<!-- Slide 41: Vector Embeddings -->
<div class="slide" id="slide59">
    <span class="slide-number">59</span>
    <h2>Vector Embeddings</h2>
    <p>Converting text to numbers that capture meaning</p>
    <div style="display: flex; justify-content: center;">
        <div class="card" style="text-align: center; width: 95%; max-width: 1100px;">
            <svg viewBox="0 0 750 320" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Text inputs -->
                <g>
                    <text x="100" y="30" fill="white" font-size="14" text-anchor="middle" font-weight="bold">Text</text>

                    <rect x="20" y="50" width="160" height="40" rx="6" fill="rgba(74,144,217,0.5)" stroke="#4a90d9" stroke-width="2"/>
                    <text x="100" y="75" fill="white" font-size="12" text-anchor="middle">"king"</text>

                    <rect x="20" y="100" width="160" height="40" rx="6" fill="rgba(81,207,102,0.5)" stroke="#51cf66" stroke-width="2"/>
                    <text x="100" y="125" fill="white" font-size="12" text-anchor="middle">"queen"</text>

                    <rect x="20" y="150" width="160" height="40" rx="6" fill="rgba(255,107,107,0.5)" stroke="#ff6b6b" stroke-width="2"/>
                    <text x="100" y="175" fill="white" font-size="12" text-anchor="middle">"man"</text>

                    <rect x="20" y="200" width="160" height="40" rx="6" fill="rgba(255,215,0,0.5)" stroke="#ffd700" stroke-width="2"/>
                    <text x="100" y="225" fill="white" font-size="12" text-anchor="middle">"woman"</text>
                </g>

                <!-- Arrows -->
                <g>
                    <line x1="180" y1="70" x2="220" y2="70" stroke="#4a90d9" stroke-width="2" marker-end="url(#arrowBlue2)"/>
                    <line x1="180" y1="120" x2="220" y2="120" stroke="#51cf66" stroke-width="2" marker-end="url(#arrowGreen2)"/>
                    <line x1="180" y1="170" x2="220" y2="170" stroke="#ff6b6b" stroke-width="2" marker-end="url(#arrowRed2)"/>
                    <line x1="180" y1="220" x2="220" y2="220" stroke="#ffd700" stroke-width="2" marker-end="url(#arrowYellow2)"/>
                </g>

                <!-- Embedding Model -->
                <rect x="220" y="100" width="80" height="80" rx="8" fill="rgba(224,64,251,0.4)" stroke="#e040fb" stroke-width="2"/>
                <text x="260" y="135" fill="white" font-size="10" text-anchor="middle" font-weight="bold">Embedding</text>
                <text x="260" y="150" fill="white" font-size="10" text-anchor="middle" font-weight="bold">Model</text>
                <text x="260" y="170" fill="rgba(255,255,255,0.6)" font-size="8" text-anchor="middle">(e.g., ada-002)</text>

                <!-- Arrows to vectors -->
                <g>
                    <line x1="300" y1="130" x2="340" y2="70" stroke="#e040fb" stroke-width="2"/>
                    <line x1="300" y1="140" x2="340" y2="120" stroke="#e040fb" stroke-width="2"/>
                    <line x1="300" y1="150" x2="340" y2="170" stroke="#e040fb" stroke-width="2"/>
                    <line x1="300" y1="160" x2="340" y2="220" stroke="#e040fb" stroke-width="2"/>
                </g>

                <!-- Vectors -->
                <g>
                    <text x="420" y="30" fill="white" font-size="14" text-anchor="middle" font-weight="bold">Vectors (1536 dims)</text>

                    <rect x="340" y="50" width="160" height="40" rx="6" fill="rgba(74,144,217,0.3)" stroke="#4a90d9" stroke-width="2"/>
                    <text x="420" y="75" fill="rgba(255,255,255,0.8)" font-size="10" text-anchor="middle">[0.2, -0.5, 0.8, ...]</text>

                    <rect x="340" y="100" width="160" height="40" rx="6" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="2"/>
                    <text x="420" y="125" fill="rgba(255,255,255,0.8)" font-size="10" text-anchor="middle">[0.3, -0.4, 0.7, ...]</text>

                    <rect x="340" y="150" width="160" height="40" rx="6" fill="rgba(255,107,107,0.3)" stroke="#ff6b6b" stroke-width="2"/>
                    <text x="420" y="175" fill="rgba(255,255,255,0.8)" font-size="10" text-anchor="middle">[0.1, -0.6, 0.3, ...]</text>

                    <rect x="340" y="200" width="160" height="40" rx="6" fill="rgba(255,215,0,0.3)" stroke="#ffd700" stroke-width="2"/>
                    <text x="420" y="225" fill="rgba(255,255,255,0.8)" font-size="10" text-anchor="middle">[0.2, -0.5, 0.2, ...]</text>
                </g>

                <!-- 2D Visualization -->
                <g transform="translate(530, 20)">
                    <text x="100" y="15" fill="white" font-size="14" text-anchor="middle" font-weight="bold">Semantic Space</text>

                    <rect x="10" y="25" width="190" height="190" rx="8" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>

                    <!-- Axis -->
                    <line x1="20" y1="200" x2="190" y2="200" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                    <line x1="20" y1="200" x2="20" y2="35" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>

                    <!-- Points with animation -->
                    <circle cx="150" cy="60" r="8" fill="#4a90d9">
                        <animate attributeName="r" values="8;10;8" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <text x="165" y="55" fill="#4a90d9" font-size="10">king</text>

                    <circle cx="160" cy="100" r="8" fill="#51cf66">
                        <animate attributeName="r" values="8;10;8" dur="2s" begin="0.5s" repeatCount="indefinite"/>
                    </circle>
                    <text x="175" y="95" fill="#51cf66" font-size="10">queen</text>

                    <circle cx="60" cy="150" r="8" fill="#ff6b6b">
                        <animate attributeName="r" values="8;10;8" dur="2s" begin="1s" repeatCount="indefinite"/>
                    </circle>
                    <text x="45" y="145" fill="#ff6b6b" font-size="10">man</text>

                    <circle cx="70" cy="180" r="8" fill="#ffd700">
                        <animate attributeName="r" values="8;10;8" dur="2s" begin="1.5s" repeatCount="indefinite"/>
                    </circle>
                    <text x="85" y="185" fill="#ffd700" font-size="10">woman</text>

                    <!-- Relationship arrows -->
                    <line x1="60" y1="150" x2="150" y2="60" stroke="rgba(255,255,255,0.3)" stroke-width="1" stroke-dasharray="4,4">
                        <animate attributeName="stroke-opacity" values="0.3;0.6;0.3" dur="3s" repeatCount="indefinite"/>
                    </line>
                    <line x1="70" y1="180" x2="160" y2="100" stroke="rgba(255,255,255,0.3)" stroke-width="1" stroke-dasharray="4,4">
                        <animate attributeName="stroke-opacity" values="0.3;0.6;0.3" dur="3s" begin="1.5s" repeatCount="indefinite"/>
                    </line>
                </g>

                <!-- Key insight -->
                <rect x="20" y="260" width="480" height="50" rx="6" fill="rgba(78,205,196,0.2)" stroke="#4ecdc4" stroke-width="2"/>
                <text x="260" y="282" fill="#4ecdc4" font-size="12" text-anchor="middle" font-weight="bold">king - man + woman ≈ queen</text>
                <text x="260" y="300" fill="rgba(255,255,255,0.7)" font-size="10" text-anchor="middle">Similar meanings → Similar vectors → Close in space</text>

                <!-- Arrow defs -->
                <defs>
                    <marker id="arrowBlue2" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L8,3 z" fill="#4a90d9"/>
                    </marker>
                    <marker id="arrowGreen2" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L8,3 z" fill="#51cf66"/>
                    </marker>
                    <marker id="arrowRed2" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L8,3 z" fill="#ff6b6b"/>
                    </marker>
                    <marker id="arrowYellow2" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L8,3 z" fill="#ffd700"/>
                    </marker>
                </defs>
            </svg>
        </div>
    </div>
</div>

<!-- Slide 42: RAG Implementation -->
<div class="slide" id="slide60">
    <span class="slide-number">60</span>
    <h2>RAG Implementation</h2>
    <p>Building a simple RAG pipeline</p>
    <div class="two-column">
        <div class="card">
            <h4>1. Index Your Documents</h4>
            <div class="code-table">
                <div class="code-table-content">
                    <code style="font-size: 0.75em;">from langchain.text_splitter import CharacterTextSplitter
from langchain.embeddings import OpenAIEmbeddings
from langchain.vectorstores import Chroma

# Split documents into chunks
splitter = CharacterTextSplitter(
    chunk_size=1000,
    chunk_overlap=200
)
chunks = splitter.split_documents(documents)

# Create vector store
embeddings = OpenAIEmbeddings()
vectorstore = Chroma.from_documents(
    chunks, embeddings
)</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>2. Query with RAG</h4>
            <div class="code-table">
                <div class="code-table-content">
                    <code style="font-size: 0.75em;">from langchain.chains import RetrievalQA
from langchain.llms import OpenAI

# Create retriever
retriever = vectorstore.as_retriever(
    search_kwargs={"k": 3}  # Top 3 docs
)

# Create RAG chain
qa_chain = RetrievalQA.from_chain_type(
    llm=OpenAI(),
    retriever=retriever,
    return_source_documents=True
)

# Ask questions!
result = qa_chain("What is X?")
print(result["answer"])</code>
                </div>
            </div>
        </div>
    </div>
    <div class="highlight" style="margin-top: 15px;">
        <h4>Popular Vector Databases</h4>
        <p style="font-size: 0.9em;">
            <strong>Pinecone</strong> (managed) • <strong>Chroma</strong> (local/simple) • <strong>Weaviate</strong> (open source) • <strong>Milvus</strong> (scalable) • <strong>pgvector</strong> (PostgreSQL)
        </p>
    </div>
</div>

<!-- Slide 43: RAG Best Practices -->
<div class="slide" id="slide61">
    <span class="slide-number">61</span>
    <h2>RAG Best Practices</h2>
    <p>Tips for building effective RAG systems</p>
    <div class="two-column">
        <div class="card">
            <h4>Chunking Strategy</h4>
            <ul style="font-size: 0.9em;">
                <li><strong>Size matters:</strong> 500-1000 tokens typically works well</li>
                <li><strong>Overlap:</strong> 10-20% overlap prevents losing context</li>
                <li><strong>Semantic chunking:</strong> Split on paragraphs/sections</li>
                <li><strong>Metadata:</strong> Store source, page, date with chunks</li>
            </ul>

            <h4 style="margin-top: 20px;">Retrieval Tuning</h4>
            <ul style="font-size: 0.9em;">
                <li><strong>k value:</strong> Start with 3-5 documents</li>
                <li><strong>Similarity threshold:</strong> Filter low-relevance results</li>
                <li><strong>Hybrid search:</strong> Combine keyword + semantic</li>
                <li><strong>Reranking:</strong> Use a second model to reorder results</li>
            </ul>
        </div>
        <div class="card">
            <h4>Common Pitfalls</h4>
            <ul style="font-size: 0.9em;">
                <li>❌ Chunks too large → irrelevant content</li>
                <li>❌ Chunks too small → missing context</li>
                <li>❌ No overlap → broken sentences</li>
                <li>❌ Too many docs → context overflow</li>
            </ul>

            <h4 style="margin-top: 20px;">Evaluation Metrics</h4>
            <ul style="font-size: 0.9em;">
                <li><strong>Retrieval:</strong> Precision@k, Recall@k</li>
                <li><strong>Generation:</strong> Faithfulness, relevance</li>
                <li><strong>End-to-end:</strong> Answer correctness</li>
                <li><strong>Tools:</strong> RAGAS, LangSmith, TruLens</li>
            </ul>
        </div>
    </div>
    <div class="highlight" style="margin-top: 15px; text-align: center;">
        <p><strong>Remember:</strong> RAG quality = Retrieval quality × Generation quality</p>
    </div>
</div>

<!-- Slide 44: Fine-tuning Overview -->
<div class="slide" id="slide62">
    <span class="slide-number">62</span>
    <h2>Fine-tuning LLMs</h2>
    <p>When RAG isn't enough - customize the model itself</p>
    <div class="two-column">
        <div class="card">
            <h4>When to Fine-tune?</h4>
            <ul>
                <li><strong>Specific style/tone:</strong> Match brand voice</li>
                <li><strong>Domain expertise:</strong> Medical, legal, technical</li>
                <li><strong>New tasks:</strong> Structured output, classification</li>
                <li><strong>Efficiency:</strong> Smaller prompts, faster inference</li>
                <li><strong>Privacy:</strong> Train on sensitive data locally</li>
            </ul>
            <div class="highlight" style="margin-top: 15px;">
                <p style="font-size: 0.85em;"><strong>RAG vs Fine-tuning:</strong></p>
                <ul style="font-size: 0.8em; margin: 5px 0;">
                    <li>RAG: Dynamic knowledge, factual recall</li>
                    <li>Fine-tuning: Behavior, style, capabilities</li>
                    <li>Often used together!</li>
                </ul>
            </div>
        </div>
        <div class="card">
            <h4>The Challenge</h4>
            <p style="font-size: 0.9em;">Full fine-tuning requires updating <strong>all parameters</strong>:</p>
            <table style="width: 100%; font-size: 0.85em; margin: 10px 0;">
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td>LLaMA 7B</td>
                    <td style="text-align: right; color: #ff6b6b;">~28 GB VRAM</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td>LLaMA 13B</td>
                    <td style="text-align: right; color: #ff6b6b;">~52 GB VRAM</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td>LLaMA 70B</td>
                    <td style="text-align: right; color: #ff6b6b;">~280 GB VRAM</td>
                </tr>
            </table>
            <p style="font-size: 0.9em; margin-top: 15px;"><strong>Solution:</strong> Parameter-Efficient Fine-Tuning (PEFT)</p>
            <ul style="font-size: 0.85em;">
                <li>LoRA: Low-Rank Adaptation</li>
                <li>QLoRA: Quantized LoRA</li>
                <li>Train <strong>0.1-1%</strong> of parameters!</li>
            </ul>
        </div>
    </div>
</div>

<!-- Slide 45: LoRA Explained -->
<div class="slide" id="slide63">
    <span class="slide-number">63</span>
    <h2>LoRA: Low-Rank Adaptation</h2>
    <p>Efficient fine-tuning by adding small trainable matrices</p>
    <div style="display: flex; justify-content: center;">
        <div class="card" style="text-align: center; width: 95%; max-width: 1200px;">
            <svg viewBox="0 0 850 350" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- Original Weight Matrix -->
                <g>
                    <text x="150" y="30" fill="white" font-size="14" text-anchor="middle" font-weight="bold">Original Model</text>

                    <!-- Large W matrix -->
                    <rect x="50" y="50" width="200" height="200" rx="8" fill="rgba(74,144,217,0.4)" stroke="#4a90d9" stroke-width="3"/>
                    <text x="150" y="140" fill="white" font-size="24" text-anchor="middle" font-weight="bold">W</text>
                    <text x="150" y="165" fill="rgba(255,255,255,0.7)" font-size="12" text-anchor="middle">d × d</text>
                    <text x="150" y="185" fill="rgba(255,255,255,0.5)" font-size="10" text-anchor="middle">(e.g., 4096 × 4096)</text>

                    <!-- Frozen indicator -->
                    <rect x="70" y="220" width="160" height="25" rx="4" fill="rgba(100,100,100,0.5)" stroke="#888" stroke-width="2"/>
                    <text x="150" y="238" fill="#aaa" font-size="11" text-anchor="middle">❄️ FROZEN (no updates)</text>
                </g>

                <!-- Plus sign -->
                <text x="290" y="155" fill="#ffd700" font-size="40" text-anchor="middle" font-weight="bold">+</text>

                <!-- LoRA matrices -->
                <g>
                    <text x="500" y="30" fill="#51cf66" font-size="14" text-anchor="middle" font-weight="bold">LoRA Adapter</text>

                    <!-- Matrix A (down projection) -->
                    <rect x="340" y="80" width="60" height="160" rx="6" fill="rgba(81,207,102,0.5)" stroke="#51cf66" stroke-width="3">
                        <animate attributeName="fill" values="rgba(81,207,102,0.5);rgba(81,207,102,0.7);rgba(81,207,102,0.5)" dur="2s" repeatCount="indefinite"/>
                    </rect>
                    <text x="370" y="155" fill="white" font-size="18" text-anchor="middle" font-weight="bold">A</text>
                    <text x="370" y="175" fill="rgba(255,255,255,0.7)" font-size="10" text-anchor="middle">d × r</text>

                    <!-- Multiplication sign -->
                    <text x="420" y="165" fill="white" font-size="20" text-anchor="middle">×</text>

                    <!-- Matrix B (up projection) -->
                    <rect x="440" y="110" width="160" height="60" rx="6" fill="rgba(255,215,0,0.5)" stroke="#ffd700" stroke-width="3">
                        <animate attributeName="fill" values="rgba(255,215,0,0.5);rgba(255,215,0,0.7);rgba(255,215,0,0.5)" dur="2s" begin="0.5s" repeatCount="indefinite"/>
                    </rect>
                    <text x="520" y="145" fill="white" font-size="18" text-anchor="middle" font-weight="bold">B</text>
                    <text x="520" y="165" fill="rgba(255,255,255,0.7)" font-size="10" text-anchor="middle">r × d</text>

                    <!-- Trainable indicator -->
                    <rect x="380" y="220" width="160" height="25" rx="4" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="2"/>
                    <text x="460" y="238" fill="#51cf66" font-size="11" text-anchor="middle">🔥 TRAINABLE</text>
                </g>

                <!-- Equals sign -->
                <text x="640" y="155" fill="#4ecdc4" font-size="40" text-anchor="middle" font-weight="bold">=</text>

                <!-- Result -->
                <g>
                    <text x="750" y="30" fill="#4ecdc4" font-size="14" text-anchor="middle" font-weight="bold">Adapted Model</text>

                    <rect x="680" y="50" width="140" height="200" rx="8" fill="rgba(78,205,196,0.4)" stroke="#4ecdc4" stroke-width="3">
                        <animate attributeName="stroke-width" values="3;5;3" dur="2s" repeatCount="indefinite"/>
                    </rect>
                    <text x="750" y="140" fill="white" font-size="20" text-anchor="middle" font-weight="bold">W + AB</text>
                    <text x="750" y="170" fill="rgba(255,255,255,0.7)" font-size="11" text-anchor="middle">Same size as W</text>
                    <text x="750" y="190" fill="rgba(255,255,255,0.5)" font-size="10" text-anchor="middle">New behavior!</text>
                </g>

                <!-- Key insight box -->
                <rect x="50" y="280" width="400" height="60" rx="8" fill="rgba(255,215,0,0.15)" stroke="#ffd700" stroke-width="2"/>
                <text x="250" y="305" fill="#ffd700" font-size="12" text-anchor="middle" font-weight="bold">The Key Insight: Low Rank (r)</text>
                <text x="250" y="325" fill="rgba(255,255,255,0.8)" font-size="11" text-anchor="middle">If r = 8 and d = 4096: Train 65K params instead of 16M (0.4%!)</text>

                <!-- Rank visualization -->
                <g transform="translate(500, 270)">
                    <text x="150" y="15" fill="white" font-size="11" text-anchor="middle" font-weight="bold">Typical Rank Values</text>
                    <rect x="20" y="25" width="60" height="30" rx="4" fill="rgba(81,207,102,0.3)" stroke="#51cf66" stroke-width="1"/>
                    <text x="50" y="45" fill="white" font-size="10" text-anchor="middle">r = 8</text>
                    <rect x="90" y="25" width="60" height="30" rx="4" fill="rgba(81,207,102,0.4)" stroke="#51cf66" stroke-width="1"/>
                    <text x="120" y="45" fill="white" font-size="10" text-anchor="middle">r = 16</text>
                    <rect x="160" y="25" width="60" height="30" rx="4" fill="rgba(81,207,102,0.5)" stroke="#51cf66" stroke-width="1"/>
                    <text x="190" y="45" fill="white" font-size="10" text-anchor="middle">r = 32</text>
                    <rect x="230" y="25" width="60" height="30" rx="4" fill="rgba(81,207,102,0.6)" stroke="#51cf66" stroke-width="1"/>
                    <text x="260" y="45" fill="white" font-size="10" text-anchor="middle">r = 64</text>
                    <text x="150" y="70" fill="rgba(255,255,255,0.6)" font-size="9" text-anchor="middle">Higher r = more capacity, more params</text>
                </g>
            </svg>
        </div>
    </div>
</div>

<!-- Slide 46: QLoRA -->
<div class="slide" id="slide64">
    <span class="slide-number">64</span>
    <h2>QLoRA: Quantized LoRA</h2>
    <p>Fine-tune 65B models on a single GPU!</p>
    <div style="display: flex; justify-content: center;">
        <div class="card" style="text-align: center; width: 95%; max-width: 1100px;">
            <svg viewBox="0 0 750 300" style="width: 100%; background: rgba(0,0,0,0.2); border-radius: 8px;">
                <!-- 16-bit model -->
                <g>
                    <text x="100" y="30" fill="white" font-size="13" text-anchor="middle" font-weight="bold">Standard LoRA</text>

                    <rect x="30" y="50" width="140" height="100" rx="8" fill="rgba(255,107,107,0.4)" stroke="#ff6b6b" stroke-width="2"/>
                    <text x="100" y="85" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Base Model</text>
                    <text x="100" y="105" fill="#ff6b6b" font-size="11" text-anchor="middle">16-bit (FP16)</text>
                    <text x="100" y="125" fill="rgba(255,255,255,0.6)" font-size="10" text-anchor="middle">~14 GB for 7B</text>

                    <rect x="50" y="160" width="100" height="50" rx="6" fill="rgba(81,207,102,0.4)" stroke="#51cf66" stroke-width="2"/>
                    <text x="100" y="185" fill="white" font-size="10" text-anchor="middle">LoRA Adapters</text>
                    <text x="100" y="200" fill="#51cf66" font-size="9" text-anchor="middle">16-bit</text>
                </g>

                <!-- Arrow -->
                <g>
                    <line x1="190" y1="130" x2="250" y2="130" stroke="#ffd700" stroke-width="3" marker-end="url(#arrowYellowQ)"/>
                    <text x="220" y="115" fill="#ffd700" font-size="10" text-anchor="middle">Quantize</text>
                </g>

                <!-- QLoRA model -->
                <g>
                    <text x="350" y="30" fill="#4ecdc4" font-size="13" text-anchor="middle" font-weight="bold">QLoRA</text>

                    <rect x="270" y="50" width="160" height="100" rx="8" fill="rgba(78,205,196,0.4)" stroke="#4ecdc4" stroke-width="2"/>
                    <text x="350" y="80" fill="white" font-size="12" text-anchor="middle" font-weight="bold">Base Model</text>
                    <text x="350" y="100" fill="#4ecdc4" font-size="11" text-anchor="middle">4-bit (NF4)</text>
                    <text x="350" y="120" fill="rgba(255,255,255,0.6)" font-size="10" text-anchor="middle">~4 GB for 7B</text>
                    <text x="350" y="140" fill="#51cf66" font-size="9" text-anchor="middle">75% smaller!</text>

                    <rect x="290" y="160" width="120" height="50" rx="6" fill="rgba(81,207,102,0.5)" stroke="#51cf66" stroke-width="2">
                        <animate attributeName="fill" values="rgba(81,207,102,0.5);rgba(81,207,102,0.7);rgba(81,207,102,0.5)" dur="2s" repeatCount="indefinite"/>
                    </rect>
                    <text x="350" y="185" fill="white" font-size="10" text-anchor="middle">LoRA Adapters</text>
                    <text x="350" y="200" fill="#51cf66" font-size="9" text-anchor="middle">16-bit (trainable)</text>
                </g>

                <!-- Memory comparison -->
                <g transform="translate(470, 40)">
                    <text x="130" y="20" fill="white" font-size="13" text-anchor="middle" font-weight="bold">Memory Comparison</text>

                    <!-- Full fine-tune bar -->
                    <rect x="20" y="40" width="220" height="30" rx="4" fill="rgba(255,107,107,0.3)" stroke="#ff6b6b" stroke-width="1"/>
                    <rect x="20" y="40" width="220" height="30" rx="4" fill="rgba(255,107,107,0.6)"/>
                    <text x="130" y="60" fill="white" font-size="10" text-anchor="middle">Full Fine-tune: ~160 GB (70B)</text>

                    <!-- LoRA bar -->
                    <rect x="20" y="80" width="220" height="30" rx="4" fill="rgba(255,215,0,0.3)" stroke="#ffd700" stroke-width="1"/>
                    <rect x="20" y="80" width="110" height="30" rx="4" fill="rgba(255,215,0,0.6)"/>
                    <text x="130" y="100" fill="white" font-size="10" text-anchor="middle">LoRA: ~80 GB (70B)</text>

                    <!-- QLoRA bar -->
                    <rect x="20" y="120" width="220" height="30" rx="4" fill="rgba(78,205,196,0.3)" stroke="#4ecdc4" stroke-width="1"/>
                    <rect x="20" y="120" width="44" height="30" rx="4" fill="rgba(78,205,196,0.6)">
                        <animate attributeName="fill" values="rgba(78,205,196,0.6);rgba(78,205,196,0.9);rgba(78,205,196,0.6)" dur="2s" repeatCount="indefinite"/>
                    </rect>
                    <text x="130" y="140" fill="white" font-size="10" text-anchor="middle">QLoRA: ~32 GB (70B) ✓</text>

                    <text x="130" y="175" fill="rgba(255,255,255,0.7)" font-size="10" text-anchor="middle">Fine-tune 70B on a single A100!</text>
                </g>

                <!-- Key innovations -->
                <g transform="translate(30, 220)">
                    <text x="350" y="20" fill="#ffd700" font-size="12" text-anchor="middle" font-weight="bold">QLoRA Key Innovations</text>

                    <rect x="30" y="35" width="200" height="50" rx="6" fill="rgba(255,215,0,0.15)" stroke="#ffd700" stroke-width="1"/>
                    <text x="130" y="55" fill="#ffd700" font-size="10" text-anchor="middle" font-weight="bold">4-bit NormalFloat (NF4)</text>
                    <text x="130" y="72" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="middle">Optimal quantization for weights</text>

                    <rect x="250" y="35" width="200" height="50" rx="6" fill="rgba(78,205,196,0.15)" stroke="#4ecdc4" stroke-width="1"/>
                    <text x="350" y="55" fill="#4ecdc4" font-size="10" text-anchor="middle" font-weight="bold">Double Quantization</text>
                    <text x="350" y="72" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="middle">Quantize the quantization constants</text>

                    <rect x="470" y="35" width="200" height="50" rx="6" fill="rgba(81,207,102,0.15)" stroke="#51cf66" stroke-width="1"/>
                    <text x="570" y="55" fill="#51cf66" font-size="10" text-anchor="middle" font-weight="bold">Paged Optimizers</text>
                    <text x="570" y="72" fill="rgba(255,255,255,0.7)" font-size="9" text-anchor="middle">Handle memory spikes gracefully</text>
                </g>

                <defs>
                    <marker id="arrowYellowQ" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#ffd700"/>
                    </marker>
                </defs>
            </svg>
        </div>
    </div>
</div>

<!-- Slide 47: Fine-tuning Implementation -->
<div class="slide" id="slide65">
    <span class="slide-number">65</span>
    <h2>Fine-tuning with QLoRA</h2>
    <p>Practical implementation using Hugging Face</p>
    <div class="two-column">
        <div class="card">
            <h4>1. Setup & Configuration</h4>
            <div class="code-table">
                <div class="code-table-content">
                    <code style="font-size: 0.7em;">from transformers import AutoModelForCausalLM
from peft import LoraConfig, get_peft_model
from peft import prepare_model_for_kbit_training
import bitsandbytes as bnb

# Load model in 4-bit
model = AutoModelForCausalLM.from_pretrained(
    "meta-llama/Llama-2-7b-hf",
    load_in_4bit=True,
    quantization_config=BitsAndBytesConfig(
        load_in_4bit=True,
        bnb_4bit_quant_type="nf4",
        bnb_4bit_compute_dtype=torch.bfloat16,
    )
)

# Configure LoRA
lora_config = LoraConfig(
    r=16,               # Rank
    lora_alpha=32,      # Scaling
    target_modules=["q_proj", "v_proj"],
    lora_dropout=0.05,
    task_type="CAUSAL_LM"
)</code>
                </div>
            </div>
        </div>
        <div class="card">
            <h4>2. Training</h4>
            <div class="code-table">
                <div class="code-table-content">
                    <code style="font-size: 0.7em;">from transformers import TrainingArguments
from trl import SFTTrainer

# Prepare model
model = prepare_model_for_kbit_training(model)
model = get_peft_model(model, lora_config)

# Training arguments
training_args = TrainingArguments(
    output_dir="./results",
    num_train_epochs=3,
    per_device_train_batch_size=4,
    gradient_accumulation_steps=4,
    learning_rate=2e-4,
    fp16=True,
)

# Train!
trainer = SFTTrainer(
    model=model,
    train_dataset=dataset,
    args=training_args,
    max_seq_length=512,
)
trainer.train()</code>
                </div>
            </div>
        </div>
    </div>
    <div class="highlight" style="margin-top: 15px;">
        <h4>Key Parameters</h4>
        <p style="font-size: 0.85em;">
            <strong>r (rank):</strong> 8-64, higher = more capacity |
            <strong>lora_alpha:</strong> Usually 2×r |
            <strong>target_modules:</strong> Which layers to adapt (attention projections most common)
        </p>
    </div>
</div>

<!-- Slide 48: LoRA Best Practices -->
<div class="slide" id="slide66">
    <span class="slide-number">66</span>
    <h2>LoRA/QLoRA Best Practices</h2>
    <p>Tips for successful fine-tuning</p>
    <div class="two-column">
        <div class="card">
            <h4>Data Preparation</h4>
            <ul style="font-size: 0.9em;">
                <li><strong>Quality > Quantity:</strong> 1K good examples beats 100K bad ones</li>
                <li><strong>Format consistency:</strong> Use same prompt template</li>
                <li><strong>Diverse examples:</strong> Cover edge cases</li>
                <li><strong>Clean data:</strong> Remove duplicates, fix errors</li>
            </ul>

            <h4 style="margin-top: 20px;">Hyperparameters</h4>
            <ul style="font-size: 0.9em;">
                <li><strong>Start small:</strong> r=8, then increase if needed</li>
                <li><strong>Learning rate:</strong> 1e-4 to 2e-4 typical</li>
                <li><strong>Epochs:</strong> 1-3 usually sufficient</li>
                <li><strong>Batch size:</strong> Use gradient accumulation</li>
            </ul>
        </div>
        <div class="card">
            <h4>Which Layers to Target?</h4>
            <table style="width: 100%; font-size: 0.85em; margin: 10px 0;">
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td><strong>q_proj, v_proj</strong></td>
                    <td>Most common, good default</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td><strong>+ k_proj, o_proj</strong></td>
                    <td>More capacity</td>
                </tr>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <td><strong>+ gate, up, down</strong></td>
                    <td>Full adapter (MLP too)</td>
                </tr>
            </table>

            <h4 style="margin-top: 20px;">Common Pitfalls</h4>
            <ul style="font-size: 0.9em;">
                <li>❌ Too high learning rate → catastrophic forgetting</li>
                <li>❌ Too few examples → overfitting</li>
                <li>❌ Wrong prompt format → poor generalization</li>
                <li>❌ No eval set → can't detect problems</li>
            </ul>
        </div>
    </div>
    <div class="highlight" style="margin-top: 15px; text-align: center;">
        <p><strong>Tools:</strong> Hugging Face PEFT • Axolotl • LLaMA-Factory • Unsloth (2x faster!)</p>
    </div>
</div>

<!-- Slide 49: What's Next -->
<div class="slide" id="slide67">
    <span class="slide-number">67</span>
    <h2>What's Next? Part 2 Preview</h2>
    <p>Now that you understand the foundations, Part 2 will cover:</p>
    <div class="two-column">
        <div class="card">
            <h4>Advanced Techniques</h4>
            <ul>
                <li>AI Agents & Tool Use</li>
                <li>Chain-of-Thought prompting</li>
                <li>Advanced RAG patterns (HyDE, RAPTOR)</li>
                <li>Multi-modal models (Vision, Audio)</li>
            </ul>
        </div>
        <div class="card">
            <h4>Production & Deployment</h4>
            <ul>
                <li>Evaluation frameworks (RAGAS, Evals)</li>
                <li>Guardrails & safety</li>
                <li>Scaling & optimization</li>
                <li>MLOps for LLMs</li>
            </ul>
        </div>
    </div>
</div>

<!-- Slide 50: Summary -->
<div class="slide" id="slide68">
    <span class="slide-number">68</span>
    <h2>Course Summary</h2>
    <div class="three-column">
        <div class="card">
            <h4>Day 1</h4>
            <p>Python Data Science</p>
            <ul style="font-size: 0.85em; margin-left: 15px;">
                <li>NumPy, Pandas, Matplotlib</li>
                <li>ML fundamentals</li>
                <li>Supervised learning</li>
            </ul>
        </div>
        <div class="card">
            <h4>Day 2</h4>
            <p>Deep Learning</p>
            <ul style="font-size: 0.85em; margin-left: 15px;">
                <li>Neural networks</li>
                <li>Training & backprop</li>
                <li>PyTorch basics</li>
            </ul>
        </div>
        <div class="card">
            <h4>Day 3</h4>
            <p>NLP & LLMs</p>
            <ul style="font-size: 0.85em; margin-left: 15px;">
                <li>Transformers & Attention</li>
                <li>RAG & Vector DBs</li>
                <li>LoRA/QLoRA Fine-tuning</li>
            </ul>
        </div>
    </div>
    <div class="highlight" style="margin-top: 30px; text-align: center;">
        <p style="font-size: 1.3em;"><strong>You now have the foundation to understand and work with LLMs!</strong></p>
    </div>
</div>

<!-- Navigation -->
<div class="nav-buttons">
    <button class="nav-btn" onclick="prevSlide()">← Previous</button>
    <button class="nav-btn" onclick="nextSlide()">Next →</button>
</div>

<script>
    let currentSlide = 1;
    const totalSlides = 39;

    function showSlide(n) {
        document.getElementById(`slide${currentSlide}`).scrollIntoView({ behavior: 'smooth' });
    }

    function nextSlide() {
        if (currentSlide < totalSlides) {
            currentSlide++;
            document.getElementById(`slide${currentSlide}`).scrollIntoView({ behavior: 'smooth' });
        }
    }

    function prevSlide() {
        if (currentSlide > 1) {
            currentSlide--;
            document.getElementById(`slide${currentSlide}`).scrollIntoView({ behavior: 'smooth' });
        }
    }

    // Keyboard navigation (including presentation clicker support)
    document.addEventListener('keydown', (e) => {
        // Forward: Arrow Right, Space, Page Down, Enter
        if (e.key === 'ArrowRight' || e.key === ' ' || e.key === 'PageDown' || e.key === 'Enter') {
            e.preventDefault();
            nextSlide();
        // Back: Arrow Left, Page Up, Backspace
        } else if (e.key === 'ArrowLeft' || e.key === 'PageUp' || e.key === 'Backspace') {
            e.preventDefault();
            prevSlide();
        }
    });
</script>

</body>
</html>
